"use strict";const xe=require("electron"),vl=require("events"),ur=require("crypto"),Wu=require("tty"),Gi=require("util"),Vi=require("node:process"),Yu=require("node:os"),Eo=require("node:tty"),it=require("fs"),cr=require("stream"),xt=require("url"),zu=require("string_decoder"),Xu=require("constants"),El=require("assert"),Re=require("path"),fr=require("child_process"),Wi=require("os"),yl=require("zlib"),Ku=require("http");var et=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ju(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var u=t.default;if(typeof u=="function"){var h=function f(){return this instanceof f?Reflect.construct(u,arguments,this.constructor):u.apply(this,arguments)};h.prototype=u.prototype}else h={};return Object.defineProperty(h,"__esModule",{value:!0}),Object.keys(t).forEach(function(f){var c=Object.getOwnPropertyDescriptor(t,f);Object.defineProperty(h,f,c.get?c:{enumerable:!0,get:function(){return t[f]}})}),h}var Gr={},Vr={},St={},yo;function wl(){if(yo)return St;yo=1,Object.defineProperty(St,"__esModule",{value:!0}),St.CancellationError=St.CancellationToken=void 0;const t=vl;let u=class extends t.EventEmitter{get cancelled(){return this._cancelled||this._parent!=null&&this._parent.cancelled}set parent(c){this.removeParentCancelHandler(),this._parent=c,this.parentCancelHandler=()=>this.cancel(),this._parent.onCancel(this.parentCancelHandler)}constructor(c){super(),this.parentCancelHandler=null,this._parent=null,this._cancelled=!1,c!=null&&(this.parent=c)}cancel(){this._cancelled=!0,this.emit("cancel")}onCancel(c){this.cancelled?c():this.once("cancel",c)}createPromise(c){if(this.cancelled)return Promise.reject(new h);const s=()=>{if(o!=null)try{this.removeListener("cancel",o),o=null}catch{}};let o=null;return new Promise((d,n)=>{let l=null;if(o=()=>{try{l!=null&&(l(),l=null)}finally{n(new h)}},this.cancelled){o();return}this.onCancel(o),c(d,n,i=>{l=i})}).then(d=>(s(),d)).catch(d=>{throw s(),d})}removeParentCancelHandler(){const c=this._parent;c!=null&&this.parentCancelHandler!=null&&(c.removeListener("cancel",this.parentCancelHandler),this.parentCancelHandler=null)}dispose(){try{this.removeParentCancelHandler()}finally{this.removeAllListeners(),this._parent=null}}};St.CancellationToken=u;class h extends Error{constructor(){super("cancelled")}}return St.CancellationError=h,St}var He={},Sr={exports:{}},Ar={exports:{}},Wr,wo;function Qu(){if(wo)return Wr;wo=1;var t=1e3,u=t*60,h=u*60,f=h*24,c=f*7,s=f*365.25;Wr=function(i,a){a=a||{};var r=typeof i;if(r==="string"&&i.length>0)return o(i);if(r==="number"&&isFinite(i))return a.long?n(i):d(i);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(i))};function o(i){if(i=String(i),!(i.length>100)){var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(i);if(a){var r=parseFloat(a[1]),p=(a[2]||"ms").toLowerCase();switch(p){case"years":case"year":case"yrs":case"yr":case"y":return r*s;case"weeks":case"week":case"w":return r*c;case"days":case"day":case"d":return r*f;case"hours":case"hour":case"hrs":case"hr":case"h":return r*h;case"minutes":case"minute":case"mins":case"min":case"m":return r*u;case"seconds":case"second":case"secs":case"sec":case"s":return r*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function d(i){var a=Math.abs(i);return a>=f?Math.round(i/f)+"d":a>=h?Math.round(i/h)+"h":a>=u?Math.round(i/u)+"m":a>=t?Math.round(i/t)+"s":i+"ms"}function n(i){var a=Math.abs(i);return a>=f?l(i,a,f,"day"):a>=h?l(i,a,h,"hour"):a>=u?l(i,a,u,"minute"):a>=t?l(i,a,t,"second"):i+" ms"}function l(i,a,r,p){var g=a>=r*1.5;return Math.round(i/r)+" "+p+(g?"s":"")}return Wr}var Yr,_o;function _l(){if(_o)return Yr;_o=1;function t(u){f.debug=f,f.default=f,f.coerce=l,f.disable=d,f.enable=s,f.enabled=n,f.humanize=Qu(),f.destroy=i,Object.keys(u).forEach(a=>{f[a]=u[a]}),f.names=[],f.skips=[],f.formatters={};function h(a){let r=0;for(let p=0;p<a.length;p++)r=(r<<5)-r+a.charCodeAt(p),r|=0;return f.colors[Math.abs(r)%f.colors.length]}f.selectColor=h;function f(a){let r,p=null,g,E;function m(...A){if(!m.enabled)return;const C=m,O=Number(new Date),I=O-(r||O);C.diff=I,C.prev=r,C.curr=O,r=O,A[0]=f.coerce(A[0]),typeof A[0]!="string"&&A.unshift("%O");let j=0;A[0]=A[0].replace(/%([a-zA-Z%])/g,(_,T)=>{if(_==="%%")return"%";j++;const y=f.formatters[T];if(typeof y=="function"){const q=A[j];_=y.call(C,q),A.splice(j,1),j--}return _}),f.formatArgs.call(C,A),(C.log||f.log).apply(C,A)}return m.namespace=a,m.useColors=f.useColors(),m.color=f.selectColor(a),m.extend=c,m.destroy=f.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(g!==f.namespaces&&(g=f.namespaces,E=f.enabled(a)),E),set:A=>{p=A}}),typeof f.init=="function"&&f.init(m),m}function c(a,r){const p=f(this.namespace+(typeof r>"u"?":":r)+a);return p.log=this.log,p}function s(a){f.save(a),f.namespaces=a,f.names=[],f.skips=[];const r=(typeof a=="string"?a:"").trim().replace(" ",",").split(",").filter(Boolean);for(const p of r)p[0]==="-"?f.skips.push(p.slice(1)):f.names.push(p)}function o(a,r){let p=0,g=0,E=-1,m=0;for(;p<a.length;)if(g<r.length&&(r[g]===a[p]||r[g]==="*"))r[g]==="*"?(E=g,m=p,g++):(p++,g++);else if(E!==-1)g=E+1,m++,p=m;else return!1;for(;g<r.length&&r[g]==="*";)g++;return g===r.length}function d(){const a=[...f.names,...f.skips.map(r=>"-"+r)].join(",");return f.enable(""),a}function n(a){for(const r of f.skips)if(o(a,r))return!1;for(const r of f.names)if(o(a,r))return!0;return!1}function l(a){return a instanceof Error?a.stack||a.message:a}function i(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return f.enable(f.load()),f}return Yr=t,Yr}var So;function Zu(){return So||(So=1,function(t,u){u.formatArgs=f,u.save=c,u.load=s,u.useColors=h,u.storage=o(),u.destroy=(()=>{let n=!1;return()=>{n||(n=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),u.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function h(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let n;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(n=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(n[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function f(n){if(n[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+n[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const l="color: "+this.color;n.splice(1,0,l,"color: inherit");let i=0,a=0;n[0].replace(/%[a-zA-Z%]/g,r=>{r!=="%%"&&(i++,r==="%c"&&(a=i))}),n.splice(a,0,l)}u.log=console.debug||console.log||(()=>{});function c(n){try{n?u.storage.setItem("debug",n):u.storage.removeItem("debug")}catch{}}function s(){let n;try{n=u.storage.getItem("debug")}catch{}return!n&&typeof process<"u"&&"env"in process&&(n=process.env.DEBUG),n}function o(){try{return localStorage}catch{}}t.exports=_l()(u);const{formatters:d}=t.exports;d.j=function(n){try{return JSON.stringify(n)}catch(l){return"[UnexpectedJSONParseError]: "+l.message}}}(Ar,Ar.exports)),Ar.exports}var Tr={exports:{}};function Je(t,u=globalThis.Deno?globalThis.Deno.args:Vi.argv){const h=t.startsWith("-")?"":t.length===1?"-":"--",f=u.indexOf(h+t),c=u.indexOf("--");return f!==-1&&(c===-1||f<c)}const{env:Fe}=Vi;let xr;Je("no-color")||Je("no-colors")||Je("color=false")||Je("color=never")?xr=0:(Je("color")||Je("colors")||Je("color=true")||Je("color=always"))&&(xr=1);function ec(){if(!("FORCE_COLOR"in Fe))return;if(Fe.FORCE_COLOR==="true")return 1;if(Fe.FORCE_COLOR==="false")return 0;if(Fe.FORCE_COLOR.length===0)return 1;const t=Math.min(Number.parseInt(Fe.FORCE_COLOR,10),3);if([0,1,2,3].includes(t))return t}function tc(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function rc(t,{streamIsTTY:u,sniffFlags:h=!0}={}){const f=ec();f!==void 0&&(xr=f);const c=h?xr:f;if(c===0)return 0;if(h){if(Je("color=16m")||Je("color=full")||Je("color=truecolor"))return 3;if(Je("color=256"))return 2}if("TF_BUILD"in Fe&&"AGENT_NAME"in Fe)return 1;if(t&&!u&&c===void 0)return 0;const s=c||0;if(Fe.TERM==="dumb")return s;if(Vi.platform==="win32"){const o=Yu.release().split(".");return Number(o[0])>=10&&Number(o[2])>=10586?Number(o[2])>=14931?3:2:1}if("CI"in Fe)return["GITHUB_ACTIONS","GITEA_ACTIONS","CIRCLECI"].some(o=>o in Fe)?3:["TRAVIS","APPVEYOR","GITLAB_CI","BUILDKITE","DRONE"].some(o=>o in Fe)||Fe.CI_NAME==="codeship"?1:s;if("TEAMCITY_VERSION"in Fe)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Fe.TEAMCITY_VERSION)?1:0;if(Fe.COLORTERM==="truecolor"||Fe.TERM==="xterm-kitty")return 3;if("TERM_PROGRAM"in Fe){const o=Number.parseInt((Fe.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Fe.TERM_PROGRAM){case"iTerm.app":return o>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Fe.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(Fe.TERM)||"COLORTERM"in Fe?1:s}function Hi(t,u={}){const h=rc(t,{streamIsTTY:t&&t.isTTY,...u});return tc(h)}const nc={stdout:Hi({isTTY:Eo.isatty(1)}),stderr:Hi({isTTY:Eo.isatty(2)})},ic=Object.freeze(Object.defineProperty({__proto__:null,createSupportsColor:Hi,default:nc},Symbol.toStringTag,{value:"Module"})),oc=Ju(ic);var Ao;function ac(){return Ao||(Ao=1,function(t,u){const h=Wu,f=Gi;u.init=i,u.log=d,u.formatArgs=s,u.save=n,u.load=l,u.useColors=c,u.destroy=f.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),u.colors=[6,2,3,4,5,1];try{const r=oc;r&&(r.stderr||r).level>=2&&(u.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}u.inspectOpts=Object.keys(process.env).filter(r=>/^debug_/i.test(r)).reduce((r,p)=>{const g=p.substring(6).toLowerCase().replace(/_([a-z])/g,(m,A)=>A.toUpperCase());let E=process.env[p];return/^(yes|on|true|enabled)$/i.test(E)?E=!0:/^(no|off|false|disabled)$/i.test(E)?E=!1:E==="null"?E=null:E=Number(E),r[g]=E,r},{});function c(){return"colors"in u.inspectOpts?!!u.inspectOpts.colors:h.isatty(process.stderr.fd)}function s(r){const{namespace:p,useColors:g}=this;if(g){const E=this.color,m="\x1B[3"+(E<8?E:"8;5;"+E),A=`  ${m};1m${p} \x1B[0m`;r[0]=A+r[0].split(`
`).join(`
`+A),r.push(m+"m+"+t.exports.humanize(this.diff)+"\x1B[0m")}else r[0]=o()+p+" "+r[0]}function o(){return u.inspectOpts.hideDate?"":new Date().toISOString()+" "}function d(...r){return process.stderr.write(f.formatWithOptions(u.inspectOpts,...r)+`
`)}function n(r){r?process.env.DEBUG=r:delete process.env.DEBUG}function l(){return process.env.DEBUG}function i(r){r.inspectOpts={};const p=Object.keys(u.inspectOpts);for(let g=0;g<p.length;g++)r.inspectOpts[p[g]]=u.inspectOpts[p[g]]}t.exports=_l()(u);const{formatters:a}=t.exports;a.o=function(r){return this.inspectOpts.colors=this.useColors,f.inspect(r,this.inspectOpts).split(`
`).map(p=>p.trim()).join(" ")},a.O=function(r){return this.inspectOpts.colors=this.useColors,f.inspect(r,this.inspectOpts)}}(Tr,Tr.exports)),Tr.exports}var To;function sc(){return To||(To=1,typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Sr.exports=Zu():Sr.exports=ac()),Sr.exports}var Rr={},Ro;function Lr(){if(Ro)return Rr;Ro=1,Object.defineProperty(Rr,"__esModule",{value:!0}),Rr.newError=t;function t(u,h){const f=new Error(u);return f.code=h,f}return Rr}var Bt={},Co;function Sl(){if(Co)return Bt;Co=1,Object.defineProperty(Bt,"__esModule",{value:!0}),Bt.ProgressCallbackTransform=void 0;const t=cr;let u=class extends t.Transform{constructor(f,c,s){super(),this.total=f,this.cancellationToken=c,this.onProgress=s,this.start=Date.now(),this.transferred=0,this.delta=0,this.nextUpdate=this.start+1e3}_transform(f,c,s){if(this.cancellationToken.cancelled){s(new Error("cancelled"),null);return}this.transferred+=f.length,this.delta+=f.length;const o=Date.now();o>=this.nextUpdate&&this.transferred!==this.total&&(this.nextUpdate=o+1e3,this.onProgress({total:this.total,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.total*100,bytesPerSecond:Math.round(this.transferred/((o-this.start)/1e3))}),this.delta=0),s(null,f)}_flush(f){if(this.cancellationToken.cancelled){f(new Error("cancelled"));return}this.onProgress({total:this.total,delta:this.delta,transferred:this.total,percent:100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))}),this.delta=0,f(null)}};return Bt.ProgressCallbackTransform=u,Bt}var bo;function lc(){if(bo)return He;bo=1,Object.defineProperty(He,"__esModule",{value:!0}),He.DigestTransform=He.HttpExecutor=He.HttpError=void 0,He.createHttpError=l,He.parseJson=r,He.configureRequestOptionsFromUrl=g,He.configureRequestUrl=E,He.safeGetHeader=C,He.configureRequestOptions=I,He.safeStringifyJson=j;const t=ur,u=sc(),h=it,f=cr,c=xt,s=wl(),o=Lr(),d=Sl(),n=(0,u.default)("electron-builder");function l(R,_=null){return new a(R.statusCode||-1,`${R.statusCode} ${R.statusMessage}`+(_==null?"":`
`+JSON.stringify(_,null,"  "))+`
Headers: `+j(R.headers),_)}const i=new Map([[429,"Too many requests"],[400,"Bad request"],[403,"Forbidden"],[404,"Not found"],[405,"Method not allowed"],[406,"Not acceptable"],[408,"Request timeout"],[413,"Request entity too large"],[500,"Internal server error"],[502,"Bad gateway"],[503,"Service unavailable"],[504,"Gateway timeout"],[505,"HTTP version not supported"]]);class a extends Error{constructor(_,T=`HTTP error: ${i.get(_)||_}`,y=null){super(T),this.statusCode=_,this.description=y,this.name="HttpError",this.code=`HTTP_ERROR_${_}`}isServerError(){return this.statusCode>=500&&this.statusCode<=599}}He.HttpError=a;function r(R){return R.then(_=>_==null||_.length===0?null:JSON.parse(_))}class p{constructor(){this.maxRedirects=10}request(_,T=new s.CancellationToken,y){I(_);const q=y==null?void 0:JSON.stringify(y),$=q?Buffer.from(q):void 0;if($!=null){n(q);const{headers:L,...k}=_;_={method:"post",headers:{"Content-Type":"application/json","Content-Length":$.length,...L},...k}}return this.doApiRequest(_,T,L=>L.end($))}doApiRequest(_,T,y,q=0){return n.enabled&&n(`Request: ${j(_)}`),T.createPromise(($,L,k)=>{const D=this.createRequest(_,P=>{try{this.handleResponse(P,_,T,$,L,q,y)}catch(F){L(F)}});this.addErrorAndTimeoutHandlers(D,L,_.timeout),this.addRedirectHandlers(D,_,L,q,P=>{this.doApiRequest(P,T,y,q).then($).catch(L)}),y(D,L),k(()=>D.abort())})}addRedirectHandlers(_,T,y,q,$){}addErrorAndTimeoutHandlers(_,T,y=60*1e3){this.addTimeOutHandler(_,T,y),_.on("error",T),_.on("aborted",()=>{T(new Error("Request has been aborted by the server"))})}handleResponse(_,T,y,q,$,L,k){var D;if(n.enabled&&n(`Response: ${_.statusCode} ${_.statusMessage}, request options: ${j(T)}`),_.statusCode===404){$(l(_,`method: ${T.method||"GET"} url: ${T.protocol||"https:"}//${T.hostname}${T.port?`:${T.port}`:""}${T.path}

Please double check that your authentication token is correct. Due to security reasons, actual status maybe not reported, but 404.
`));return}else if(_.statusCode===204){q();return}const P=(D=_.statusCode)!==null&&D!==void 0?D:0,F=P>=300&&P<400,U=C(_,"location");if(F&&U!=null){if(L>this.maxRedirects){$(this.createMaxRedirectError());return}this.doApiRequest(p.prepareRedirectUrlOptions(U,T),y,k,L).then(q).catch($);return}_.setEncoding("utf8");let J="";_.on("error",$),_.on("data",V=>J+=V),_.on("end",()=>{try{if(_.statusCode!=null&&_.statusCode>=400){const V=C(_,"content-type"),ne=V!=null&&(Array.isArray(V)?V.find(ce=>ce.includes("json"))!=null:V.includes("json"));$(l(_,`method: ${T.method||"GET"} url: ${T.protocol||"https:"}//${T.hostname}${T.port?`:${T.port}`:""}${T.path}

          Data:
          ${ne?JSON.stringify(JSON.parse(J)):J}
          `))}else q(J.length===0?null:J)}catch(V){$(V)}})}async downloadToBuffer(_,T){return await T.cancellationToken.createPromise((y,q,$)=>{const L=[],k={headers:T.headers||void 0,redirect:"manual"};E(_,k),I(k),this.doDownload(k,{destination:null,options:T,onCancel:$,callback:D=>{D==null?y(Buffer.concat(L)):q(D)},responseHandler:(D,P)=>{let F=0;D.on("data",U=>{if(F+=U.length,F>524288e3){P(new Error("Maximum allowed size is 500 MB"));return}L.push(U)}),D.on("end",()=>{P(null)})}},0)})}doDownload(_,T,y){const q=this.createRequest(_,$=>{if($.statusCode>=400){T.callback(new Error(`Cannot download "${_.protocol||"https:"}//${_.hostname}${_.path}", status ${$.statusCode}: ${$.statusMessage}`));return}$.on("error",T.callback);const L=C($,"location");if(L!=null){y<this.maxRedirects?this.doDownload(p.prepareRedirectUrlOptions(L,_),T,y++):T.callback(this.createMaxRedirectError());return}T.responseHandler==null?O(T,$):T.responseHandler($,T.callback)});this.addErrorAndTimeoutHandlers(q,T.callback,_.timeout),this.addRedirectHandlers(q,_,T.callback,y,$=>{this.doDownload($,T,y++)}),q.end()}createMaxRedirectError(){return new Error(`Too many redirects (> ${this.maxRedirects})`)}addTimeOutHandler(_,T,y){_.on("socket",q=>{q.setTimeout(y,()=>{_.abort(),T(new Error("Request timed out"))})})}static prepareRedirectUrlOptions(_,T){const y=g(_,{...T}),q=y.headers;if(q!=null&&q.authorization){const $=new c.URL(_);($.hostname.endsWith(".amazonaws.com")||$.searchParams.has("X-Amz-Credential"))&&delete q.authorization}return y}static retryOnServerError(_,T=3){for(let y=0;;y++)try{return _()}catch(q){if(y<T&&(q instanceof a&&q.isServerError()||q.code==="EPIPE"))continue;throw q}}}He.HttpExecutor=p;function g(R,_){const T=I(_);return E(new c.URL(R),T),T}function E(R,_){_.protocol=R.protocol,_.hostname=R.hostname,R.port?_.port=R.port:_.port&&delete _.port,_.path=R.pathname+R.search}class m extends f.Transform{get actual(){return this._actual}constructor(_,T="sha512",y="base64"){super(),this.expected=_,this.algorithm=T,this.encoding=y,this._actual=null,this.isValidateOnEnd=!0,this.digester=(0,t.createHash)(T)}_transform(_,T,y){this.digester.update(_),y(null,_)}_flush(_){if(this._actual=this.digester.digest(this.encoding),this.isValidateOnEnd)try{this.validate()}catch(T){_(T);return}_(null)}validate(){if(this._actual==null)throw(0,o.newError)("Not finished yet","ERR_STREAM_NOT_FINISHED");if(this._actual!==this.expected)throw(0,o.newError)(`${this.algorithm} checksum mismatch, expected ${this.expected}, got ${this._actual}`,"ERR_CHECKSUM_MISMATCH");return null}}He.DigestTransform=m;function A(R,_,T){return R!=null&&_!=null&&R!==_?(T(new Error(`checksum mismatch: expected ${_} but got ${R} (X-Checksum-Sha2 header)`)),!1):!0}function C(R,_){const T=R.headers[_];return T==null?null:Array.isArray(T)?T.length===0?null:T[T.length-1]:T}function O(R,_){if(!A(C(_,"X-Checksum-Sha2"),R.options.sha2,R.callback))return;const T=[];if(R.options.onProgress!=null){const L=C(_,"content-length");L!=null&&T.push(new d.ProgressCallbackTransform(parseInt(L,10),R.options.cancellationToken,R.options.onProgress))}const y=R.options.sha512;y!=null?T.push(new m(y,"sha512",y.length===128&&!y.includes("+")&&!y.includes("Z")&&!y.includes("=")?"hex":"base64")):R.options.sha2!=null&&T.push(new m(R.options.sha2,"sha256","hex"));const q=(0,h.createWriteStream)(R.destination);T.push(q);let $=_;for(const L of T)L.on("error",k=>{q.close(),R.options.cancellationToken.cancelled||R.callback(k)}),$=$.pipe(L);q.on("finish",()=>{q.close(R.callback)})}function I(R,_,T){T!=null&&(R.method=T),R.headers={...R.headers};const y=R.headers;return _!=null&&(y.authorization=_.startsWith("Basic")||_.startsWith("Bearer")?_:`token ${_}`),y["User-Agent"]==null&&(y["User-Agent"]="electron-builder"),(T==null||T==="GET"||y["Cache-Control"]==null)&&(y["Cache-Control"]="no-cache"),R.protocol==null&&process.versions.electron!=null&&(R.protocol="https:"),R}function j(R,_){return JSON.stringify(R,(T,y)=>T.endsWith("Authorization")||T.endsWith("authorization")||T.endsWith("Password")||T.endsWith("PASSWORD")||T.endsWith("Token")||T.includes("password")||T.includes("token")||_!=null&&_.has(T)?"<stripped sensitive data>":y,2)}return He}var Ht={},Oo;function uc(){if(Oo)return Ht;Oo=1,Object.defineProperty(Ht,"__esModule",{value:!0}),Ht.githubUrl=t,Ht.getS3LikeProviderBaseUrl=u;function t(s,o="github.com"){return`${s.protocol||"https"}://${s.host||o}`}function u(s){const o=s.provider;if(o==="s3")return h(s);if(o==="spaces")return c(s);throw new Error(`Not supported provider: ${o}`)}function h(s){let o;if(s.accelerate==!0)o=`https://${s.bucket}.s3-accelerate.amazonaws.com`;else if(s.endpoint!=null)o=`${s.endpoint}/${s.bucket}`;else if(s.bucket.includes(".")){if(s.region==null)throw new Error(`Bucket name "${s.bucket}" includes a dot, but S3 region is missing`);s.region==="us-east-1"?o=`https://s3.amazonaws.com/${s.bucket}`:o=`https://s3-${s.region}.amazonaws.com/${s.bucket}`}else s.region==="cn-north-1"?o=`https://${s.bucket}.s3.${s.region}.amazonaws.com.cn`:o=`https://${s.bucket}.s3.amazonaws.com`;return f(o,s.path)}function f(s,o){return o!=null&&o.length>0&&(o.startsWith("/")||(s+="/"),s+=o),s}function c(s){if(s.name==null)throw new Error("name is missing");if(s.region==null)throw new Error("region is missing");return f(`https://${s.name}.${s.region}.digitaloceanspaces.com`,s.path)}return Ht}var Cr={},Io;function cc(){if(Io)return Cr;Io=1,Object.defineProperty(Cr,"__esModule",{value:!0}),Cr.parseDn=t;function t(u){let h=!1,f=null,c="",s=0;u=u.trim();const o=new Map;for(let d=0;d<=u.length;d++){if(d===u.length){f!==null&&o.set(f,c);break}const n=u[d];if(h){if(n==='"'){h=!1;continue}}else{if(n==='"'){h=!0;continue}if(n==="\\"){d++;const l=parseInt(u.slice(d,d+2),16);Number.isNaN(l)?c+=u[d]:(d++,c+=String.fromCharCode(l));continue}if(f===null&&n==="="){f=c,c="";continue}if(n===","||n===";"||n==="+"){f!==null&&o.set(f,c),f=null,c="";continue}}if(n===" "&&!h){if(c.length===0)continue;if(d>s){let l=d;for(;u[l]===" ";)l++;s=l}if(s>=u.length||u[s]===","||u[s]===";"||f===null&&u[s]==="="||f!==null&&u[s]==="+"){d=s-1;continue}}c+=n}return o}return Cr}var At={},Po;function fc(){if(Po)return At;Po=1,Object.defineProperty(At,"__esModule",{value:!0}),At.nil=At.UUID=void 0;const t=ur,u=Lr(),h="options.name must be either a string or a Buffer",f=(0,t.randomBytes)(16);f[0]=f[0]|1;const c={},s=[];for(let a=0;a<256;a++){const r=(a+256).toString(16).substr(1);c[r]=a,s[a]=r}class o{constructor(r){this.ascii=null,this.binary=null;const p=o.check(r);if(!p)throw new Error("not a UUID");this.version=p.version,p.format==="ascii"?this.ascii=r:this.binary=r}static v5(r,p){return l(r,"sha1",80,p)}toString(){return this.ascii==null&&(this.ascii=i(this.binary)),this.ascii}inspect(){return`UUID v${this.version} ${this.toString()}`}static check(r,p=0){if(typeof r=="string")return r=r.toLowerCase(),/^[a-f0-9]{8}(-[a-f0-9]{4}){3}-([a-f0-9]{12})$/.test(r)?r==="00000000-0000-0000-0000-000000000000"?{version:void 0,variant:"nil",format:"ascii"}:{version:(c[r[14]+r[15]]&240)>>4,variant:d((c[r[19]+r[20]]&224)>>5),format:"ascii"}:!1;if(Buffer.isBuffer(r)){if(r.length<p+16)return!1;let g=0;for(;g<16&&r[p+g]===0;g++);return g===16?{version:void 0,variant:"nil",format:"binary"}:{version:(r[p+6]&240)>>4,variant:d((r[p+8]&224)>>5),format:"binary"}}throw(0,u.newError)("Unknown type of uuid","ERR_UNKNOWN_UUID_TYPE")}static parse(r){const p=Buffer.allocUnsafe(16);let g=0;for(let E=0;E<16;E++)p[E]=c[r[g++]+r[g++]],(E===3||E===5||E===7||E===9)&&(g+=1);return p}}At.UUID=o,o.OID=o.parse("6ba7b812-9dad-11d1-80b4-00c04fd430c8");function d(a){switch(a){case 0:case 1:case 3:return"ncs";case 4:case 5:return"rfc4122";case 6:return"microsoft";default:return"future"}}var n;(function(a){a[a.ASCII=0]="ASCII",a[a.BINARY=1]="BINARY",a[a.OBJECT=2]="OBJECT"})(n||(n={}));function l(a,r,p,g,E=n.ASCII){const m=(0,t.createHash)(r);if(typeof a!="string"&&!Buffer.isBuffer(a))throw(0,u.newError)(h,"ERR_INVALID_UUID_NAME");m.update(g),m.update(a);const C=m.digest();let O;switch(E){case n.BINARY:C[6]=C[6]&15|p,C[8]=C[8]&63|128,O=C;break;case n.OBJECT:C[6]=C[6]&15|p,C[8]=C[8]&63|128,O=new o(C);break;default:O=s[C[0]]+s[C[1]]+s[C[2]]+s[C[3]]+"-"+s[C[4]]+s[C[5]]+"-"+s[C[6]&15|p]+s[C[7]]+"-"+s[C[8]&63|128]+s[C[9]]+"-"+s[C[10]]+s[C[11]]+s[C[12]]+s[C[13]]+s[C[14]]+s[C[15]];break}return O}function i(a){return s[a[0]]+s[a[1]]+s[a[2]]+s[a[3]]+"-"+s[a[4]]+s[a[5]]+"-"+s[a[6]]+s[a[7]]+"-"+s[a[8]]+s[a[9]]+"-"+s[a[10]]+s[a[11]]+s[a[12]]+s[a[13]]+s[a[14]]+s[a[15]]}return At.nil=new o("00000000-0000-0000-0000-000000000000"),At}var Pt={},zr={},Do;function dc(){return Do||(Do=1,function(t){(function(u){u.parser=function(S,v){return new f(S,v)},u.SAXParser=f,u.SAXStream=i,u.createStream=l,u.MAX_BUFFER_LENGTH=64*1024;var h=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];u.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function f(S,v){if(!(this instanceof f))return new f(S,v);var B=this;s(B),B.q=B.c="",B.bufferCheckPosition=u.MAX_BUFFER_LENGTH,B.opt=v||{},B.opt.lowercase=B.opt.lowercase||B.opt.lowercasetags,B.looseCase=B.opt.lowercase?"toLowerCase":"toUpperCase",B.tags=[],B.closed=B.closedRoot=B.sawRoot=!1,B.tag=B.error=null,B.strict=!!S,B.noscript=!!(S||B.opt.noscript),B.state=y.BEGIN,B.strictEntities=B.opt.strictEntities,B.ENTITIES=B.strictEntities?Object.create(u.XML_ENTITIES):Object.create(u.ENTITIES),B.attribList=[],B.opt.xmlns&&(B.ns=Object.create(E)),B.opt.unquotedAttributeValues===void 0&&(B.opt.unquotedAttributeValues=!S),B.trackPosition=B.opt.position!==!1,B.trackPosition&&(B.position=B.line=B.column=0),$(B,"onready")}Object.create||(Object.create=function(S){function v(){}v.prototype=S;var B=new v;return B}),Object.keys||(Object.keys=function(S){var v=[];for(var B in S)S.hasOwnProperty(B)&&v.push(B);return v});function c(S){for(var v=Math.max(u.MAX_BUFFER_LENGTH,10),B=0,N=0,le=h.length;N<le;N++){var me=S[h[N]].length;if(me>v)switch(h[N]){case"textNode":k(S);break;case"cdata":L(S,"oncdata",S.cdata),S.cdata="";break;case"script":L(S,"onscript",S.script),S.script="";break;default:P(S,"Max buffer length exceeded: "+h[N])}B=Math.max(B,me)}var pe=u.MAX_BUFFER_LENGTH-B;S.bufferCheckPosition=pe+S.position}function s(S){for(var v=0,B=h.length;v<B;v++)S[h[v]]=""}function o(S){k(S),S.cdata!==""&&(L(S,"oncdata",S.cdata),S.cdata=""),S.script!==""&&(L(S,"onscript",S.script),S.script="")}f.prototype={end:function(){F(this)},write:Ee,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){o(this)}};var d;try{d=require("stream").Stream}catch{d=function(){}}d||(d=function(){});var n=u.EVENTS.filter(function(S){return S!=="error"&&S!=="end"});function l(S,v){return new i(S,v)}function i(S,v){if(!(this instanceof i))return new i(S,v);d.apply(this),this._parser=new f(S,v),this.writable=!0,this.readable=!0;var B=this;this._parser.onend=function(){B.emit("end")},this._parser.onerror=function(N){B.emit("error",N),B._parser.error=null},this._decoder=null,n.forEach(function(N){Object.defineProperty(B,"on"+N,{get:function(){return B._parser["on"+N]},set:function(le){if(!le)return B.removeAllListeners(N),B._parser["on"+N]=le,le;B.on(N,le)},enumerable:!0,configurable:!1})})}i.prototype=Object.create(d.prototype,{constructor:{value:i}}),i.prototype.write=function(S){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(S)){if(!this._decoder){var v=zu.StringDecoder;this._decoder=new v("utf8")}S=this._decoder.write(S)}return this._parser.write(S.toString()),this.emit("data",S),!0},i.prototype.end=function(S){return S&&S.length&&this.write(S),this._parser.end(),!0},i.prototype.on=function(S,v){var B=this;return!B._parser["on"+S]&&n.indexOf(S)!==-1&&(B._parser["on"+S]=function(){var N=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);N.splice(0,0,S),B.emit.apply(B,N)}),d.prototype.on.call(B,S,v)};var a="[CDATA[",r="DOCTYPE",p="http://www.w3.org/XML/1998/namespace",g="http://www.w3.org/2000/xmlns/",E={xml:p,xmlns:g},m=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,A=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,C=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,O=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function I(S){return S===" "||S===`
`||S==="\r"||S==="	"}function j(S){return S==='"'||S==="'"}function R(S){return S===">"||I(S)}function _(S,v){return S.test(v)}function T(S,v){return!_(S,v)}var y=0;u.STATE={BEGIN:y++,BEGIN_WHITESPACE:y++,TEXT:y++,TEXT_ENTITY:y++,OPEN_WAKA:y++,SGML_DECL:y++,SGML_DECL_QUOTED:y++,DOCTYPE:y++,DOCTYPE_QUOTED:y++,DOCTYPE_DTD:y++,DOCTYPE_DTD_QUOTED:y++,COMMENT_STARTING:y++,COMMENT:y++,COMMENT_ENDING:y++,COMMENT_ENDED:y++,CDATA:y++,CDATA_ENDING:y++,CDATA_ENDING_2:y++,PROC_INST:y++,PROC_INST_BODY:y++,PROC_INST_ENDING:y++,OPEN_TAG:y++,OPEN_TAG_SLASH:y++,ATTRIB:y++,ATTRIB_NAME:y++,ATTRIB_NAME_SAW_WHITE:y++,ATTRIB_VALUE:y++,ATTRIB_VALUE_QUOTED:y++,ATTRIB_VALUE_CLOSED:y++,ATTRIB_VALUE_UNQUOTED:y++,ATTRIB_VALUE_ENTITY_Q:y++,ATTRIB_VALUE_ENTITY_U:y++,CLOSE_TAG:y++,CLOSE_TAG_SAW_WHITE:y++,SCRIPT:y++,SCRIPT_ENDING:y++},u.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},u.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(u.ENTITIES).forEach(function(S){var v=u.ENTITIES[S],B=typeof v=="number"?String.fromCharCode(v):v;u.ENTITIES[S]=B});for(var q in u.STATE)u.STATE[u.STATE[q]]=q;y=u.STATE;function $(S,v,B){S[v]&&S[v](B)}function L(S,v,B){S.textNode&&k(S),$(S,v,B)}function k(S){S.textNode=D(S.opt,S.textNode),S.textNode&&$(S,"ontext",S.textNode),S.textNode=""}function D(S,v){return S.trim&&(v=v.trim()),S.normalize&&(v=v.replace(/\s+/g," ")),v}function P(S,v){return k(S),S.trackPosition&&(v+=`
Line: `+S.line+`
Column: `+S.column+`
Char: `+S.c),v=new Error(v),S.error=v,$(S,"onerror",v),S}function F(S){return S.sawRoot&&!S.closedRoot&&U(S,"Unclosed root tag"),S.state!==y.BEGIN&&S.state!==y.BEGIN_WHITESPACE&&S.state!==y.TEXT&&P(S,"Unexpected end"),k(S),S.c="",S.closed=!0,$(S,"onend"),f.call(S,S.strict,S.opt),S}function U(S,v){if(typeof S!="object"||!(S instanceof f))throw new Error("bad call to strictFail");S.strict&&P(S,v)}function J(S){S.strict||(S.tagName=S.tagName[S.looseCase]());var v=S.tags[S.tags.length-1]||S,B=S.tag={name:S.tagName,attributes:{}};S.opt.xmlns&&(B.ns=v.ns),S.attribList.length=0,L(S,"onopentagstart",B)}function V(S,v){var B=S.indexOf(":"),N=B<0?["",S]:S.split(":"),le=N[0],me=N[1];return v&&S==="xmlns"&&(le="xmlns",me=""),{prefix:le,local:me}}function ne(S){if(S.strict||(S.attribName=S.attribName[S.looseCase]()),S.attribList.indexOf(S.attribName)!==-1||S.tag.attributes.hasOwnProperty(S.attribName)){S.attribName=S.attribValue="";return}if(S.opt.xmlns){var v=V(S.attribName,!0),B=v.prefix,N=v.local;if(B==="xmlns")if(N==="xml"&&S.attribValue!==p)U(S,"xml: prefix must be bound to "+p+`
Actual: `+S.attribValue);else if(N==="xmlns"&&S.attribValue!==g)U(S,"xmlns: prefix must be bound to "+g+`
Actual: `+S.attribValue);else{var le=S.tag,me=S.tags[S.tags.length-1]||S;le.ns===me.ns&&(le.ns=Object.create(me.ns)),le.ns[N]=S.attribValue}S.attribList.push([S.attribName,S.attribValue])}else S.tag.attributes[S.attribName]=S.attribValue,L(S,"onattribute",{name:S.attribName,value:S.attribValue});S.attribName=S.attribValue=""}function ce(S,v){if(S.opt.xmlns){var B=S.tag,N=V(S.tagName);B.prefix=N.prefix,B.local=N.local,B.uri=B.ns[N.prefix]||"",B.prefix&&!B.uri&&(U(S,"Unbound namespace prefix: "+JSON.stringify(S.tagName)),B.uri=N.prefix);var le=S.tags[S.tags.length-1]||S;B.ns&&le.ns!==B.ns&&Object.keys(B.ns).forEach(function(M){L(S,"onopennamespace",{prefix:M,uri:B.ns[M]})});for(var me=0,pe=S.attribList.length;me<pe;me++){var _e=S.attribList[me],ye=_e[0],Le=_e[1],be=V(ye,!0),Me=be.prefix,gt=be.local,at=Me===""?"":B.ns[Me]||"",e={name:ye,value:Le,prefix:Me,local:gt,uri:at};Me&&Me!=="xmlns"&&!at&&(U(S,"Unbound namespace prefix: "+JSON.stringify(Me)),e.uri=Me),S.tag.attributes[ye]=e,L(S,"onattribute",e)}S.attribList.length=0}S.tag.isSelfClosing=!!v,S.sawRoot=!0,S.tags.push(S.tag),L(S,"onopentag",S.tag),v||(!S.noscript&&S.tagName.toLowerCase()==="script"?S.state=y.SCRIPT:S.state=y.TEXT,S.tag=null,S.tagName=""),S.attribName=S.attribValue="",S.attribList.length=0}function ue(S){if(!S.tagName){U(S,"Weird empty close tag."),S.textNode+="</>",S.state=y.TEXT;return}if(S.script){if(S.tagName!=="script"){S.script+="</"+S.tagName+">",S.tagName="",S.state=y.SCRIPT;return}L(S,"onscript",S.script),S.script=""}var v=S.tags.length,B=S.tagName;S.strict||(B=B[S.looseCase]());for(var N=B;v--;){var le=S.tags[v];if(le.name!==N)U(S,"Unexpected close tag");else break}if(v<0){U(S,"Unmatched closing tag: "+S.tagName),S.textNode+="</"+S.tagName+">",S.state=y.TEXT;return}S.tagName=B;for(var me=S.tags.length;me-- >v;){var pe=S.tag=S.tags.pop();S.tagName=S.tag.name,L(S,"onclosetag",S.tagName);var _e={};for(var ye in pe.ns)_e[ye]=pe.ns[ye];var Le=S.tags[S.tags.length-1]||S;S.opt.xmlns&&pe.ns!==Le.ns&&Object.keys(pe.ns).forEach(function(be){var Me=pe.ns[be];L(S,"onclosenamespace",{prefix:be,uri:Me})})}v===0&&(S.closedRoot=!0),S.tagName=S.attribValue=S.attribName="",S.attribList.length=0,S.state=y.TEXT}function ae(S){var v=S.entity,B=v.toLowerCase(),N,le="";return S.ENTITIES[v]?S.ENTITIES[v]:S.ENTITIES[B]?S.ENTITIES[B]:(v=B,v.charAt(0)==="#"&&(v.charAt(1)==="x"?(v=v.slice(2),N=parseInt(v,16),le=N.toString(16)):(v=v.slice(1),N=parseInt(v,10),le=N.toString(10))),v=v.replace(/^0+/,""),isNaN(N)||le.toLowerCase()!==v?(U(S,"Invalid character entity"),"&"+S.entity+";"):String.fromCodePoint(N))}function Ae(S,v){v==="<"?(S.state=y.OPEN_WAKA,S.startTagPosition=S.position):I(v)||(U(S,"Non-whitespace before first tag."),S.textNode=v,S.state=y.TEXT)}function K(S,v){var B="";return v<S.length&&(B=S.charAt(v)),B}function Ee(S){var v=this;if(this.error)throw this.error;if(v.closed)return P(v,"Cannot write after close. Assign an onready handler.");if(S===null)return F(v);typeof S=="object"&&(S=S.toString());for(var B=0,N="";N=K(S,B++),v.c=N,!!N;)switch(v.trackPosition&&(v.position++,N===`
`?(v.line++,v.column=0):v.column++),v.state){case y.BEGIN:if(v.state=y.BEGIN_WHITESPACE,N==="\uFEFF")continue;Ae(v,N);continue;case y.BEGIN_WHITESPACE:Ae(v,N);continue;case y.TEXT:if(v.sawRoot&&!v.closedRoot){for(var le=B-1;N&&N!=="<"&&N!=="&";)N=K(S,B++),N&&v.trackPosition&&(v.position++,N===`
`?(v.line++,v.column=0):v.column++);v.textNode+=S.substring(le,B-1)}N==="<"&&!(v.sawRoot&&v.closedRoot&&!v.strict)?(v.state=y.OPEN_WAKA,v.startTagPosition=v.position):(!I(N)&&(!v.sawRoot||v.closedRoot)&&U(v,"Text data outside of root node."),N==="&"?v.state=y.TEXT_ENTITY:v.textNode+=N);continue;case y.SCRIPT:N==="<"?v.state=y.SCRIPT_ENDING:v.script+=N;continue;case y.SCRIPT_ENDING:N==="/"?v.state=y.CLOSE_TAG:(v.script+="<"+N,v.state=y.SCRIPT);continue;case y.OPEN_WAKA:if(N==="!")v.state=y.SGML_DECL,v.sgmlDecl="";else if(!I(N))if(_(m,N))v.state=y.OPEN_TAG,v.tagName=N;else if(N==="/")v.state=y.CLOSE_TAG,v.tagName="";else if(N==="?")v.state=y.PROC_INST,v.procInstName=v.procInstBody="";else{if(U(v,"Unencoded <"),v.startTagPosition+1<v.position){var me=v.position-v.startTagPosition;N=new Array(me).join(" ")+N}v.textNode+="<"+N,v.state=y.TEXT}continue;case y.SGML_DECL:if(v.sgmlDecl+N==="--"){v.state=y.COMMENT,v.comment="",v.sgmlDecl="";continue}v.doctype&&v.doctype!==!0&&v.sgmlDecl?(v.state=y.DOCTYPE_DTD,v.doctype+="<!"+v.sgmlDecl+N,v.sgmlDecl=""):(v.sgmlDecl+N).toUpperCase()===a?(L(v,"onopencdata"),v.state=y.CDATA,v.sgmlDecl="",v.cdata=""):(v.sgmlDecl+N).toUpperCase()===r?(v.state=y.DOCTYPE,(v.doctype||v.sawRoot)&&U(v,"Inappropriately located doctype declaration"),v.doctype="",v.sgmlDecl=""):N===">"?(L(v,"onsgmldeclaration",v.sgmlDecl),v.sgmlDecl="",v.state=y.TEXT):(j(N)&&(v.state=y.SGML_DECL_QUOTED),v.sgmlDecl+=N);continue;case y.SGML_DECL_QUOTED:N===v.q&&(v.state=y.SGML_DECL,v.q=""),v.sgmlDecl+=N;continue;case y.DOCTYPE:N===">"?(v.state=y.TEXT,L(v,"ondoctype",v.doctype),v.doctype=!0):(v.doctype+=N,N==="["?v.state=y.DOCTYPE_DTD:j(N)&&(v.state=y.DOCTYPE_QUOTED,v.q=N));continue;case y.DOCTYPE_QUOTED:v.doctype+=N,N===v.q&&(v.q="",v.state=y.DOCTYPE);continue;case y.DOCTYPE_DTD:N==="]"?(v.doctype+=N,v.state=y.DOCTYPE):N==="<"?(v.state=y.OPEN_WAKA,v.startTagPosition=v.position):j(N)?(v.doctype+=N,v.state=y.DOCTYPE_DTD_QUOTED,v.q=N):v.doctype+=N;continue;case y.DOCTYPE_DTD_QUOTED:v.doctype+=N,N===v.q&&(v.state=y.DOCTYPE_DTD,v.q="");continue;case y.COMMENT:N==="-"?v.state=y.COMMENT_ENDING:v.comment+=N;continue;case y.COMMENT_ENDING:N==="-"?(v.state=y.COMMENT_ENDED,v.comment=D(v.opt,v.comment),v.comment&&L(v,"oncomment",v.comment),v.comment=""):(v.comment+="-"+N,v.state=y.COMMENT);continue;case y.COMMENT_ENDED:N!==">"?(U(v,"Malformed comment"),v.comment+="--"+N,v.state=y.COMMENT):v.doctype&&v.doctype!==!0?v.state=y.DOCTYPE_DTD:v.state=y.TEXT;continue;case y.CDATA:N==="]"?v.state=y.CDATA_ENDING:v.cdata+=N;continue;case y.CDATA_ENDING:N==="]"?v.state=y.CDATA_ENDING_2:(v.cdata+="]"+N,v.state=y.CDATA);continue;case y.CDATA_ENDING_2:N===">"?(v.cdata&&L(v,"oncdata",v.cdata),L(v,"onclosecdata"),v.cdata="",v.state=y.TEXT):N==="]"?v.cdata+="]":(v.cdata+="]]"+N,v.state=y.CDATA);continue;case y.PROC_INST:N==="?"?v.state=y.PROC_INST_ENDING:I(N)?v.state=y.PROC_INST_BODY:v.procInstName+=N;continue;case y.PROC_INST_BODY:if(!v.procInstBody&&I(N))continue;N==="?"?v.state=y.PROC_INST_ENDING:v.procInstBody+=N;continue;case y.PROC_INST_ENDING:N===">"?(L(v,"onprocessinginstruction",{name:v.procInstName,body:v.procInstBody}),v.procInstName=v.procInstBody="",v.state=y.TEXT):(v.procInstBody+="?"+N,v.state=y.PROC_INST_BODY);continue;case y.OPEN_TAG:_(A,N)?v.tagName+=N:(J(v),N===">"?ce(v):N==="/"?v.state=y.OPEN_TAG_SLASH:(I(N)||U(v,"Invalid character in tag name"),v.state=y.ATTRIB));continue;case y.OPEN_TAG_SLASH:N===">"?(ce(v,!0),ue(v)):(U(v,"Forward-slash in opening tag not followed by >"),v.state=y.ATTRIB);continue;case y.ATTRIB:if(I(N))continue;N===">"?ce(v):N==="/"?v.state=y.OPEN_TAG_SLASH:_(m,N)?(v.attribName=N,v.attribValue="",v.state=y.ATTRIB_NAME):U(v,"Invalid attribute name");continue;case y.ATTRIB_NAME:N==="="?v.state=y.ATTRIB_VALUE:N===">"?(U(v,"Attribute without value"),v.attribValue=v.attribName,ne(v),ce(v)):I(N)?v.state=y.ATTRIB_NAME_SAW_WHITE:_(A,N)?v.attribName+=N:U(v,"Invalid attribute name");continue;case y.ATTRIB_NAME_SAW_WHITE:if(N==="=")v.state=y.ATTRIB_VALUE;else{if(I(N))continue;U(v,"Attribute without value"),v.tag.attributes[v.attribName]="",v.attribValue="",L(v,"onattribute",{name:v.attribName,value:""}),v.attribName="",N===">"?ce(v):_(m,N)?(v.attribName=N,v.state=y.ATTRIB_NAME):(U(v,"Invalid attribute name"),v.state=y.ATTRIB)}continue;case y.ATTRIB_VALUE:if(I(N))continue;j(N)?(v.q=N,v.state=y.ATTRIB_VALUE_QUOTED):(v.opt.unquotedAttributeValues||P(v,"Unquoted attribute value"),v.state=y.ATTRIB_VALUE_UNQUOTED,v.attribValue=N);continue;case y.ATTRIB_VALUE_QUOTED:if(N!==v.q){N==="&"?v.state=y.ATTRIB_VALUE_ENTITY_Q:v.attribValue+=N;continue}ne(v),v.q="",v.state=y.ATTRIB_VALUE_CLOSED;continue;case y.ATTRIB_VALUE_CLOSED:I(N)?v.state=y.ATTRIB:N===">"?ce(v):N==="/"?v.state=y.OPEN_TAG_SLASH:_(m,N)?(U(v,"No whitespace between attributes"),v.attribName=N,v.attribValue="",v.state=y.ATTRIB_NAME):U(v,"Invalid attribute name");continue;case y.ATTRIB_VALUE_UNQUOTED:if(!R(N)){N==="&"?v.state=y.ATTRIB_VALUE_ENTITY_U:v.attribValue+=N;continue}ne(v),N===">"?ce(v):v.state=y.ATTRIB;continue;case y.CLOSE_TAG:if(v.tagName)N===">"?ue(v):_(A,N)?v.tagName+=N:v.script?(v.script+="</"+v.tagName,v.tagName="",v.state=y.SCRIPT):(I(N)||U(v,"Invalid tagname in closing tag"),v.state=y.CLOSE_TAG_SAW_WHITE);else{if(I(N))continue;T(m,N)?v.script?(v.script+="</"+N,v.state=y.SCRIPT):U(v,"Invalid tagname in closing tag."):v.tagName=N}continue;case y.CLOSE_TAG_SAW_WHITE:if(I(N))continue;N===">"?ue(v):U(v,"Invalid characters in closing tag");continue;case y.TEXT_ENTITY:case y.ATTRIB_VALUE_ENTITY_Q:case y.ATTRIB_VALUE_ENTITY_U:var pe,_e;switch(v.state){case y.TEXT_ENTITY:pe=y.TEXT,_e="textNode";break;case y.ATTRIB_VALUE_ENTITY_Q:pe=y.ATTRIB_VALUE_QUOTED,_e="attribValue";break;case y.ATTRIB_VALUE_ENTITY_U:pe=y.ATTRIB_VALUE_UNQUOTED,_e="attribValue";break}if(N===";"){var ye=ae(v);v.opt.unparsedEntities&&!Object.values(u.XML_ENTITIES).includes(ye)?(v.entity="",v.state=pe,v.write(ye)):(v[_e]+=ye,v.entity="",v.state=pe)}else _(v.entity.length?O:C,N)?v.entity+=N:(U(v,"Invalid character in entity name"),v[_e]+="&"+v.entity+N,v.entity="",v.state=pe);continue;default:throw new Error(v,"Unknown state: "+v.state)}return v.position>=v.bufferCheckPosition&&c(v),v}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */String.fromCodePoint||function(){var S=String.fromCharCode,v=Math.floor,B=function(){var N=16384,le=[],me,pe,_e=-1,ye=arguments.length;if(!ye)return"";for(var Le="";++_e<ye;){var be=Number(arguments[_e]);if(!isFinite(be)||be<0||be>1114111||v(be)!==be)throw RangeError("Invalid code point: "+be);be<=65535?le.push(be):(be-=65536,me=(be>>10)+55296,pe=be%1024+56320,le.push(me,pe)),(_e+1===ye||le.length>N)&&(Le+=S.apply(null,le),le.length=0)}return Le};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:B,configurable:!0,writable:!0}):String.fromCodePoint=B}()})(t)}(zr)),zr}var No;function hc(){if(No)return Pt;No=1,Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.XElement=void 0,Pt.parseXml=o;const t=dc(),u=Lr();class h{constructor(n){if(this.name=n,this.value="",this.attributes=null,this.isCData=!1,this.elements=null,!n)throw(0,u.newError)("Element name cannot be empty","ERR_XML_ELEMENT_NAME_EMPTY");if(!c(n))throw(0,u.newError)(`Invalid element name: ${n}`,"ERR_XML_ELEMENT_INVALID_NAME")}attribute(n){const l=this.attributes===null?null:this.attributes[n];if(l==null)throw(0,u.newError)(`No attribute "${n}"`,"ERR_XML_MISSED_ATTRIBUTE");return l}removeAttribute(n){this.attributes!==null&&delete this.attributes[n]}element(n,l=!1,i=null){const a=this.elementOrNull(n,l);if(a===null)throw(0,u.newError)(i||`No element "${n}"`,"ERR_XML_MISSED_ELEMENT");return a}elementOrNull(n,l=!1){if(this.elements===null)return null;for(const i of this.elements)if(s(i,n,l))return i;return null}getElements(n,l=!1){return this.elements===null?[]:this.elements.filter(i=>s(i,n,l))}elementValueOrEmpty(n,l=!1){const i=this.elementOrNull(n,l);return i===null?"":i.value}}Pt.XElement=h;const f=new RegExp(/^[A-Za-z_][:A-Za-z0-9_-]*$/i);function c(d){return f.test(d)}function s(d,n,l){const i=d.name;return i===n||l===!0&&i.length===n.length&&i.toLowerCase()===n.toLowerCase()}function o(d){let n=null;const l=t.parser(!0,{}),i=[];return l.onopentag=a=>{const r=new h(a.name);if(r.attributes=a.attributes,n===null)n=r;else{const p=i[i.length-1];p.elements==null&&(p.elements=[]),p.elements.push(r)}i.push(r)},l.onclosetag=()=>{i.pop()},l.ontext=a=>{i.length>0&&(i[i.length-1].value=a)},l.oncdata=a=>{const r=i[i.length-1];r.value=a,r.isCData=!0},l.onerror=a=>{throw a},l.write(d),n}return Pt}var jt={},Fo;function pc(){if(Fo)return jt;Fo=1,Object.defineProperty(jt,"__esModule",{value:!0}),jt.MemoLazy=void 0;let t=class{constructor(f,c){this.selector=f,this.creator=c,this.selected=void 0,this._value=void 0}get hasValue(){return this._value!==void 0}get value(){const f=this.selector();if(this._value!==void 0&&u(this.selected,f))return this._value;this.selected=f;const c=this.creator(f);return this.value=c,c}set value(f){this._value=f}};jt.MemoLazy=t;function u(h,f){if(typeof h=="object"&&h!==null&&(typeof f=="object"&&f!==null)){const o=Object.keys(h),d=Object.keys(f);return o.length===d.length&&o.every(n=>u(h[n],f[n]))}return h===f}return jt}var xo;function qe(){return xo||(xo=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CURRENT_APP_PACKAGE_FILE_NAME=t.CURRENT_APP_INSTALLER_FILE_NAME=t.MemoLazy=t.newError=t.XElement=t.parseXml=t.ProgressCallbackTransform=t.UUID=t.parseDn=t.githubUrl=t.getS3LikeProviderBaseUrl=t.configureRequestUrl=t.parseJson=t.safeStringifyJson=t.configureRequestOptionsFromUrl=t.configureRequestOptions=t.safeGetHeader=t.DigestTransform=t.HttpExecutor=t.createHttpError=t.HttpError=t.CancellationError=t.CancellationToken=void 0,t.asArray=i;var u=wl();Object.defineProperty(t,"CancellationToken",{enumerable:!0,get:function(){return u.CancellationToken}}),Object.defineProperty(t,"CancellationError",{enumerable:!0,get:function(){return u.CancellationError}});var h=lc();Object.defineProperty(t,"HttpError",{enumerable:!0,get:function(){return h.HttpError}}),Object.defineProperty(t,"createHttpError",{enumerable:!0,get:function(){return h.createHttpError}}),Object.defineProperty(t,"HttpExecutor",{enumerable:!0,get:function(){return h.HttpExecutor}}),Object.defineProperty(t,"DigestTransform",{enumerable:!0,get:function(){return h.DigestTransform}}),Object.defineProperty(t,"safeGetHeader",{enumerable:!0,get:function(){return h.safeGetHeader}}),Object.defineProperty(t,"configureRequestOptions",{enumerable:!0,get:function(){return h.configureRequestOptions}}),Object.defineProperty(t,"configureRequestOptionsFromUrl",{enumerable:!0,get:function(){return h.configureRequestOptionsFromUrl}}),Object.defineProperty(t,"safeStringifyJson",{enumerable:!0,get:function(){return h.safeStringifyJson}}),Object.defineProperty(t,"parseJson",{enumerable:!0,get:function(){return h.parseJson}}),Object.defineProperty(t,"configureRequestUrl",{enumerable:!0,get:function(){return h.configureRequestUrl}});var f=uc();Object.defineProperty(t,"getS3LikeProviderBaseUrl",{enumerable:!0,get:function(){return f.getS3LikeProviderBaseUrl}}),Object.defineProperty(t,"githubUrl",{enumerable:!0,get:function(){return f.githubUrl}});var c=cc();Object.defineProperty(t,"parseDn",{enumerable:!0,get:function(){return c.parseDn}});var s=fc();Object.defineProperty(t,"UUID",{enumerable:!0,get:function(){return s.UUID}});var o=Sl();Object.defineProperty(t,"ProgressCallbackTransform",{enumerable:!0,get:function(){return o.ProgressCallbackTransform}});var d=hc();Object.defineProperty(t,"parseXml",{enumerable:!0,get:function(){return d.parseXml}}),Object.defineProperty(t,"XElement",{enumerable:!0,get:function(){return d.XElement}});var n=Lr();Object.defineProperty(t,"newError",{enumerable:!0,get:function(){return n.newError}});var l=pc();Object.defineProperty(t,"MemoLazy",{enumerable:!0,get:function(){return l.MemoLazy}}),t.CURRENT_APP_INSTALLER_FILE_NAME="installer.exe",t.CURRENT_APP_PACKAGE_FILE_NAME="package.7z";function i(a){return a==null?[]:Array.isArray(a)?a:[a]}}(Vr)),Vr}var Xr={},br={},Lo;function ze(){return Lo||(Lo=1,br.fromCallback=function(t){return Object.defineProperty(function(...u){if(typeof u[u.length-1]=="function")t.apply(this,u);else return new Promise((h,f)=>{u.push((c,s)=>c!=null?f(c):h(s)),t.apply(this,u)})},"name",{value:t.name})},br.fromPromise=function(t){return Object.defineProperty(function(...u){const h=u[u.length-1];if(typeof h!="function")return t.apply(this,u);u.pop(),t.apply(this,u).then(f=>h(null,f),h)},"name",{value:t.name})}),br}var Kr,$o;function mc(){if($o)return Kr;$o=1;var t=Xu,u=process.cwd,h=null,f=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return h||(h=u.call(process)),h};try{process.cwd()}catch{}if(typeof process.chdir=="function"){var c=process.chdir;process.chdir=function(o){h=null,c.call(process,o)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,c)}Kr=s;function s(o){t.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&d(o),o.lutimes||n(o),o.chown=a(o.chown),o.fchown=a(o.fchown),o.lchown=a(o.lchown),o.chmod=l(o.chmod),o.fchmod=l(o.fchmod),o.lchmod=l(o.lchmod),o.chownSync=r(o.chownSync),o.fchownSync=r(o.fchownSync),o.lchownSync=r(o.lchownSync),o.chmodSync=i(o.chmodSync),o.fchmodSync=i(o.fchmodSync),o.lchmodSync=i(o.lchmodSync),o.stat=p(o.stat),o.fstat=p(o.fstat),o.lstat=p(o.lstat),o.statSync=g(o.statSync),o.fstatSync=g(o.fstatSync),o.lstatSync=g(o.lstatSync),o.chmod&&!o.lchmod&&(o.lchmod=function(m,A,C){C&&process.nextTick(C)},o.lchmodSync=function(){}),o.chown&&!o.lchown&&(o.lchown=function(m,A,C,O){O&&process.nextTick(O)},o.lchownSync=function(){}),f==="win32"&&(o.rename=typeof o.rename!="function"?o.rename:function(m){function A(C,O,I){var j=Date.now(),R=0;m(C,O,function _(T){if(T&&(T.code==="EACCES"||T.code==="EPERM"||T.code==="EBUSY")&&Date.now()-j<6e4){setTimeout(function(){o.stat(O,function(y,q){y&&y.code==="ENOENT"?m(C,O,_):I(T)})},R),R<100&&(R+=10);return}I&&I(T)})}return Object.setPrototypeOf&&Object.setPrototypeOf(A,m),A}(o.rename)),o.read=typeof o.read!="function"?o.read:function(m){function A(C,O,I,j,R,_){var T;if(_&&typeof _=="function"){var y=0;T=function(q,$,L){if(q&&q.code==="EAGAIN"&&y<10)return y++,m.call(o,C,O,I,j,R,T);_.apply(this,arguments)}}return m.call(o,C,O,I,j,R,T)}return Object.setPrototypeOf&&Object.setPrototypeOf(A,m),A}(o.read),o.readSync=typeof o.readSync!="function"?o.readSync:function(m){return function(A,C,O,I,j){for(var R=0;;)try{return m.call(o,A,C,O,I,j)}catch(_){if(_.code==="EAGAIN"&&R<10){R++;continue}throw _}}}(o.readSync);function d(m){m.lchmod=function(A,C,O){m.open(A,t.O_WRONLY|t.O_SYMLINK,C,function(I,j){if(I){O&&O(I);return}m.fchmod(j,C,function(R){m.close(j,function(_){O&&O(R||_)})})})},m.lchmodSync=function(A,C){var O=m.openSync(A,t.O_WRONLY|t.O_SYMLINK,C),I=!0,j;try{j=m.fchmodSync(O,C),I=!1}finally{if(I)try{m.closeSync(O)}catch{}else m.closeSync(O)}return j}}function n(m){t.hasOwnProperty("O_SYMLINK")&&m.futimes?(m.lutimes=function(A,C,O,I){m.open(A,t.O_SYMLINK,function(j,R){if(j){I&&I(j);return}m.futimes(R,C,O,function(_){m.close(R,function(T){I&&I(_||T)})})})},m.lutimesSync=function(A,C,O){var I=m.openSync(A,t.O_SYMLINK),j,R=!0;try{j=m.futimesSync(I,C,O),R=!1}finally{if(R)try{m.closeSync(I)}catch{}else m.closeSync(I)}return j}):m.futimes&&(m.lutimes=function(A,C,O,I){I&&process.nextTick(I)},m.lutimesSync=function(){})}function l(m){return m&&function(A,C,O){return m.call(o,A,C,function(I){E(I)&&(I=null),O&&O.apply(this,arguments)})}}function i(m){return m&&function(A,C){try{return m.call(o,A,C)}catch(O){if(!E(O))throw O}}}function a(m){return m&&function(A,C,O,I){return m.call(o,A,C,O,function(j){E(j)&&(j=null),I&&I.apply(this,arguments)})}}function r(m){return m&&function(A,C,O){try{return m.call(o,A,C,O)}catch(I){if(!E(I))throw I}}}function p(m){return m&&function(A,C,O){typeof C=="function"&&(O=C,C=null);function I(j,R){R&&(R.uid<0&&(R.uid+=4294967296),R.gid<0&&(R.gid+=4294967296)),O&&O.apply(this,arguments)}return C?m.call(o,A,C,I):m.call(o,A,I)}}function g(m){return m&&function(A,C){var O=C?m.call(o,A,C):m.call(o,A);return O&&(O.uid<0&&(O.uid+=4294967296),O.gid<0&&(O.gid+=4294967296)),O}}function E(m){if(!m||m.code==="ENOSYS")return!0;var A=!process.getuid||process.getuid()!==0;return!!(A&&(m.code==="EINVAL"||m.code==="EPERM"))}}return Kr}var Jr,Uo;function gc(){if(Uo)return Jr;Uo=1;var t=cr.Stream;Jr=u;function u(h){return{ReadStream:f,WriteStream:c};function f(s,o){if(!(this instanceof f))return new f(s,o);t.call(this);var d=this;this.path=s,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,o=o||{};for(var n=Object.keys(o),l=0,i=n.length;l<i;l++){var a=n[l];this[a]=o[a]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){d._read()});return}h.open(this.path,this.flags,this.mode,function(r,p){if(r){d.emit("error",r),d.readable=!1;return}d.fd=p,d.emit("open",p),d._read()})}function c(s,o){if(!(this instanceof c))return new c(s,o);t.call(this),this.path=s,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,o=o||{};for(var d=Object.keys(o),n=0,l=d.length;n<l;n++){var i=d[n];this[i]=o[i]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=h.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}return Jr}var Qr,ko;function vc(){if(ko)return Qr;ko=1,Qr=u;var t=Object.getPrototypeOf||function(h){return h.__proto__};function u(h){if(h===null||typeof h!="object")return h;if(h instanceof Object)var f={__proto__:t(h)};else var f=Object.create(null);return Object.getOwnPropertyNames(h).forEach(function(c){Object.defineProperty(f,c,Object.getOwnPropertyDescriptor(h,c))}),f}return Qr}var Or,qo;function We(){if(qo)return Or;qo=1;var t=it,u=mc(),h=gc(),f=vc(),c=Gi,s,o;typeof Symbol=="function"&&typeof Symbol.for=="function"?(s=Symbol.for("graceful-fs.queue"),o=Symbol.for("graceful-fs.previous")):(s="___graceful-fs.queue",o="___graceful-fs.previous");function d(){}function n(m,A){Object.defineProperty(m,s,{get:function(){return A}})}var l=d;if(c.debuglog?l=c.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(l=function(){var m=c.format.apply(c,arguments);m="GFS4: "+m.split(/\n/).join(`
GFS4: `),console.error(m)}),!t[s]){var i=et[s]||[];n(t,i),t.close=function(m){function A(C,O){return m.call(t,C,function(I){I||g(),typeof O=="function"&&O.apply(this,arguments)})}return Object.defineProperty(A,o,{value:m}),A}(t.close),t.closeSync=function(m){function A(C){m.apply(t,arguments),g()}return Object.defineProperty(A,o,{value:m}),A}(t.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){l(t[s]),El.equal(t[s].length,0)})}et[s]||n(et,t[s]),Or=a(f(t)),process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!t.__patched&&(Or=a(t),t.__patched=!0);function a(m){u(m),m.gracefulify=a,m.createReadStream=ce,m.createWriteStream=ue;var A=m.readFile;m.readFile=C;function C(K,Ee,S){return typeof Ee=="function"&&(S=Ee,Ee=null),v(K,Ee,S);function v(B,N,le,me){return A(B,N,function(pe){pe&&(pe.code==="EMFILE"||pe.code==="ENFILE")?r([v,[B,N,le],pe,me||Date.now(),Date.now()]):typeof le=="function"&&le.apply(this,arguments)})}}var O=m.writeFile;m.writeFile=I;function I(K,Ee,S,v){return typeof S=="function"&&(v=S,S=null),B(K,Ee,S,v);function B(N,le,me,pe,_e){return O(N,le,me,function(ye){ye&&(ye.code==="EMFILE"||ye.code==="ENFILE")?r([B,[N,le,me,pe],ye,_e||Date.now(),Date.now()]):typeof pe=="function"&&pe.apply(this,arguments)})}}var j=m.appendFile;j&&(m.appendFile=R);function R(K,Ee,S,v){return typeof S=="function"&&(v=S,S=null),B(K,Ee,S,v);function B(N,le,me,pe,_e){return j(N,le,me,function(ye){ye&&(ye.code==="EMFILE"||ye.code==="ENFILE")?r([B,[N,le,me,pe],ye,_e||Date.now(),Date.now()]):typeof pe=="function"&&pe.apply(this,arguments)})}}var _=m.copyFile;_&&(m.copyFile=T);function T(K,Ee,S,v){return typeof S=="function"&&(v=S,S=0),B(K,Ee,S,v);function B(N,le,me,pe,_e){return _(N,le,me,function(ye){ye&&(ye.code==="EMFILE"||ye.code==="ENFILE")?r([B,[N,le,me,pe],ye,_e||Date.now(),Date.now()]):typeof pe=="function"&&pe.apply(this,arguments)})}}var y=m.readdir;m.readdir=$;var q=/^v[0-5]\./;function $(K,Ee,S){typeof Ee=="function"&&(S=Ee,Ee=null);var v=q.test(process.version)?function(le,me,pe,_e){return y(le,B(le,me,pe,_e))}:function(le,me,pe,_e){return y(le,me,B(le,me,pe,_e))};return v(K,Ee,S);function B(N,le,me,pe){return function(_e,ye){_e&&(_e.code==="EMFILE"||_e.code==="ENFILE")?r([v,[N,le,me],_e,pe||Date.now(),Date.now()]):(ye&&ye.sort&&ye.sort(),typeof me=="function"&&me.call(this,_e,ye))}}}if(process.version.substr(0,4)==="v0.8"){var L=h(m);U=L.ReadStream,V=L.WriteStream}var k=m.ReadStream;k&&(U.prototype=Object.create(k.prototype),U.prototype.open=J);var D=m.WriteStream;D&&(V.prototype=Object.create(D.prototype),V.prototype.open=ne),Object.defineProperty(m,"ReadStream",{get:function(){return U},set:function(K){U=K},enumerable:!0,configurable:!0}),Object.defineProperty(m,"WriteStream",{get:function(){return V},set:function(K){V=K},enumerable:!0,configurable:!0});var P=U;Object.defineProperty(m,"FileReadStream",{get:function(){return P},set:function(K){P=K},enumerable:!0,configurable:!0});var F=V;Object.defineProperty(m,"FileWriteStream",{get:function(){return F},set:function(K){F=K},enumerable:!0,configurable:!0});function U(K,Ee){return this instanceof U?(k.apply(this,arguments),this):U.apply(Object.create(U.prototype),arguments)}function J(){var K=this;Ae(K.path,K.flags,K.mode,function(Ee,S){Ee?(K.autoClose&&K.destroy(),K.emit("error",Ee)):(K.fd=S,K.emit("open",S),K.read())})}function V(K,Ee){return this instanceof V?(D.apply(this,arguments),this):V.apply(Object.create(V.prototype),arguments)}function ne(){var K=this;Ae(K.path,K.flags,K.mode,function(Ee,S){Ee?(K.destroy(),K.emit("error",Ee)):(K.fd=S,K.emit("open",S))})}function ce(K,Ee){return new m.ReadStream(K,Ee)}function ue(K,Ee){return new m.WriteStream(K,Ee)}var ae=m.open;m.open=Ae;function Ae(K,Ee,S,v){return typeof S=="function"&&(v=S,S=null),B(K,Ee,S,v);function B(N,le,me,pe,_e){return ae(N,le,me,function(ye,Le){ye&&(ye.code==="EMFILE"||ye.code==="ENFILE")?r([B,[N,le,me,pe],ye,_e||Date.now(),Date.now()]):typeof pe=="function"&&pe.apply(this,arguments)})}}return m}function r(m){l("ENQUEUE",m[0].name,m[1]),t[s].push(m),E()}var p;function g(){for(var m=Date.now(),A=0;A<t[s].length;++A)t[s][A].length>2&&(t[s][A][3]=m,t[s][A][4]=m);E()}function E(){if(clearTimeout(p),p=void 0,t[s].length!==0){var m=t[s].shift(),A=m[0],C=m[1],O=m[2],I=m[3],j=m[4];if(I===void 0)l("RETRY",A.name,C),A.apply(null,C);else if(Date.now()-I>=6e4){l("TIMEOUT",A.name,C);var R=C.pop();typeof R=="function"&&R.call(null,O)}else{var _=Date.now()-j,T=Math.max(j-I,1),y=Math.min(T*1.2,100);_>=y?(l("RETRY",A.name,C),A.apply(null,C.concat([I]))):t[s].push(m)}p===void 0&&(p=setTimeout(E,0))}}return Or}var Mo;function Lt(){return Mo||(Mo=1,function(t){const u=ze().fromCallback,h=We(),f=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(c=>typeof h[c]=="function");Object.assign(t,h),f.forEach(c=>{t[c]=u(h[c])}),t.exists=function(c,s){return typeof s=="function"?h.exists(c,s):new Promise(o=>h.exists(c,o))},t.read=function(c,s,o,d,n,l){return typeof l=="function"?h.read(c,s,o,d,n,l):new Promise((i,a)=>{h.read(c,s,o,d,n,(r,p,g)=>{if(r)return a(r);i({bytesRead:p,buffer:g})})})},t.write=function(c,s,...o){return typeof o[o.length-1]=="function"?h.write(c,s,...o):new Promise((d,n)=>{h.write(c,s,...o,(l,i,a)=>{if(l)return n(l);d({bytesWritten:i,buffer:a})})})},typeof h.writev=="function"&&(t.writev=function(c,s,...o){return typeof o[o.length-1]=="function"?h.writev(c,s,...o):new Promise((d,n)=>{h.writev(c,s,...o,(l,i,a)=>{if(l)return n(l);d({bytesWritten:i,buffers:a})})})}),typeof h.realpath.native=="function"?t.realpath.native=u(h.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")}(Xr)),Xr}var Ir={},Zr={},Bo;function Ec(){if(Bo)return Zr;Bo=1;const t=Re;return Zr.checkPath=function(h){if(process.platform==="win32"&&/[<>:"|?*]/.test(h.replace(t.parse(h).root,""))){const c=new Error(`Path contains invalid characters: ${h}`);throw c.code="EINVAL",c}},Zr}var Ho;function yc(){if(Ho)return Ir;Ho=1;const t=Lt(),{checkPath:u}=Ec(),h=f=>{const c={mode:511};return typeof f=="number"?f:{...c,...f}.mode};return Ir.makeDir=async(f,c)=>(u(f),t.mkdir(f,{mode:h(c),recursive:!0})),Ir.makeDirSync=(f,c)=>(u(f),t.mkdirSync(f,{mode:h(c),recursive:!0})),Ir}var en,jo;function ot(){if(jo)return en;jo=1;const t=ze().fromPromise,{makeDir:u,makeDirSync:h}=yc(),f=t(u);return en={mkdirs:f,mkdirsSync:h,mkdirp:f,mkdirpSync:h,ensureDir:f,ensureDirSync:h},en}var tn,Go;function Ct(){if(Go)return tn;Go=1;const t=ze().fromPromise,u=Lt();function h(f){return u.access(f).then(()=>!0).catch(()=>!1)}return tn={pathExists:t(h),pathExistsSync:u.existsSync},tn}var rn,Vo;function Al(){if(Vo)return rn;Vo=1;const t=We();function u(f,c,s,o){t.open(f,"r+",(d,n)=>{if(d)return o(d);t.futimes(n,c,s,l=>{t.close(n,i=>{o&&o(l||i)})})})}function h(f,c,s){const o=t.openSync(f,"r+");return t.futimesSync(o,c,s),t.closeSync(o)}return rn={utimesMillis:u,utimesMillisSync:h},rn}var nn,Wo;function $t(){if(Wo)return nn;Wo=1;const t=Lt(),u=Re,h=Gi;function f(r,p,g){const E=g.dereference?m=>t.stat(m,{bigint:!0}):m=>t.lstat(m,{bigint:!0});return Promise.all([E(r),E(p).catch(m=>{if(m.code==="ENOENT")return null;throw m})]).then(([m,A])=>({srcStat:m,destStat:A}))}function c(r,p,g){let E;const m=g.dereference?C=>t.statSync(C,{bigint:!0}):C=>t.lstatSync(C,{bigint:!0}),A=m(r);try{E=m(p)}catch(C){if(C.code==="ENOENT")return{srcStat:A,destStat:null};throw C}return{srcStat:A,destStat:E}}function s(r,p,g,E,m){h.callbackify(f)(r,p,E,(A,C)=>{if(A)return m(A);const{srcStat:O,destStat:I}=C;if(I){if(l(O,I)){const j=u.basename(r),R=u.basename(p);return g==="move"&&j!==R&&j.toLowerCase()===R.toLowerCase()?m(null,{srcStat:O,destStat:I,isChangingCase:!0}):m(new Error("Source and destination must not be the same."))}if(O.isDirectory()&&!I.isDirectory())return m(new Error(`Cannot overwrite non-directory '${p}' with directory '${r}'.`));if(!O.isDirectory()&&I.isDirectory())return m(new Error(`Cannot overwrite directory '${p}' with non-directory '${r}'.`))}return O.isDirectory()&&i(r,p)?m(new Error(a(r,p,g))):m(null,{srcStat:O,destStat:I})})}function o(r,p,g,E){const{srcStat:m,destStat:A}=c(r,p,E);if(A){if(l(m,A)){const C=u.basename(r),O=u.basename(p);if(g==="move"&&C!==O&&C.toLowerCase()===O.toLowerCase())return{srcStat:m,destStat:A,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(m.isDirectory()&&!A.isDirectory())throw new Error(`Cannot overwrite non-directory '${p}' with directory '${r}'.`);if(!m.isDirectory()&&A.isDirectory())throw new Error(`Cannot overwrite directory '${p}' with non-directory '${r}'.`)}if(m.isDirectory()&&i(r,p))throw new Error(a(r,p,g));return{srcStat:m,destStat:A}}function d(r,p,g,E,m){const A=u.resolve(u.dirname(r)),C=u.resolve(u.dirname(g));if(C===A||C===u.parse(C).root)return m();t.stat(C,{bigint:!0},(O,I)=>O?O.code==="ENOENT"?m():m(O):l(p,I)?m(new Error(a(r,g,E))):d(r,p,C,E,m))}function n(r,p,g,E){const m=u.resolve(u.dirname(r)),A=u.resolve(u.dirname(g));if(A===m||A===u.parse(A).root)return;let C;try{C=t.statSync(A,{bigint:!0})}catch(O){if(O.code==="ENOENT")return;throw O}if(l(p,C))throw new Error(a(r,g,E));return n(r,p,A,E)}function l(r,p){return p.ino&&p.dev&&p.ino===r.ino&&p.dev===r.dev}function i(r,p){const g=u.resolve(r).split(u.sep).filter(m=>m),E=u.resolve(p).split(u.sep).filter(m=>m);return g.reduce((m,A,C)=>m&&E[C]===A,!0)}function a(r,p,g){return`Cannot ${g} '${r}' to a subdirectory of itself, '${p}'.`}return nn={checkPaths:s,checkPathsSync:o,checkParentPaths:d,checkParentPathsSync:n,isSrcSubdir:i,areIdentical:l},nn}var on,Yo;function wc(){if(Yo)return on;Yo=1;const t=We(),u=Re,h=ot().mkdirs,f=Ct().pathExists,c=Al().utimesMillis,s=$t();function o($,L,k,D){typeof k=="function"&&!D?(D=k,k={}):typeof k=="function"&&(k={filter:k}),D=D||function(){},k=k||{},k.clobber="clobber"in k?!!k.clobber:!0,k.overwrite="overwrite"in k?!!k.overwrite:k.clobber,k.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001"),s.checkPaths($,L,"copy",k,(P,F)=>{if(P)return D(P);const{srcStat:U,destStat:J}=F;s.checkParentPaths($,U,L,"copy",V=>V?D(V):k.filter?n(d,J,$,L,k,D):d(J,$,L,k,D))})}function d($,L,k,D,P){const F=u.dirname(k);f(F,(U,J)=>{if(U)return P(U);if(J)return i($,L,k,D,P);h(F,V=>V?P(V):i($,L,k,D,P))})}function n($,L,k,D,P,F){Promise.resolve(P.filter(k,D)).then(U=>U?$(L,k,D,P,F):F(),U=>F(U))}function l($,L,k,D,P){return D.filter?n(i,$,L,k,D,P):i($,L,k,D,P)}function i($,L,k,D,P){(D.dereference?t.stat:t.lstat)(L,(U,J)=>U?P(U):J.isDirectory()?I(J,$,L,k,D,P):J.isFile()||J.isCharacterDevice()||J.isBlockDevice()?a(J,$,L,k,D,P):J.isSymbolicLink()?y($,L,k,D,P):J.isSocket()?P(new Error(`Cannot copy a socket file: ${L}`)):J.isFIFO()?P(new Error(`Cannot copy a FIFO pipe: ${L}`)):P(new Error(`Unknown file: ${L}`)))}function a($,L,k,D,P,F){return L?r($,k,D,P,F):p($,k,D,P,F)}function r($,L,k,D,P){if(D.overwrite)t.unlink(k,F=>F?P(F):p($,L,k,D,P));else return D.errorOnExist?P(new Error(`'${k}' already exists`)):P()}function p($,L,k,D,P){t.copyFile(L,k,F=>F?P(F):D.preserveTimestamps?g($.mode,L,k,P):C(k,$.mode,P))}function g($,L,k,D){return E($)?m(k,$,P=>P?D(P):A($,L,k,D)):A($,L,k,D)}function E($){return($&128)===0}function m($,L,k){return C($,L|128,k)}function A($,L,k,D){O(L,k,P=>P?D(P):C(k,$,D))}function C($,L,k){return t.chmod($,L,k)}function O($,L,k){t.stat($,(D,P)=>D?k(D):c(L,P.atime,P.mtime,k))}function I($,L,k,D,P,F){return L?R(k,D,P,F):j($.mode,k,D,P,F)}function j($,L,k,D,P){t.mkdir(k,F=>{if(F)return P(F);R(L,k,D,U=>U?P(U):C(k,$,P))})}function R($,L,k,D){t.readdir($,(P,F)=>P?D(P):_(F,$,L,k,D))}function _($,L,k,D,P){const F=$.pop();return F?T($,F,L,k,D,P):P()}function T($,L,k,D,P,F){const U=u.join(k,L),J=u.join(D,L);s.checkPaths(U,J,"copy",P,(V,ne)=>{if(V)return F(V);const{destStat:ce}=ne;l(ce,U,J,P,ue=>ue?F(ue):_($,k,D,P,F))})}function y($,L,k,D,P){t.readlink(L,(F,U)=>{if(F)return P(F);if(D.dereference&&(U=u.resolve(process.cwd(),U)),$)t.readlink(k,(J,V)=>J?J.code==="EINVAL"||J.code==="UNKNOWN"?t.symlink(U,k,P):P(J):(D.dereference&&(V=u.resolve(process.cwd(),V)),s.isSrcSubdir(U,V)?P(new Error(`Cannot copy '${U}' to a subdirectory of itself, '${V}'.`)):$.isDirectory()&&s.isSrcSubdir(V,U)?P(new Error(`Cannot overwrite '${V}' with '${U}'.`)):q(U,k,P)));else return t.symlink(U,k,P)})}function q($,L,k){t.unlink(L,D=>D?k(D):t.symlink($,L,k))}return on=o,on}var an,zo;function _c(){if(zo)return an;zo=1;const t=We(),u=Re,h=ot().mkdirsSync,f=Al().utimesMillisSync,c=$t();function s(_,T,y){typeof y=="function"&&(y={filter:y}),y=y||{},y.clobber="clobber"in y?!!y.clobber:!0,y.overwrite="overwrite"in y?!!y.overwrite:y.clobber,y.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");const{srcStat:q,destStat:$}=c.checkPathsSync(_,T,"copy",y);return c.checkParentPathsSync(_,q,T,"copy"),o($,_,T,y)}function o(_,T,y,q){if(q.filter&&!q.filter(T,y))return;const $=u.dirname(y);return t.existsSync($)||h($),n(_,T,y,q)}function d(_,T,y,q){if(!(q.filter&&!q.filter(T,y)))return n(_,T,y,q)}function n(_,T,y,q){const L=(q.dereference?t.statSync:t.lstatSync)(T);if(L.isDirectory())return A(L,_,T,y,q);if(L.isFile()||L.isCharacterDevice()||L.isBlockDevice())return l(L,_,T,y,q);if(L.isSymbolicLink())return j(_,T,y,q);throw L.isSocket()?new Error(`Cannot copy a socket file: ${T}`):L.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${T}`):new Error(`Unknown file: ${T}`)}function l(_,T,y,q,$){return T?i(_,y,q,$):a(_,y,q,$)}function i(_,T,y,q){if(q.overwrite)return t.unlinkSync(y),a(_,T,y,q);if(q.errorOnExist)throw new Error(`'${y}' already exists`)}function a(_,T,y,q){return t.copyFileSync(T,y),q.preserveTimestamps&&r(_.mode,T,y),E(y,_.mode)}function r(_,T,y){return p(_)&&g(y,_),m(T,y)}function p(_){return(_&128)===0}function g(_,T){return E(_,T|128)}function E(_,T){return t.chmodSync(_,T)}function m(_,T){const y=t.statSync(_);return f(T,y.atime,y.mtime)}function A(_,T,y,q,$){return T?O(y,q,$):C(_.mode,y,q,$)}function C(_,T,y,q){return t.mkdirSync(y),O(T,y,q),E(y,_)}function O(_,T,y){t.readdirSync(_).forEach(q=>I(q,_,T,y))}function I(_,T,y,q){const $=u.join(T,_),L=u.join(y,_),{destStat:k}=c.checkPathsSync($,L,"copy",q);return d(k,$,L,q)}function j(_,T,y,q){let $=t.readlinkSync(T);if(q.dereference&&($=u.resolve(process.cwd(),$)),_){let L;try{L=t.readlinkSync(y)}catch(k){if(k.code==="EINVAL"||k.code==="UNKNOWN")return t.symlinkSync($,y);throw k}if(q.dereference&&(L=u.resolve(process.cwd(),L)),c.isSrcSubdir($,L))throw new Error(`Cannot copy '${$}' to a subdirectory of itself, '${L}'.`);if(t.statSync(y).isDirectory()&&c.isSrcSubdir(L,$))throw new Error(`Cannot overwrite '${L}' with '${$}'.`);return R($,y)}else return t.symlinkSync($,y)}function R(_,T){return t.unlinkSync(T),t.symlinkSync(_,T)}return an=s,an}var sn,Xo;function Yi(){if(Xo)return sn;Xo=1;const t=ze().fromCallback;return sn={copy:t(wc()),copySync:_c()},sn}var ln,Ko;function Sc(){if(Ko)return ln;Ko=1;const t=We(),u=Re,h=El,f=process.platform==="win32";function c(g){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(m=>{g[m]=g[m]||t[m],m=m+"Sync",g[m]=g[m]||t[m]}),g.maxBusyTries=g.maxBusyTries||3}function s(g,E,m){let A=0;typeof E=="function"&&(m=E,E={}),h(g,"rimraf: missing path"),h.strictEqual(typeof g,"string","rimraf: path should be a string"),h.strictEqual(typeof m,"function","rimraf: callback function required"),h(E,"rimraf: invalid options argument provided"),h.strictEqual(typeof E,"object","rimraf: options should be object"),c(E),o(g,E,function C(O){if(O){if((O.code==="EBUSY"||O.code==="ENOTEMPTY"||O.code==="EPERM")&&A<E.maxBusyTries){A++;const I=A*100;return setTimeout(()=>o(g,E,C),I)}O.code==="ENOENT"&&(O=null)}m(O)})}function o(g,E,m){h(g),h(E),h(typeof m=="function"),E.lstat(g,(A,C)=>{if(A&&A.code==="ENOENT")return m(null);if(A&&A.code==="EPERM"&&f)return d(g,E,A,m);if(C&&C.isDirectory())return l(g,E,A,m);E.unlink(g,O=>{if(O){if(O.code==="ENOENT")return m(null);if(O.code==="EPERM")return f?d(g,E,O,m):l(g,E,O,m);if(O.code==="EISDIR")return l(g,E,O,m)}return m(O)})})}function d(g,E,m,A){h(g),h(E),h(typeof A=="function"),E.chmod(g,438,C=>{C?A(C.code==="ENOENT"?null:m):E.stat(g,(O,I)=>{O?A(O.code==="ENOENT"?null:m):I.isDirectory()?l(g,E,m,A):E.unlink(g,A)})})}function n(g,E,m){let A;h(g),h(E);try{E.chmodSync(g,438)}catch(C){if(C.code==="ENOENT")return;throw m}try{A=E.statSync(g)}catch(C){if(C.code==="ENOENT")return;throw m}A.isDirectory()?r(g,E,m):E.unlinkSync(g)}function l(g,E,m,A){h(g),h(E),h(typeof A=="function"),E.rmdir(g,C=>{C&&(C.code==="ENOTEMPTY"||C.code==="EEXIST"||C.code==="EPERM")?i(g,E,A):C&&C.code==="ENOTDIR"?A(m):A(C)})}function i(g,E,m){h(g),h(E),h(typeof m=="function"),E.readdir(g,(A,C)=>{if(A)return m(A);let O=C.length,I;if(O===0)return E.rmdir(g,m);C.forEach(j=>{s(u.join(g,j),E,R=>{if(!I){if(R)return m(I=R);--O===0&&E.rmdir(g,m)}})})})}function a(g,E){let m;E=E||{},c(E),h(g,"rimraf: missing path"),h.strictEqual(typeof g,"string","rimraf: path should be a string"),h(E,"rimraf: missing options"),h.strictEqual(typeof E,"object","rimraf: options should be object");try{m=E.lstatSync(g)}catch(A){if(A.code==="ENOENT")return;A.code==="EPERM"&&f&&n(g,E,A)}try{m&&m.isDirectory()?r(g,E,null):E.unlinkSync(g)}catch(A){if(A.code==="ENOENT")return;if(A.code==="EPERM")return f?n(g,E,A):r(g,E,A);if(A.code!=="EISDIR")throw A;r(g,E,A)}}function r(g,E,m){h(g),h(E);try{E.rmdirSync(g)}catch(A){if(A.code==="ENOTDIR")throw m;if(A.code==="ENOTEMPTY"||A.code==="EEXIST"||A.code==="EPERM")p(g,E);else if(A.code!=="ENOENT")throw A}}function p(g,E){if(h(g),h(E),E.readdirSync(g).forEach(m=>a(u.join(g,m),E)),f){const m=Date.now();do try{return E.rmdirSync(g,E)}catch{}while(Date.now()-m<500)}else return E.rmdirSync(g,E)}return ln=s,s.sync=a,ln}var un,Jo;function $r(){if(Jo)return un;Jo=1;const t=We(),u=ze().fromCallback,h=Sc();function f(s,o){if(t.rm)return t.rm(s,{recursive:!0,force:!0},o);h(s,o)}function c(s){if(t.rmSync)return t.rmSync(s,{recursive:!0,force:!0});h.sync(s)}return un={remove:u(f),removeSync:c},un}var cn,Qo;function Ac(){if(Qo)return cn;Qo=1;const t=ze().fromPromise,u=Lt(),h=Re,f=ot(),c=$r(),s=t(async function(n){let l;try{l=await u.readdir(n)}catch{return f.mkdirs(n)}return Promise.all(l.map(i=>c.remove(h.join(n,i))))});function o(d){let n;try{n=u.readdirSync(d)}catch{return f.mkdirsSync(d)}n.forEach(l=>{l=h.join(d,l),c.removeSync(l)})}return cn={emptyDirSync:o,emptydirSync:o,emptyDir:s,emptydir:s},cn}var fn,Zo;function Tc(){if(Zo)return fn;Zo=1;const t=ze().fromCallback,u=Re,h=We(),f=ot();function c(o,d){function n(){h.writeFile(o,"",l=>{if(l)return d(l);d()})}h.stat(o,(l,i)=>{if(!l&&i.isFile())return d();const a=u.dirname(o);h.stat(a,(r,p)=>{if(r)return r.code==="ENOENT"?f.mkdirs(a,g=>{if(g)return d(g);n()}):d(r);p.isDirectory()?n():h.readdir(a,g=>{if(g)return d(g)})})})}function s(o){let d;try{d=h.statSync(o)}catch{}if(d&&d.isFile())return;const n=u.dirname(o);try{h.statSync(n).isDirectory()||h.readdirSync(n)}catch(l){if(l&&l.code==="ENOENT")f.mkdirsSync(n);else throw l}h.writeFileSync(o,"")}return fn={createFile:t(c),createFileSync:s},fn}var dn,ea;function Rc(){if(ea)return dn;ea=1;const t=ze().fromCallback,u=Re,h=We(),f=ot(),c=Ct().pathExists,{areIdentical:s}=$t();function o(n,l,i){function a(r,p){h.link(r,p,g=>{if(g)return i(g);i(null)})}h.lstat(l,(r,p)=>{h.lstat(n,(g,E)=>{if(g)return g.message=g.message.replace("lstat","ensureLink"),i(g);if(p&&s(E,p))return i(null);const m=u.dirname(l);c(m,(A,C)=>{if(A)return i(A);if(C)return a(n,l);f.mkdirs(m,O=>{if(O)return i(O);a(n,l)})})})})}function d(n,l){let i;try{i=h.lstatSync(l)}catch{}try{const p=h.lstatSync(n);if(i&&s(p,i))return}catch(p){throw p.message=p.message.replace("lstat","ensureLink"),p}const a=u.dirname(l);return h.existsSync(a)||f.mkdirsSync(a),h.linkSync(n,l)}return dn={createLink:t(o),createLinkSync:d},dn}var hn,ta;function Cc(){if(ta)return hn;ta=1;const t=Re,u=We(),h=Ct().pathExists;function f(s,o,d){if(t.isAbsolute(s))return u.lstat(s,n=>n?(n.message=n.message.replace("lstat","ensureSymlink"),d(n)):d(null,{toCwd:s,toDst:s}));{const n=t.dirname(o),l=t.join(n,s);return h(l,(i,a)=>i?d(i):a?d(null,{toCwd:l,toDst:s}):u.lstat(s,r=>r?(r.message=r.message.replace("lstat","ensureSymlink"),d(r)):d(null,{toCwd:s,toDst:t.relative(n,s)})))}}function c(s,o){let d;if(t.isAbsolute(s)){if(d=u.existsSync(s),!d)throw new Error("absolute srcpath does not exist");return{toCwd:s,toDst:s}}else{const n=t.dirname(o),l=t.join(n,s);if(d=u.existsSync(l),d)return{toCwd:l,toDst:s};if(d=u.existsSync(s),!d)throw new Error("relative srcpath does not exist");return{toCwd:s,toDst:t.relative(n,s)}}}return hn={symlinkPaths:f,symlinkPathsSync:c},hn}var pn,ra;function bc(){if(ra)return pn;ra=1;const t=We();function u(f,c,s){if(s=typeof c=="function"?c:s,c=typeof c=="function"?!1:c,c)return s(null,c);t.lstat(f,(o,d)=>{if(o)return s(null,"file");c=d&&d.isDirectory()?"dir":"file",s(null,c)})}function h(f,c){let s;if(c)return c;try{s=t.lstatSync(f)}catch{return"file"}return s&&s.isDirectory()?"dir":"file"}return pn={symlinkType:u,symlinkTypeSync:h},pn}var mn,na;function Oc(){if(na)return mn;na=1;const t=ze().fromCallback,u=Re,h=Lt(),f=ot(),c=f.mkdirs,s=f.mkdirsSync,o=Cc(),d=o.symlinkPaths,n=o.symlinkPathsSync,l=bc(),i=l.symlinkType,a=l.symlinkTypeSync,r=Ct().pathExists,{areIdentical:p}=$t();function g(A,C,O,I){I=typeof O=="function"?O:I,O=typeof O=="function"?!1:O,h.lstat(C,(j,R)=>{!j&&R.isSymbolicLink()?Promise.all([h.stat(A),h.stat(C)]).then(([_,T])=>{if(p(_,T))return I(null);E(A,C,O,I)}):E(A,C,O,I)})}function E(A,C,O,I){d(A,C,(j,R)=>{if(j)return I(j);A=R.toDst,i(R.toCwd,O,(_,T)=>{if(_)return I(_);const y=u.dirname(C);r(y,(q,$)=>{if(q)return I(q);if($)return h.symlink(A,C,T,I);c(y,L=>{if(L)return I(L);h.symlink(A,C,T,I)})})})})}function m(A,C,O){let I;try{I=h.lstatSync(C)}catch{}if(I&&I.isSymbolicLink()){const T=h.statSync(A),y=h.statSync(C);if(p(T,y))return}const j=n(A,C);A=j.toDst,O=a(j.toCwd,O);const R=u.dirname(C);return h.existsSync(R)||s(R),h.symlinkSync(A,C,O)}return mn={createSymlink:t(g),createSymlinkSync:m},mn}var gn,ia;function Ic(){if(ia)return gn;ia=1;const{createFile:t,createFileSync:u}=Tc(),{createLink:h,createLinkSync:f}=Rc(),{createSymlink:c,createSymlinkSync:s}=Oc();return gn={createFile:t,createFileSync:u,ensureFile:t,ensureFileSync:u,createLink:h,createLinkSync:f,ensureLink:h,ensureLinkSync:f,createSymlink:c,createSymlinkSync:s,ensureSymlink:c,ensureSymlinkSync:s},gn}var vn,oa;function zi(){if(oa)return vn;oa=1;function t(h,{EOL:f=`
`,finalEOL:c=!0,replacer:s=null,spaces:o}={}){const d=c?f:"";return JSON.stringify(h,s,o).replace(/\n/g,f)+d}function u(h){return Buffer.isBuffer(h)&&(h=h.toString("utf8")),h.replace(/^\uFEFF/,"")}return vn={stringify:t,stripBom:u},vn}var En,aa;function Pc(){if(aa)return En;aa=1;let t;try{t=We()}catch{t=it}const u=ze(),{stringify:h,stripBom:f}=zi();async function c(a,r={}){typeof r=="string"&&(r={encoding:r});const p=r.fs||t,g="throws"in r?r.throws:!0;let E=await u.fromCallback(p.readFile)(a,r);E=f(E);let m;try{m=JSON.parse(E,r?r.reviver:null)}catch(A){if(g)throw A.message=`${a}: ${A.message}`,A;return null}return m}const s=u.fromPromise(c);function o(a,r={}){typeof r=="string"&&(r={encoding:r});const p=r.fs||t,g="throws"in r?r.throws:!0;try{let E=p.readFileSync(a,r);return E=f(E),JSON.parse(E,r.reviver)}catch(E){if(g)throw E.message=`${a}: ${E.message}`,E;return null}}async function d(a,r,p={}){const g=p.fs||t,E=h(r,p);await u.fromCallback(g.writeFile)(a,E,p)}const n=u.fromPromise(d);function l(a,r,p={}){const g=p.fs||t,E=h(r,p);return g.writeFileSync(a,E,p)}return En={readFile:s,readFileSync:o,writeFile:n,writeFileSync:l},En}var yn,sa;function Dc(){if(sa)return yn;sa=1;const t=Pc();return yn={readJson:t.readFile,readJsonSync:t.readFileSync,writeJson:t.writeFile,writeJsonSync:t.writeFileSync},yn}var wn,la;function Xi(){if(la)return wn;la=1;const t=ze().fromCallback,u=We(),h=Re,f=ot(),c=Ct().pathExists;function s(d,n,l,i){typeof l=="function"&&(i=l,l="utf8");const a=h.dirname(d);c(a,(r,p)=>{if(r)return i(r);if(p)return u.writeFile(d,n,l,i);f.mkdirs(a,g=>{if(g)return i(g);u.writeFile(d,n,l,i)})})}function o(d,...n){const l=h.dirname(d);if(u.existsSync(l))return u.writeFileSync(d,...n);f.mkdirsSync(l),u.writeFileSync(d,...n)}return wn={outputFile:t(s),outputFileSync:o},wn}var _n,ua;function Nc(){if(ua)return _n;ua=1;const{stringify:t}=zi(),{outputFile:u}=Xi();async function h(f,c,s={}){const o=t(c,s);await u(f,o,s)}return _n=h,_n}var Sn,ca;function Fc(){if(ca)return Sn;ca=1;const{stringify:t}=zi(),{outputFileSync:u}=Xi();function h(f,c,s){const o=t(c,s);u(f,o,s)}return Sn=h,Sn}var An,fa;function xc(){if(fa)return An;fa=1;const t=ze().fromPromise,u=Dc();return u.outputJson=t(Nc()),u.outputJsonSync=Fc(),u.outputJSON=u.outputJson,u.outputJSONSync=u.outputJsonSync,u.writeJSON=u.writeJson,u.writeJSONSync=u.writeJsonSync,u.readJSON=u.readJson,u.readJSONSync=u.readJsonSync,An=u,An}var Tn,da;function Lc(){if(da)return Tn;da=1;const t=We(),u=Re,h=Yi().copy,f=$r().remove,c=ot().mkdirp,s=Ct().pathExists,o=$t();function d(r,p,g,E){typeof g=="function"&&(E=g,g={}),g=g||{};const m=g.overwrite||g.clobber||!1;o.checkPaths(r,p,"move",g,(A,C)=>{if(A)return E(A);const{srcStat:O,isChangingCase:I=!1}=C;o.checkParentPaths(r,O,p,"move",j=>{if(j)return E(j);if(n(p))return l(r,p,m,I,E);c(u.dirname(p),R=>R?E(R):l(r,p,m,I,E))})})}function n(r){const p=u.dirname(r);return u.parse(p).root===p}function l(r,p,g,E,m){if(E)return i(r,p,g,m);if(g)return f(p,A=>A?m(A):i(r,p,g,m));s(p,(A,C)=>A?m(A):C?m(new Error("dest already exists.")):i(r,p,g,m))}function i(r,p,g,E){t.rename(r,p,m=>m?m.code!=="EXDEV"?E(m):a(r,p,g,E):E())}function a(r,p,g,E){h(r,p,{overwrite:g,errorOnExist:!0},A=>A?E(A):f(r,E))}return Tn=d,Tn}var Rn,ha;function $c(){if(ha)return Rn;ha=1;const t=We(),u=Re,h=Yi().copySync,f=$r().removeSync,c=ot().mkdirpSync,s=$t();function o(a,r,p){p=p||{};const g=p.overwrite||p.clobber||!1,{srcStat:E,isChangingCase:m=!1}=s.checkPathsSync(a,r,"move",p);return s.checkParentPathsSync(a,E,r,"move"),d(r)||c(u.dirname(r)),n(a,r,g,m)}function d(a){const r=u.dirname(a);return u.parse(r).root===r}function n(a,r,p,g){if(g)return l(a,r,p);if(p)return f(r),l(a,r,p);if(t.existsSync(r))throw new Error("dest already exists.");return l(a,r,p)}function l(a,r,p){try{t.renameSync(a,r)}catch(g){if(g.code!=="EXDEV")throw g;return i(a,r,p)}}function i(a,r,p){return h(a,r,{overwrite:p,errorOnExist:!0}),f(a)}return Rn=o,Rn}var Cn,pa;function Uc(){if(pa)return Cn;pa=1;const t=ze().fromCallback;return Cn={move:t(Lc()),moveSync:$c()},Cn}var bn,ma;function mt(){return ma||(ma=1,bn={...Lt(),...Yi(),...Ac(),...Ic(),...xc(),...ot(),...Uc(),...Xi(),...Ct(),...$r()}),bn}var Gt={},Tt={},je={},Pr={},ht={},ga;function dr(){if(ga)return ht;ga=1;function t(o){return typeof o>"u"||o===null}function u(o){return typeof o=="object"&&o!==null}function h(o){return Array.isArray(o)?o:t(o)?[]:[o]}function f(o,d){var n,l,i,a;if(d)for(a=Object.keys(d),n=0,l=a.length;n<l;n+=1)i=a[n],o[i]=d[i];return o}function c(o,d){var n="",l;for(l=0;l<d;l+=1)n+=o;return n}function s(o){return o===0&&Number.NEGATIVE_INFINITY===1/o}return ht.isNothing=t,ht.isObject=u,ht.toArray=h,ht.repeat=c,ht.isNegativeZero=s,ht.extend=f,ht}var On,va;function hr(){if(va)return On;va=1;function t(h,f){var c="",s=h.reason||"(unknown reason)";return h.mark?(h.mark.name&&(c+='in "'+h.mark.name+'" '),c+="("+(h.mark.line+1)+":"+(h.mark.column+1)+")",!f&&h.mark.snippet&&(c+=`

`+h.mark.snippet),s+" "+c):s}function u(h,f){Error.call(this),this.name="YAMLException",this.reason=h,this.mark=f,this.message=t(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}return u.prototype=Object.create(Error.prototype),u.prototype.constructor=u,u.prototype.toString=function(f){return this.name+": "+t(this,f)},On=u,On}var In,Ea;function kc(){if(Ea)return In;Ea=1;var t=dr();function u(c,s,o,d,n){var l="",i="",a=Math.floor(n/2)-1;return d-s>a&&(l=" ... ",s=d-a+l.length),o-d>a&&(i=" ...",o=d+a-i.length),{str:l+c.slice(s,o).replace(/\t/g,"→")+i,pos:d-s+l.length}}function h(c,s){return t.repeat(" ",s-c.length)+c}function f(c,s){if(s=Object.create(s||null),!c.buffer)return null;s.maxLength||(s.maxLength=79),typeof s.indent!="number"&&(s.indent=1),typeof s.linesBefore!="number"&&(s.linesBefore=3),typeof s.linesAfter!="number"&&(s.linesAfter=2);for(var o=/\r?\n|\r|\0/g,d=[0],n=[],l,i=-1;l=o.exec(c.buffer);)n.push(l.index),d.push(l.index+l[0].length),c.position<=l.index&&i<0&&(i=d.length-2);i<0&&(i=d.length-1);var a="",r,p,g=Math.min(c.line+s.linesAfter,n.length).toString().length,E=s.maxLength-(s.indent+g+3);for(r=1;r<=s.linesBefore&&!(i-r<0);r++)p=u(c.buffer,d[i-r],n[i-r],c.position-(d[i]-d[i-r]),E),a=t.repeat(" ",s.indent)+h((c.line-r+1).toString(),g)+" | "+p.str+`
`+a;for(p=u(c.buffer,d[i],n[i],c.position,E),a+=t.repeat(" ",s.indent)+h((c.line+1).toString(),g)+" | "+p.str+`
`,a+=t.repeat("-",s.indent+g+3+p.pos)+`^
`,r=1;r<=s.linesAfter&&!(i+r>=n.length);r++)p=u(c.buffer,d[i+r],n[i+r],c.position-(d[i]-d[i+r]),E),a+=t.repeat(" ",s.indent)+h((c.line+r+1).toString(),g)+" | "+p.str+`
`;return a.replace(/\n$/,"")}return In=f,In}var Pn,ya;function Ge(){if(ya)return Pn;ya=1;var t=hr(),u=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],h=["scalar","sequence","mapping"];function f(s){var o={};return s!==null&&Object.keys(s).forEach(function(d){s[d].forEach(function(n){o[String(n)]=d})}),o}function c(s,o){if(o=o||{},Object.keys(o).forEach(function(d){if(u.indexOf(d)===-1)throw new t('Unknown option "'+d+'" is met in definition of "'+s+'" YAML type.')}),this.options=o,this.tag=s,this.kind=o.kind||null,this.resolve=o.resolve||function(){return!0},this.construct=o.construct||function(d){return d},this.instanceOf=o.instanceOf||null,this.predicate=o.predicate||null,this.represent=o.represent||null,this.representName=o.representName||null,this.defaultStyle=o.defaultStyle||null,this.multi=o.multi||!1,this.styleAliases=f(o.styleAliases||null),h.indexOf(this.kind)===-1)throw new t('Unknown kind "'+this.kind+'" is specified for "'+s+'" YAML type.')}return Pn=c,Pn}var Dn,wa;function Tl(){if(wa)return Dn;wa=1;var t=hr(),u=Ge();function h(s,o){var d=[];return s[o].forEach(function(n){var l=d.length;d.forEach(function(i,a){i.tag===n.tag&&i.kind===n.kind&&i.multi===n.multi&&(l=a)}),d[l]=n}),d}function f(){var s={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},o,d;function n(l){l.multi?(s.multi[l.kind].push(l),s.multi.fallback.push(l)):s[l.kind][l.tag]=s.fallback[l.tag]=l}for(o=0,d=arguments.length;o<d;o+=1)arguments[o].forEach(n);return s}function c(s){return this.extend(s)}return c.prototype.extend=function(o){var d=[],n=[];if(o instanceof u)n.push(o);else if(Array.isArray(o))n=n.concat(o);else if(o&&(Array.isArray(o.implicit)||Array.isArray(o.explicit)))o.implicit&&(d=d.concat(o.implicit)),o.explicit&&(n=n.concat(o.explicit));else throw new t("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");d.forEach(function(i){if(!(i instanceof u))throw new t("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(i.loadKind&&i.loadKind!=="scalar")throw new t("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(i.multi)throw new t("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(i){if(!(i instanceof u))throw new t("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var l=Object.create(c.prototype);return l.implicit=(this.implicit||[]).concat(d),l.explicit=(this.explicit||[]).concat(n),l.compiledImplicit=h(l,"implicit"),l.compiledExplicit=h(l,"explicit"),l.compiledTypeMap=f(l.compiledImplicit,l.compiledExplicit),l},Dn=c,Dn}var Nn,_a;function Rl(){if(_a)return Nn;_a=1;var t=Ge();return Nn=new t("tag:yaml.org,2002:str",{kind:"scalar",construct:function(u){return u!==null?u:""}}),Nn}var Fn,Sa;function Cl(){if(Sa)return Fn;Sa=1;var t=Ge();return Fn=new t("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(u){return u!==null?u:[]}}),Fn}var xn,Aa;function bl(){if(Aa)return xn;Aa=1;var t=Ge();return xn=new t("tag:yaml.org,2002:map",{kind:"mapping",construct:function(u){return u!==null?u:{}}}),xn}var Ln,Ta;function Ol(){if(Ta)return Ln;Ta=1;var t=Tl();return Ln=new t({explicit:[Rl(),Cl(),bl()]}),Ln}var $n,Ra;function Il(){if(Ra)return $n;Ra=1;var t=Ge();function u(c){if(c===null)return!0;var s=c.length;return s===1&&c==="~"||s===4&&(c==="null"||c==="Null"||c==="NULL")}function h(){return null}function f(c){return c===null}return $n=new t("tag:yaml.org,2002:null",{kind:"scalar",resolve:u,construct:h,predicate:f,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"}),$n}var Un,Ca;function Pl(){if(Ca)return Un;Ca=1;var t=Ge();function u(c){if(c===null)return!1;var s=c.length;return s===4&&(c==="true"||c==="True"||c==="TRUE")||s===5&&(c==="false"||c==="False"||c==="FALSE")}function h(c){return c==="true"||c==="True"||c==="TRUE"}function f(c){return Object.prototype.toString.call(c)==="[object Boolean]"}return Un=new t("tag:yaml.org,2002:bool",{kind:"scalar",resolve:u,construct:h,predicate:f,represent:{lowercase:function(c){return c?"true":"false"},uppercase:function(c){return c?"TRUE":"FALSE"},camelcase:function(c){return c?"True":"False"}},defaultStyle:"lowercase"}),Un}var kn,ba;function Dl(){if(ba)return kn;ba=1;var t=dr(),u=Ge();function h(n){return 48<=n&&n<=57||65<=n&&n<=70||97<=n&&n<=102}function f(n){return 48<=n&&n<=55}function c(n){return 48<=n&&n<=57}function s(n){if(n===null)return!1;var l=n.length,i=0,a=!1,r;if(!l)return!1;if(r=n[i],(r==="-"||r==="+")&&(r=n[++i]),r==="0"){if(i+1===l)return!0;if(r=n[++i],r==="b"){for(i++;i<l;i++)if(r=n[i],r!=="_"){if(r!=="0"&&r!=="1")return!1;a=!0}return a&&r!=="_"}if(r==="x"){for(i++;i<l;i++)if(r=n[i],r!=="_"){if(!h(n.charCodeAt(i)))return!1;a=!0}return a&&r!=="_"}if(r==="o"){for(i++;i<l;i++)if(r=n[i],r!=="_"){if(!f(n.charCodeAt(i)))return!1;a=!0}return a&&r!=="_"}}if(r==="_")return!1;for(;i<l;i++)if(r=n[i],r!=="_"){if(!c(n.charCodeAt(i)))return!1;a=!0}return!(!a||r==="_")}function o(n){var l=n,i=1,a;if(l.indexOf("_")!==-1&&(l=l.replace(/_/g,"")),a=l[0],(a==="-"||a==="+")&&(a==="-"&&(i=-1),l=l.slice(1),a=l[0]),l==="0")return 0;if(a==="0"){if(l[1]==="b")return i*parseInt(l.slice(2),2);if(l[1]==="x")return i*parseInt(l.slice(2),16);if(l[1]==="o")return i*parseInt(l.slice(2),8)}return i*parseInt(l,10)}function d(n){return Object.prototype.toString.call(n)==="[object Number]"&&n%1===0&&!t.isNegativeZero(n)}return kn=new u("tag:yaml.org,2002:int",{kind:"scalar",resolve:s,construct:o,predicate:d,represent:{binary:function(n){return n>=0?"0b"+n.toString(2):"-0b"+n.toString(2).slice(1)},octal:function(n){return n>=0?"0o"+n.toString(8):"-0o"+n.toString(8).slice(1)},decimal:function(n){return n.toString(10)},hexadecimal:function(n){return n>=0?"0x"+n.toString(16).toUpperCase():"-0x"+n.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),kn}var qn,Oa;function Nl(){if(Oa)return qn;Oa=1;var t=dr(),u=Ge(),h=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function f(n){return!(n===null||!h.test(n)||n[n.length-1]==="_")}function c(n){var l,i;return l=n.replace(/_/g,"").toLowerCase(),i=l[0]==="-"?-1:1,"+-".indexOf(l[0])>=0&&(l=l.slice(1)),l===".inf"?i===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:l===".nan"?NaN:i*parseFloat(l,10)}var s=/^[-+]?[0-9]+e/;function o(n,l){var i;if(isNaN(n))switch(l){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===n)switch(l){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===n)switch(l){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(t.isNegativeZero(n))return"-0.0";return i=n.toString(10),s.test(i)?i.replace("e",".e"):i}function d(n){return Object.prototype.toString.call(n)==="[object Number]"&&(n%1!==0||t.isNegativeZero(n))}return qn=new u("tag:yaml.org,2002:float",{kind:"scalar",resolve:f,construct:c,predicate:d,represent:o,defaultStyle:"lowercase"}),qn}var Mn,Ia;function Fl(){return Ia||(Ia=1,Mn=Ol().extend({implicit:[Il(),Pl(),Dl(),Nl()]})),Mn}var Bn,Pa;function xl(){return Pa||(Pa=1,Bn=Fl()),Bn}var Hn,Da;function Ll(){if(Da)return Hn;Da=1;var t=Ge(),u=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),h=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function f(o){return o===null?!1:u.exec(o)!==null||h.exec(o)!==null}function c(o){var d,n,l,i,a,r,p,g=0,E=null,m,A,C;if(d=u.exec(o),d===null&&(d=h.exec(o)),d===null)throw new Error("Date resolve error");if(n=+d[1],l=+d[2]-1,i=+d[3],!d[4])return new Date(Date.UTC(n,l,i));if(a=+d[4],r=+d[5],p=+d[6],d[7]){for(g=d[7].slice(0,3);g.length<3;)g+="0";g=+g}return d[9]&&(m=+d[10],A=+(d[11]||0),E=(m*60+A)*6e4,d[9]==="-"&&(E=-E)),C=new Date(Date.UTC(n,l,i,a,r,p,g)),E&&C.setTime(C.getTime()-E),C}function s(o){return o.toISOString()}return Hn=new t("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:f,construct:c,instanceOf:Date,represent:s}),Hn}var jn,Na;function $l(){if(Na)return jn;Na=1;var t=Ge();function u(h){return h==="<<"||h===null}return jn=new t("tag:yaml.org,2002:merge",{kind:"scalar",resolve:u}),jn}var Gn,Fa;function Ul(){if(Fa)return Gn;Fa=1;var t=Ge(),u=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function h(o){if(o===null)return!1;var d,n,l=0,i=o.length,a=u;for(n=0;n<i;n++)if(d=a.indexOf(o.charAt(n)),!(d>64)){if(d<0)return!1;l+=6}return l%8===0}function f(o){var d,n,l=o.replace(/[\r\n=]/g,""),i=l.length,a=u,r=0,p=[];for(d=0;d<i;d++)d%4===0&&d&&(p.push(r>>16&255),p.push(r>>8&255),p.push(r&255)),r=r<<6|a.indexOf(l.charAt(d));return n=i%4*6,n===0?(p.push(r>>16&255),p.push(r>>8&255),p.push(r&255)):n===18?(p.push(r>>10&255),p.push(r>>2&255)):n===12&&p.push(r>>4&255),new Uint8Array(p)}function c(o){var d="",n=0,l,i,a=o.length,r=u;for(l=0;l<a;l++)l%3===0&&l&&(d+=r[n>>18&63],d+=r[n>>12&63],d+=r[n>>6&63],d+=r[n&63]),n=(n<<8)+o[l];return i=a%3,i===0?(d+=r[n>>18&63],d+=r[n>>12&63],d+=r[n>>6&63],d+=r[n&63]):i===2?(d+=r[n>>10&63],d+=r[n>>4&63],d+=r[n<<2&63],d+=r[64]):i===1&&(d+=r[n>>2&63],d+=r[n<<4&63],d+=r[64],d+=r[64]),d}function s(o){return Object.prototype.toString.call(o)==="[object Uint8Array]"}return Gn=new t("tag:yaml.org,2002:binary",{kind:"scalar",resolve:h,construct:f,predicate:s,represent:c}),Gn}var Vn,xa;function kl(){if(xa)return Vn;xa=1;var t=Ge(),u=Object.prototype.hasOwnProperty,h=Object.prototype.toString;function f(s){if(s===null)return!0;var o=[],d,n,l,i,a,r=s;for(d=0,n=r.length;d<n;d+=1){if(l=r[d],a=!1,h.call(l)!=="[object Object]")return!1;for(i in l)if(u.call(l,i))if(!a)a=!0;else return!1;if(!a)return!1;if(o.indexOf(i)===-1)o.push(i);else return!1}return!0}function c(s){return s!==null?s:[]}return Vn=new t("tag:yaml.org,2002:omap",{kind:"sequence",resolve:f,construct:c}),Vn}var Wn,La;function ql(){if(La)return Wn;La=1;var t=Ge(),u=Object.prototype.toString;function h(c){if(c===null)return!0;var s,o,d,n,l,i=c;for(l=new Array(i.length),s=0,o=i.length;s<o;s+=1){if(d=i[s],u.call(d)!=="[object Object]"||(n=Object.keys(d),n.length!==1))return!1;l[s]=[n[0],d[n[0]]]}return!0}function f(c){if(c===null)return[];var s,o,d,n,l,i=c;for(l=new Array(i.length),s=0,o=i.length;s<o;s+=1)d=i[s],n=Object.keys(d),l[s]=[n[0],d[n[0]]];return l}return Wn=new t("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:h,construct:f}),Wn}var Yn,$a;function Ml(){if($a)return Yn;$a=1;var t=Ge(),u=Object.prototype.hasOwnProperty;function h(c){if(c===null)return!0;var s,o=c;for(s in o)if(u.call(o,s)&&o[s]!==null)return!1;return!0}function f(c){return c!==null?c:{}}return Yn=new t("tag:yaml.org,2002:set",{kind:"mapping",resolve:h,construct:f}),Yn}var zn,Ua;function Ki(){return Ua||(Ua=1,zn=xl().extend({implicit:[Ll(),$l()],explicit:[Ul(),kl(),ql(),Ml()]})),zn}var ka;function qc(){if(ka)return Pr;ka=1;var t=dr(),u=hr(),h=kc(),f=Ki(),c=Object.prototype.hasOwnProperty,s=1,o=2,d=3,n=4,l=1,i=2,a=3,r=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,p=/[\x85\u2028\u2029]/,g=/[,\[\]\{\}]/,E=/^(?:!|!!|![a-z\-]+!)$/i,m=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function A(e){return Object.prototype.toString.call(e)}function C(e){return e===10||e===13}function O(e){return e===9||e===32}function I(e){return e===9||e===32||e===10||e===13}function j(e){return e===44||e===91||e===93||e===123||e===125}function R(e){var M;return 48<=e&&e<=57?e-48:(M=e|32,97<=M&&M<=102?M-97+10:-1)}function _(e){return e===120?2:e===117?4:e===85?8:0}function T(e){return 48<=e&&e<=57?e-48:-1}function y(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?" ":e===76?"\u2028":e===80?"\u2029":""}function q(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}for(var $=new Array(256),L=new Array(256),k=0;k<256;k++)$[k]=y(k)?1:0,L[k]=y(k);function D(e,M){this.input=e,this.filename=M.filename||null,this.schema=M.schema||f,this.onWarning=M.onWarning||null,this.legacy=M.legacy||!1,this.json=M.json||!1,this.listener=M.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function P(e,M){var G={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return G.snippet=h(G),new u(M,G)}function F(e,M){throw P(e,M)}function U(e,M){e.onWarning&&e.onWarning.call(null,P(e,M))}var J={YAML:function(M,G,re){var W,te,Z;M.version!==null&&F(M,"duplication of %YAML directive"),re.length!==1&&F(M,"YAML directive accepts exactly one argument"),W=/^([0-9]+)\.([0-9]+)$/.exec(re[0]),W===null&&F(M,"ill-formed argument of the YAML directive"),te=parseInt(W[1],10),Z=parseInt(W[2],10),te!==1&&F(M,"unacceptable YAML version of the document"),M.version=re[0],M.checkLineBreaks=Z<2,Z!==1&&Z!==2&&U(M,"unsupported YAML version of the document")},TAG:function(M,G,re){var W,te;re.length!==2&&F(M,"TAG directive accepts exactly two arguments"),W=re[0],te=re[1],E.test(W)||F(M,"ill-formed tag handle (first argument) of the TAG directive"),c.call(M.tagMap,W)&&F(M,'there is a previously declared suffix for "'+W+'" tag handle'),m.test(te)||F(M,"ill-formed tag prefix (second argument) of the TAG directive");try{te=decodeURIComponent(te)}catch{F(M,"tag prefix is malformed: "+te)}M.tagMap[W]=te}};function V(e,M,G,re){var W,te,Z,ie;if(M<G){if(ie=e.input.slice(M,G),re)for(W=0,te=ie.length;W<te;W+=1)Z=ie.charCodeAt(W),Z===9||32<=Z&&Z<=1114111||F(e,"expected valid JSON character");else r.test(ie)&&F(e,"the stream contains non-printable characters");e.result+=ie}}function ne(e,M,G,re){var W,te,Z,ie;for(t.isObject(G)||F(e,"cannot merge mappings; the provided source object is unacceptable"),W=Object.keys(G),Z=0,ie=W.length;Z<ie;Z+=1)te=W[Z],c.call(M,te)||(M[te]=G[te],re[te]=!0)}function ce(e,M,G,re,W,te,Z,ie,ge){var ve,Te;if(Array.isArray(W))for(W=Array.prototype.slice.call(W),ve=0,Te=W.length;ve<Te;ve+=1)Array.isArray(W[ve])&&F(e,"nested arrays are not supported inside keys"),typeof W=="object"&&A(W[ve])==="[object Object]"&&(W[ve]="[object Object]");if(typeof W=="object"&&A(W)==="[object Object]"&&(W="[object Object]"),W=String(W),M===null&&(M={}),re==="tag:yaml.org,2002:merge")if(Array.isArray(te))for(ve=0,Te=te.length;ve<Te;ve+=1)ne(e,M,te[ve],G);else ne(e,M,te,G);else!e.json&&!c.call(G,W)&&c.call(M,W)&&(e.line=Z||e.line,e.lineStart=ie||e.lineStart,e.position=ge||e.position,F(e,"duplicated mapping key")),W==="__proto__"?Object.defineProperty(M,W,{configurable:!0,enumerable:!0,writable:!0,value:te}):M[W]=te,delete G[W];return M}function ue(e){var M;M=e.input.charCodeAt(e.position),M===10?e.position++:M===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):F(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function ae(e,M,G){for(var re=0,W=e.input.charCodeAt(e.position);W!==0;){for(;O(W);)W===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),W=e.input.charCodeAt(++e.position);if(M&&W===35)do W=e.input.charCodeAt(++e.position);while(W!==10&&W!==13&&W!==0);if(C(W))for(ue(e),W=e.input.charCodeAt(e.position),re++,e.lineIndent=0;W===32;)e.lineIndent++,W=e.input.charCodeAt(++e.position);else break}return G!==-1&&re!==0&&e.lineIndent<G&&U(e,"deficient indentation"),re}function Ae(e){var M=e.position,G;return G=e.input.charCodeAt(M),!!((G===45||G===46)&&G===e.input.charCodeAt(M+1)&&G===e.input.charCodeAt(M+2)&&(M+=3,G=e.input.charCodeAt(M),G===0||I(G)))}function K(e,M){M===1?e.result+=" ":M>1&&(e.result+=t.repeat(`
`,M-1))}function Ee(e,M,G){var re,W,te,Z,ie,ge,ve,Te,de=e.kind,$e=e.result,w;if(w=e.input.charCodeAt(e.position),I(w)||j(w)||w===35||w===38||w===42||w===33||w===124||w===62||w===39||w===34||w===37||w===64||w===96||(w===63||w===45)&&(W=e.input.charCodeAt(e.position+1),I(W)||G&&j(W)))return!1;for(e.kind="scalar",e.result="",te=Z=e.position,ie=!1;w!==0;){if(w===58){if(W=e.input.charCodeAt(e.position+1),I(W)||G&&j(W))break}else if(w===35){if(re=e.input.charCodeAt(e.position-1),I(re))break}else{if(e.position===e.lineStart&&Ae(e)||G&&j(w))break;if(C(w))if(ge=e.line,ve=e.lineStart,Te=e.lineIndent,ae(e,!1,-1),e.lineIndent>=M){ie=!0,w=e.input.charCodeAt(e.position);continue}else{e.position=Z,e.line=ge,e.lineStart=ve,e.lineIndent=Te;break}}ie&&(V(e,te,Z,!1),K(e,e.line-ge),te=Z=e.position,ie=!1),O(w)||(Z=e.position+1),w=e.input.charCodeAt(++e.position)}return V(e,te,Z,!1),e.result?!0:(e.kind=de,e.result=$e,!1)}function S(e,M){var G,re,W;if(G=e.input.charCodeAt(e.position),G!==39)return!1;for(e.kind="scalar",e.result="",e.position++,re=W=e.position;(G=e.input.charCodeAt(e.position))!==0;)if(G===39)if(V(e,re,e.position,!0),G=e.input.charCodeAt(++e.position),G===39)re=e.position,e.position++,W=e.position;else return!0;else C(G)?(V(e,re,W,!0),K(e,ae(e,!1,M)),re=W=e.position):e.position===e.lineStart&&Ae(e)?F(e,"unexpected end of the document within a single quoted scalar"):(e.position++,W=e.position);F(e,"unexpected end of the stream within a single quoted scalar")}function v(e,M){var G,re,W,te,Z,ie;if(ie=e.input.charCodeAt(e.position),ie!==34)return!1;for(e.kind="scalar",e.result="",e.position++,G=re=e.position;(ie=e.input.charCodeAt(e.position))!==0;){if(ie===34)return V(e,G,e.position,!0),e.position++,!0;if(ie===92){if(V(e,G,e.position,!0),ie=e.input.charCodeAt(++e.position),C(ie))ae(e,!1,M);else if(ie<256&&$[ie])e.result+=L[ie],e.position++;else if((Z=_(ie))>0){for(W=Z,te=0;W>0;W--)ie=e.input.charCodeAt(++e.position),(Z=R(ie))>=0?te=(te<<4)+Z:F(e,"expected hexadecimal character");e.result+=q(te),e.position++}else F(e,"unknown escape sequence");G=re=e.position}else C(ie)?(V(e,G,re,!0),K(e,ae(e,!1,M)),G=re=e.position):e.position===e.lineStart&&Ae(e)?F(e,"unexpected end of the document within a double quoted scalar"):(e.position++,re=e.position)}F(e,"unexpected end of the stream within a double quoted scalar")}function B(e,M){var G=!0,re,W,te,Z=e.tag,ie,ge=e.anchor,ve,Te,de,$e,w,H=Object.create(null),X,Y,Q,ee;if(ee=e.input.charCodeAt(e.position),ee===91)Te=93,w=!1,ie=[];else if(ee===123)Te=125,w=!0,ie={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=ie),ee=e.input.charCodeAt(++e.position);ee!==0;){if(ae(e,!0,M),ee=e.input.charCodeAt(e.position),ee===Te)return e.position++,e.tag=Z,e.anchor=ge,e.kind=w?"mapping":"sequence",e.result=ie,!0;G?ee===44&&F(e,"expected the node content, but found ','"):F(e,"missed comma between flow collection entries"),Y=X=Q=null,de=$e=!1,ee===63&&(ve=e.input.charCodeAt(e.position+1),I(ve)&&(de=$e=!0,e.position++,ae(e,!0,M))),re=e.line,W=e.lineStart,te=e.position,Le(e,M,s,!1,!0),Y=e.tag,X=e.result,ae(e,!0,M),ee=e.input.charCodeAt(e.position),($e||e.line===re)&&ee===58&&(de=!0,ee=e.input.charCodeAt(++e.position),ae(e,!0,M),Le(e,M,s,!1,!0),Q=e.result),w?ce(e,ie,H,Y,X,Q,re,W,te):de?ie.push(ce(e,null,H,Y,X,Q,re,W,te)):ie.push(X),ae(e,!0,M),ee=e.input.charCodeAt(e.position),ee===44?(G=!0,ee=e.input.charCodeAt(++e.position)):G=!1}F(e,"unexpected end of the stream within a flow collection")}function N(e,M){var G,re,W=l,te=!1,Z=!1,ie=M,ge=0,ve=!1,Te,de;if(de=e.input.charCodeAt(e.position),de===124)re=!1;else if(de===62)re=!0;else return!1;for(e.kind="scalar",e.result="";de!==0;)if(de=e.input.charCodeAt(++e.position),de===43||de===45)l===W?W=de===43?a:i:F(e,"repeat of a chomping mode identifier");else if((Te=T(de))>=0)Te===0?F(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):Z?F(e,"repeat of an indentation width identifier"):(ie=M+Te-1,Z=!0);else break;if(O(de)){do de=e.input.charCodeAt(++e.position);while(O(de));if(de===35)do de=e.input.charCodeAt(++e.position);while(!C(de)&&de!==0)}for(;de!==0;){for(ue(e),e.lineIndent=0,de=e.input.charCodeAt(e.position);(!Z||e.lineIndent<ie)&&de===32;)e.lineIndent++,de=e.input.charCodeAt(++e.position);if(!Z&&e.lineIndent>ie&&(ie=e.lineIndent),C(de)){ge++;continue}if(e.lineIndent<ie){W===a?e.result+=t.repeat(`
`,te?1+ge:ge):W===l&&te&&(e.result+=`
`);break}for(re?O(de)?(ve=!0,e.result+=t.repeat(`
`,te?1+ge:ge)):ve?(ve=!1,e.result+=t.repeat(`
`,ge+1)):ge===0?te&&(e.result+=" "):e.result+=t.repeat(`
`,ge):e.result+=t.repeat(`
`,te?1+ge:ge),te=!0,Z=!0,ge=0,G=e.position;!C(de)&&de!==0;)de=e.input.charCodeAt(++e.position);V(e,G,e.position,!1)}return!0}function le(e,M){var G,re=e.tag,W=e.anchor,te=[],Z,ie=!1,ge;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=te),ge=e.input.charCodeAt(e.position);ge!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,F(e,"tab characters must not be used in indentation")),!(ge!==45||(Z=e.input.charCodeAt(e.position+1),!I(Z))));){if(ie=!0,e.position++,ae(e,!0,-1)&&e.lineIndent<=M){te.push(null),ge=e.input.charCodeAt(e.position);continue}if(G=e.line,Le(e,M,d,!1,!0),te.push(e.result),ae(e,!0,-1),ge=e.input.charCodeAt(e.position),(e.line===G||e.lineIndent>M)&&ge!==0)F(e,"bad indentation of a sequence entry");else if(e.lineIndent<M)break}return ie?(e.tag=re,e.anchor=W,e.kind="sequence",e.result=te,!0):!1}function me(e,M,G){var re,W,te,Z,ie,ge,ve=e.tag,Te=e.anchor,de={},$e=Object.create(null),w=null,H=null,X=null,Y=!1,Q=!1,ee;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=de),ee=e.input.charCodeAt(e.position);ee!==0;){if(!Y&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,F(e,"tab characters must not be used in indentation")),re=e.input.charCodeAt(e.position+1),te=e.line,(ee===63||ee===58)&&I(re))ee===63?(Y&&(ce(e,de,$e,w,H,null,Z,ie,ge),w=H=X=null),Q=!0,Y=!0,W=!0):Y?(Y=!1,W=!0):F(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,ee=re;else{if(Z=e.line,ie=e.lineStart,ge=e.position,!Le(e,G,o,!1,!0))break;if(e.line===te){for(ee=e.input.charCodeAt(e.position);O(ee);)ee=e.input.charCodeAt(++e.position);if(ee===58)ee=e.input.charCodeAt(++e.position),I(ee)||F(e,"a whitespace character is expected after the key-value separator within a block mapping"),Y&&(ce(e,de,$e,w,H,null,Z,ie,ge),w=H=X=null),Q=!0,Y=!1,W=!1,w=e.tag,H=e.result;else if(Q)F(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=ve,e.anchor=Te,!0}else if(Q)F(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=ve,e.anchor=Te,!0}if((e.line===te||e.lineIndent>M)&&(Y&&(Z=e.line,ie=e.lineStart,ge=e.position),Le(e,M,n,!0,W)&&(Y?H=e.result:X=e.result),Y||(ce(e,de,$e,w,H,X,Z,ie,ge),w=H=X=null),ae(e,!0,-1),ee=e.input.charCodeAt(e.position)),(e.line===te||e.lineIndent>M)&&ee!==0)F(e,"bad indentation of a mapping entry");else if(e.lineIndent<M)break}return Y&&ce(e,de,$e,w,H,null,Z,ie,ge),Q&&(e.tag=ve,e.anchor=Te,e.kind="mapping",e.result=de),Q}function pe(e){var M,G=!1,re=!1,W,te,Z;if(Z=e.input.charCodeAt(e.position),Z!==33)return!1;if(e.tag!==null&&F(e,"duplication of a tag property"),Z=e.input.charCodeAt(++e.position),Z===60?(G=!0,Z=e.input.charCodeAt(++e.position)):Z===33?(re=!0,W="!!",Z=e.input.charCodeAt(++e.position)):W="!",M=e.position,G){do Z=e.input.charCodeAt(++e.position);while(Z!==0&&Z!==62);e.position<e.length?(te=e.input.slice(M,e.position),Z=e.input.charCodeAt(++e.position)):F(e,"unexpected end of the stream within a verbatim tag")}else{for(;Z!==0&&!I(Z);)Z===33&&(re?F(e,"tag suffix cannot contain exclamation marks"):(W=e.input.slice(M-1,e.position+1),E.test(W)||F(e,"named tag handle cannot contain such characters"),re=!0,M=e.position+1)),Z=e.input.charCodeAt(++e.position);te=e.input.slice(M,e.position),g.test(te)&&F(e,"tag suffix cannot contain flow indicator characters")}te&&!m.test(te)&&F(e,"tag name cannot contain such characters: "+te);try{te=decodeURIComponent(te)}catch{F(e,"tag name is malformed: "+te)}return G?e.tag=te:c.call(e.tagMap,W)?e.tag=e.tagMap[W]+te:W==="!"?e.tag="!"+te:W==="!!"?e.tag="tag:yaml.org,2002:"+te:F(e,'undeclared tag handle "'+W+'"'),!0}function _e(e){var M,G;if(G=e.input.charCodeAt(e.position),G!==38)return!1;for(e.anchor!==null&&F(e,"duplication of an anchor property"),G=e.input.charCodeAt(++e.position),M=e.position;G!==0&&!I(G)&&!j(G);)G=e.input.charCodeAt(++e.position);return e.position===M&&F(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(M,e.position),!0}function ye(e){var M,G,re;if(re=e.input.charCodeAt(e.position),re!==42)return!1;for(re=e.input.charCodeAt(++e.position),M=e.position;re!==0&&!I(re)&&!j(re);)re=e.input.charCodeAt(++e.position);return e.position===M&&F(e,"name of an alias node must contain at least one character"),G=e.input.slice(M,e.position),c.call(e.anchorMap,G)||F(e,'unidentified alias "'+G+'"'),e.result=e.anchorMap[G],ae(e,!0,-1),!0}function Le(e,M,G,re,W){var te,Z,ie,ge=1,ve=!1,Te=!1,de,$e,w,H,X,Y;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,te=Z=ie=n===G||d===G,re&&ae(e,!0,-1)&&(ve=!0,e.lineIndent>M?ge=1:e.lineIndent===M?ge=0:e.lineIndent<M&&(ge=-1)),ge===1)for(;pe(e)||_e(e);)ae(e,!0,-1)?(ve=!0,ie=te,e.lineIndent>M?ge=1:e.lineIndent===M?ge=0:e.lineIndent<M&&(ge=-1)):ie=!1;if(ie&&(ie=ve||W),(ge===1||n===G)&&(s===G||o===G?X=M:X=M+1,Y=e.position-e.lineStart,ge===1?ie&&(le(e,Y)||me(e,Y,X))||B(e,X)?Te=!0:(Z&&N(e,X)||S(e,X)||v(e,X)?Te=!0:ye(e)?(Te=!0,(e.tag!==null||e.anchor!==null)&&F(e,"alias node should not have any properties")):Ee(e,X,s===G)&&(Te=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):ge===0&&(Te=ie&&le(e,Y))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&F(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),de=0,$e=e.implicitTypes.length;de<$e;de+=1)if(H=e.implicitTypes[de],H.resolve(e.result)){e.result=H.construct(e.result),e.tag=H.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(c.call(e.typeMap[e.kind||"fallback"],e.tag))H=e.typeMap[e.kind||"fallback"][e.tag];else for(H=null,w=e.typeMap.multi[e.kind||"fallback"],de=0,$e=w.length;de<$e;de+=1)if(e.tag.slice(0,w[de].tag.length)===w[de].tag){H=w[de];break}H||F(e,"unknown tag !<"+e.tag+">"),e.result!==null&&H.kind!==e.kind&&F(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+H.kind+'", not "'+e.kind+'"'),H.resolve(e.result,e.tag)?(e.result=H.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):F(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||Te}function be(e){var M=e.position,G,re,W,te=!1,Z;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(Z=e.input.charCodeAt(e.position))!==0&&(ae(e,!0,-1),Z=e.input.charCodeAt(e.position),!(e.lineIndent>0||Z!==37));){for(te=!0,Z=e.input.charCodeAt(++e.position),G=e.position;Z!==0&&!I(Z);)Z=e.input.charCodeAt(++e.position);for(re=e.input.slice(G,e.position),W=[],re.length<1&&F(e,"directive name must not be less than one character in length");Z!==0;){for(;O(Z);)Z=e.input.charCodeAt(++e.position);if(Z===35){do Z=e.input.charCodeAt(++e.position);while(Z!==0&&!C(Z));break}if(C(Z))break;for(G=e.position;Z!==0&&!I(Z);)Z=e.input.charCodeAt(++e.position);W.push(e.input.slice(G,e.position))}Z!==0&&ue(e),c.call(J,re)?J[re](e,re,W):U(e,'unknown document directive "'+re+'"')}if(ae(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,ae(e,!0,-1)):te&&F(e,"directives end mark is expected"),Le(e,e.lineIndent-1,n,!1,!0),ae(e,!0,-1),e.checkLineBreaks&&p.test(e.input.slice(M,e.position))&&U(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&Ae(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,ae(e,!0,-1));return}if(e.position<e.length-1)F(e,"end of the stream or a document separator is expected");else return}function Me(e,M){e=String(e),M=M||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var G=new D(e,M),re=e.indexOf("\0");for(re!==-1&&(G.position=re,F(G,"null byte is not allowed in input")),G.input+="\0";G.input.charCodeAt(G.position)===32;)G.lineIndent+=1,G.position+=1;for(;G.position<G.length-1;)be(G);return G.documents}function gt(e,M,G){M!==null&&typeof M=="object"&&typeof G>"u"&&(G=M,M=null);var re=Me(e,G);if(typeof M!="function")return re;for(var W=0,te=re.length;W<te;W+=1)M(re[W])}function at(e,M){var G=Me(e,M);if(G.length!==0){if(G.length===1)return G[0];throw new u("expected a single document in the stream, but found more")}}return Pr.loadAll=gt,Pr.load=at,Pr}var Xn={},qa;function Mc(){if(qa)return Xn;qa=1;var t=dr(),u=hr(),h=Ki(),f=Object.prototype.toString,c=Object.prototype.hasOwnProperty,s=65279,o=9,d=10,n=13,l=32,i=33,a=34,r=35,p=37,g=38,E=39,m=42,A=44,C=45,O=58,I=61,j=62,R=63,_=64,T=91,y=93,q=96,$=123,L=124,k=125,D={};D[0]="\\0",D[7]="\\a",D[8]="\\b",D[9]="\\t",D[10]="\\n",D[11]="\\v",D[12]="\\f",D[13]="\\r",D[27]="\\e",D[34]='\\"',D[92]="\\\\",D[133]="\\N",D[160]="\\_",D[8232]="\\L",D[8233]="\\P";var P=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],F=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function U(w,H){var X,Y,Q,ee,fe,oe,he;if(H===null)return{};for(X={},Y=Object.keys(H),Q=0,ee=Y.length;Q<ee;Q+=1)fe=Y[Q],oe=String(H[fe]),fe.slice(0,2)==="!!"&&(fe="tag:yaml.org,2002:"+fe.slice(2)),he=w.compiledTypeMap.fallback[fe],he&&c.call(he.styleAliases,oe)&&(oe=he.styleAliases[oe]),X[fe]=oe;return X}function J(w){var H,X,Y;if(H=w.toString(16).toUpperCase(),w<=255)X="x",Y=2;else if(w<=65535)X="u",Y=4;else if(w<=4294967295)X="U",Y=8;else throw new u("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+X+t.repeat("0",Y-H.length)+H}var V=1,ne=2;function ce(w){this.schema=w.schema||h,this.indent=Math.max(1,w.indent||2),this.noArrayIndent=w.noArrayIndent||!1,this.skipInvalid=w.skipInvalid||!1,this.flowLevel=t.isNothing(w.flowLevel)?-1:w.flowLevel,this.styleMap=U(this.schema,w.styles||null),this.sortKeys=w.sortKeys||!1,this.lineWidth=w.lineWidth||80,this.noRefs=w.noRefs||!1,this.noCompatMode=w.noCompatMode||!1,this.condenseFlow=w.condenseFlow||!1,this.quotingType=w.quotingType==='"'?ne:V,this.forceQuotes=w.forceQuotes||!1,this.replacer=typeof w.replacer=="function"?w.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function ue(w,H){for(var X=t.repeat(" ",H),Y=0,Q=-1,ee="",fe,oe=w.length;Y<oe;)Q=w.indexOf(`
`,Y),Q===-1?(fe=w.slice(Y),Y=oe):(fe=w.slice(Y,Q+1),Y=Q+1),fe.length&&fe!==`
`&&(ee+=X),ee+=fe;return ee}function ae(w,H){return`
`+t.repeat(" ",w.indent*H)}function Ae(w,H){var X,Y,Q;for(X=0,Y=w.implicitTypes.length;X<Y;X+=1)if(Q=w.implicitTypes[X],Q.resolve(H))return!0;return!1}function K(w){return w===l||w===o}function Ee(w){return 32<=w&&w<=126||161<=w&&w<=55295&&w!==8232&&w!==8233||57344<=w&&w<=65533&&w!==s||65536<=w&&w<=1114111}function S(w){return Ee(w)&&w!==s&&w!==n&&w!==d}function v(w,H,X){var Y=S(w),Q=Y&&!K(w);return(X?Y:Y&&w!==A&&w!==T&&w!==y&&w!==$&&w!==k)&&w!==r&&!(H===O&&!Q)||S(H)&&!K(H)&&w===r||H===O&&Q}function B(w){return Ee(w)&&w!==s&&!K(w)&&w!==C&&w!==R&&w!==O&&w!==A&&w!==T&&w!==y&&w!==$&&w!==k&&w!==r&&w!==g&&w!==m&&w!==i&&w!==L&&w!==I&&w!==j&&w!==E&&w!==a&&w!==p&&w!==_&&w!==q}function N(w){return!K(w)&&w!==O}function le(w,H){var X=w.charCodeAt(H),Y;return X>=55296&&X<=56319&&H+1<w.length&&(Y=w.charCodeAt(H+1),Y>=56320&&Y<=57343)?(X-55296)*1024+Y-56320+65536:X}function me(w){var H=/^\n* /;return H.test(w)}var pe=1,_e=2,ye=3,Le=4,be=5;function Me(w,H,X,Y,Q,ee,fe,oe){var he,we=0,Oe=null,De=!1,Ce=!1,Ot=Y!==-1,Qe=-1,vt=B(le(w,0))&&N(le(w,w.length-1));if(H||fe)for(he=0;he<w.length;we>=65536?he+=2:he++){if(we=le(w,he),!Ee(we))return be;vt=vt&&v(we,Oe,oe),Oe=we}else{for(he=0;he<w.length;we>=65536?he+=2:he++){if(we=le(w,he),we===d)De=!0,Ot&&(Ce=Ce||he-Qe-1>Y&&w[Qe+1]!==" ",Qe=he);else if(!Ee(we))return be;vt=vt&&v(we,Oe,oe),Oe=we}Ce=Ce||Ot&&he-Qe-1>Y&&w[Qe+1]!==" "}return!De&&!Ce?vt&&!fe&&!Q(w)?pe:ee===ne?be:_e:X>9&&me(w)?be:fe?ee===ne?be:_e:Ce?Le:ye}function gt(w,H,X,Y,Q){w.dump=function(){if(H.length===0)return w.quotingType===ne?'""':"''";if(!w.noCompatMode&&(P.indexOf(H)!==-1||F.test(H)))return w.quotingType===ne?'"'+H+'"':"'"+H+"'";var ee=w.indent*Math.max(1,X),fe=w.lineWidth===-1?-1:Math.max(Math.min(w.lineWidth,40),w.lineWidth-ee),oe=Y||w.flowLevel>-1&&X>=w.flowLevel;function he(we){return Ae(w,we)}switch(Me(H,oe,w.indent,fe,he,w.quotingType,w.forceQuotes&&!Y,Q)){case pe:return H;case _e:return"'"+H.replace(/'/g,"''")+"'";case ye:return"|"+at(H,w.indent)+e(ue(H,ee));case Le:return">"+at(H,w.indent)+e(ue(M(H,fe),ee));case be:return'"'+re(H)+'"';default:throw new u("impossible error: invalid scalar style")}}()}function at(w,H){var X=me(w)?String(H):"",Y=w[w.length-1]===`
`,Q=Y&&(w[w.length-2]===`
`||w===`
`),ee=Q?"+":Y?"":"-";return X+ee+`
`}function e(w){return w[w.length-1]===`
`?w.slice(0,-1):w}function M(w,H){for(var X=/(\n+)([^\n]*)/g,Y=function(){var we=w.indexOf(`
`);return we=we!==-1?we:w.length,X.lastIndex=we,G(w.slice(0,we),H)}(),Q=w[0]===`
`||w[0]===" ",ee,fe;fe=X.exec(w);){var oe=fe[1],he=fe[2];ee=he[0]===" ",Y+=oe+(!Q&&!ee&&he!==""?`
`:"")+G(he,H),Q=ee}return Y}function G(w,H){if(w===""||w[0]===" ")return w;for(var X=/ [^ ]/g,Y,Q=0,ee,fe=0,oe=0,he="";Y=X.exec(w);)oe=Y.index,oe-Q>H&&(ee=fe>Q?fe:oe,he+=`
`+w.slice(Q,ee),Q=ee+1),fe=oe;return he+=`
`,w.length-Q>H&&fe>Q?he+=w.slice(Q,fe)+`
`+w.slice(fe+1):he+=w.slice(Q),he.slice(1)}function re(w){for(var H="",X=0,Y,Q=0;Q<w.length;X>=65536?Q+=2:Q++)X=le(w,Q),Y=D[X],!Y&&Ee(X)?(H+=w[Q],X>=65536&&(H+=w[Q+1])):H+=Y||J(X);return H}function W(w,H,X){var Y="",Q=w.tag,ee,fe,oe;for(ee=0,fe=X.length;ee<fe;ee+=1)oe=X[ee],w.replacer&&(oe=w.replacer.call(X,String(ee),oe)),(ve(w,H,oe,!1,!1)||typeof oe>"u"&&ve(w,H,null,!1,!1))&&(Y!==""&&(Y+=","+(w.condenseFlow?"":" ")),Y+=w.dump);w.tag=Q,w.dump="["+Y+"]"}function te(w,H,X,Y){var Q="",ee=w.tag,fe,oe,he;for(fe=0,oe=X.length;fe<oe;fe+=1)he=X[fe],w.replacer&&(he=w.replacer.call(X,String(fe),he)),(ve(w,H+1,he,!0,!0,!1,!0)||typeof he>"u"&&ve(w,H+1,null,!0,!0,!1,!0))&&((!Y||Q!=="")&&(Q+=ae(w,H)),w.dump&&d===w.dump.charCodeAt(0)?Q+="-":Q+="- ",Q+=w.dump);w.tag=ee,w.dump=Q||"[]"}function Z(w,H,X){var Y="",Q=w.tag,ee=Object.keys(X),fe,oe,he,we,Oe;for(fe=0,oe=ee.length;fe<oe;fe+=1)Oe="",Y!==""&&(Oe+=", "),w.condenseFlow&&(Oe+='"'),he=ee[fe],we=X[he],w.replacer&&(we=w.replacer.call(X,he,we)),ve(w,H,he,!1,!1)&&(w.dump.length>1024&&(Oe+="? "),Oe+=w.dump+(w.condenseFlow?'"':"")+":"+(w.condenseFlow?"":" "),ve(w,H,we,!1,!1)&&(Oe+=w.dump,Y+=Oe));w.tag=Q,w.dump="{"+Y+"}"}function ie(w,H,X,Y){var Q="",ee=w.tag,fe=Object.keys(X),oe,he,we,Oe,De,Ce;if(w.sortKeys===!0)fe.sort();else if(typeof w.sortKeys=="function")fe.sort(w.sortKeys);else if(w.sortKeys)throw new u("sortKeys must be a boolean or a function");for(oe=0,he=fe.length;oe<he;oe+=1)Ce="",(!Y||Q!=="")&&(Ce+=ae(w,H)),we=fe[oe],Oe=X[we],w.replacer&&(Oe=w.replacer.call(X,we,Oe)),ve(w,H+1,we,!0,!0,!0)&&(De=w.tag!==null&&w.tag!=="?"||w.dump&&w.dump.length>1024,De&&(w.dump&&d===w.dump.charCodeAt(0)?Ce+="?":Ce+="? "),Ce+=w.dump,De&&(Ce+=ae(w,H)),ve(w,H+1,Oe,!0,De)&&(w.dump&&d===w.dump.charCodeAt(0)?Ce+=":":Ce+=": ",Ce+=w.dump,Q+=Ce));w.tag=ee,w.dump=Q||"{}"}function ge(w,H,X){var Y,Q,ee,fe,oe,he;for(Q=X?w.explicitTypes:w.implicitTypes,ee=0,fe=Q.length;ee<fe;ee+=1)if(oe=Q[ee],(oe.instanceOf||oe.predicate)&&(!oe.instanceOf||typeof H=="object"&&H instanceof oe.instanceOf)&&(!oe.predicate||oe.predicate(H))){if(X?oe.multi&&oe.representName?w.tag=oe.representName(H):w.tag=oe.tag:w.tag="?",oe.represent){if(he=w.styleMap[oe.tag]||oe.defaultStyle,f.call(oe.represent)==="[object Function]")Y=oe.represent(H,he);else if(c.call(oe.represent,he))Y=oe.represent[he](H,he);else throw new u("!<"+oe.tag+'> tag resolver accepts not "'+he+'" style');w.dump=Y}return!0}return!1}function ve(w,H,X,Y,Q,ee,fe){w.tag=null,w.dump=X,ge(w,X,!1)||ge(w,X,!0);var oe=f.call(w.dump),he=Y,we;Y&&(Y=w.flowLevel<0||w.flowLevel>H);var Oe=oe==="[object Object]"||oe==="[object Array]",De,Ce;if(Oe&&(De=w.duplicates.indexOf(X),Ce=De!==-1),(w.tag!==null&&w.tag!=="?"||Ce||w.indent!==2&&H>0)&&(Q=!1),Ce&&w.usedDuplicates[De])w.dump="*ref_"+De;else{if(Oe&&Ce&&!w.usedDuplicates[De]&&(w.usedDuplicates[De]=!0),oe==="[object Object]")Y&&Object.keys(w.dump).length!==0?(ie(w,H,w.dump,Q),Ce&&(w.dump="&ref_"+De+w.dump)):(Z(w,H,w.dump),Ce&&(w.dump="&ref_"+De+" "+w.dump));else if(oe==="[object Array]")Y&&w.dump.length!==0?(w.noArrayIndent&&!fe&&H>0?te(w,H-1,w.dump,Q):te(w,H,w.dump,Q),Ce&&(w.dump="&ref_"+De+w.dump)):(W(w,H,w.dump),Ce&&(w.dump="&ref_"+De+" "+w.dump));else if(oe==="[object String]")w.tag!=="?"&&gt(w,w.dump,H,ee,he);else{if(oe==="[object Undefined]")return!1;if(w.skipInvalid)return!1;throw new u("unacceptable kind of an object to dump "+oe)}w.tag!==null&&w.tag!=="?"&&(we=encodeURI(w.tag[0]==="!"?w.tag.slice(1):w.tag).replace(/!/g,"%21"),w.tag[0]==="!"?we="!"+we:we.slice(0,18)==="tag:yaml.org,2002:"?we="!!"+we.slice(18):we="!<"+we+">",w.dump=we+" "+w.dump)}return!0}function Te(w,H){var X=[],Y=[],Q,ee;for(de(w,X,Y),Q=0,ee=Y.length;Q<ee;Q+=1)H.duplicates.push(X[Y[Q]]);H.usedDuplicates=new Array(ee)}function de(w,H,X){var Y,Q,ee;if(w!==null&&typeof w=="object")if(Q=H.indexOf(w),Q!==-1)X.indexOf(Q)===-1&&X.push(Q);else if(H.push(w),Array.isArray(w))for(Q=0,ee=w.length;Q<ee;Q+=1)de(w[Q],H,X);else for(Y=Object.keys(w),Q=0,ee=Y.length;Q<ee;Q+=1)de(w[Y[Q]],H,X)}function $e(w,H){H=H||{};var X=new ce(H);X.noRefs||Te(w,X);var Y=w;return X.replacer&&(Y=X.replacer.call({"":Y},"",Y)),ve(X,0,Y,!0,!0)?X.dump+`
`:""}return Xn.dump=$e,Xn}var Ma;function Ji(){if(Ma)return je;Ma=1;var t=qc(),u=Mc();function h(f,c){return function(){throw new Error("Function yaml."+f+" is removed in js-yaml 4. Use yaml."+c+" instead, which is now safe by default.")}}return je.Type=Ge(),je.Schema=Tl(),je.FAILSAFE_SCHEMA=Ol(),je.JSON_SCHEMA=Fl(),je.CORE_SCHEMA=xl(),je.DEFAULT_SCHEMA=Ki(),je.load=t.load,je.loadAll=t.loadAll,je.dump=u.dump,je.YAMLException=hr(),je.types={binary:Ul(),float:Nl(),map:bl(),null:Il(),pairs:ql(),set:Ml(),timestamp:Ll(),bool:Pl(),int:Dl(),merge:$l(),omap:kl(),seq:Cl(),str:Rl()},je.safeLoad=h("safeLoad","load"),je.safeLoadAll=h("safeLoadAll","loadAll"),je.safeDump=h("safeDump","dump"),je}var Vt={},Ba;function Bc(){if(Ba)return Vt;Ba=1,Object.defineProperty(Vt,"__esModule",{value:!0}),Vt.Lazy=void 0;class t{constructor(h){this._value=null,this.creator=h}get hasValue(){return this.creator==null}get value(){if(this.creator==null)return this._value;const h=this.creator();return this.value=h,h}set value(h){this._value=h,this.creator=null}}return Vt.Lazy=t,Vt}var Dr={exports:{}},Kn,Ha;function Ur(){if(Ha)return Kn;Ha=1;const t="2.0.0",u=256,h=Number.MAX_SAFE_INTEGER||9007199254740991,f=16,c=u-6;return Kn={MAX_LENGTH:u,MAX_SAFE_COMPONENT_LENGTH:f,MAX_SAFE_BUILD_LENGTH:c,MAX_SAFE_INTEGER:h,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:t,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},Kn}var Jn,ja;function kr(){return ja||(ja=1,Jn=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...u)=>console.error("SEMVER",...u):()=>{}),Jn}var Ga;function pr(){return Ga||(Ga=1,function(t,u){const{MAX_SAFE_COMPONENT_LENGTH:h,MAX_SAFE_BUILD_LENGTH:f,MAX_LENGTH:c}=Ur(),s=kr();u=t.exports={};const o=u.re=[],d=u.safeRe=[],n=u.src=[],l=u.safeSrc=[],i=u.t={};let a=0;const r="[a-zA-Z0-9-]",p=[["\\s",1],["\\d",c],[r,f]],g=m=>{for(const[A,C]of p)m=m.split(`${A}*`).join(`${A}{0,${C}}`).split(`${A}+`).join(`${A}{1,${C}}`);return m},E=(m,A,C)=>{const O=g(A),I=a++;s(m,I,A),i[m]=I,n[I]=A,l[I]=O,o[I]=new RegExp(A,C?"g":void 0),d[I]=new RegExp(O,C?"g":void 0)};E("NUMERICIDENTIFIER","0|[1-9]\\d*"),E("NUMERICIDENTIFIERLOOSE","\\d+"),E("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${r}*`),E("MAINVERSION",`(${n[i.NUMERICIDENTIFIER]})\\.(${n[i.NUMERICIDENTIFIER]})\\.(${n[i.NUMERICIDENTIFIER]})`),E("MAINVERSIONLOOSE",`(${n[i.NUMERICIDENTIFIERLOOSE]})\\.(${n[i.NUMERICIDENTIFIERLOOSE]})\\.(${n[i.NUMERICIDENTIFIERLOOSE]})`),E("PRERELEASEIDENTIFIER",`(?:${n[i.NUMERICIDENTIFIER]}|${n[i.NONNUMERICIDENTIFIER]})`),E("PRERELEASEIDENTIFIERLOOSE",`(?:${n[i.NUMERICIDENTIFIERLOOSE]}|${n[i.NONNUMERICIDENTIFIER]})`),E("PRERELEASE",`(?:-(${n[i.PRERELEASEIDENTIFIER]}(?:\\.${n[i.PRERELEASEIDENTIFIER]})*))`),E("PRERELEASELOOSE",`(?:-?(${n[i.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${n[i.PRERELEASEIDENTIFIERLOOSE]})*))`),E("BUILDIDENTIFIER",`${r}+`),E("BUILD",`(?:\\+(${n[i.BUILDIDENTIFIER]}(?:\\.${n[i.BUILDIDENTIFIER]})*))`),E("FULLPLAIN",`v?${n[i.MAINVERSION]}${n[i.PRERELEASE]}?${n[i.BUILD]}?`),E("FULL",`^${n[i.FULLPLAIN]}$`),E("LOOSEPLAIN",`[v=\\s]*${n[i.MAINVERSIONLOOSE]}${n[i.PRERELEASELOOSE]}?${n[i.BUILD]}?`),E("LOOSE",`^${n[i.LOOSEPLAIN]}$`),E("GTLT","((?:<|>)?=?)"),E("XRANGEIDENTIFIERLOOSE",`${n[i.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),E("XRANGEIDENTIFIER",`${n[i.NUMERICIDENTIFIER]}|x|X|\\*`),E("XRANGEPLAIN",`[v=\\s]*(${n[i.XRANGEIDENTIFIER]})(?:\\.(${n[i.XRANGEIDENTIFIER]})(?:\\.(${n[i.XRANGEIDENTIFIER]})(?:${n[i.PRERELEASE]})?${n[i.BUILD]}?)?)?`),E("XRANGEPLAINLOOSE",`[v=\\s]*(${n[i.XRANGEIDENTIFIERLOOSE]})(?:\\.(${n[i.XRANGEIDENTIFIERLOOSE]})(?:\\.(${n[i.XRANGEIDENTIFIERLOOSE]})(?:${n[i.PRERELEASELOOSE]})?${n[i.BUILD]}?)?)?`),E("XRANGE",`^${n[i.GTLT]}\\s*${n[i.XRANGEPLAIN]}$`),E("XRANGELOOSE",`^${n[i.GTLT]}\\s*${n[i.XRANGEPLAINLOOSE]}$`),E("COERCEPLAIN",`(^|[^\\d])(\\d{1,${h}})(?:\\.(\\d{1,${h}}))?(?:\\.(\\d{1,${h}}))?`),E("COERCE",`${n[i.COERCEPLAIN]}(?:$|[^\\d])`),E("COERCEFULL",n[i.COERCEPLAIN]+`(?:${n[i.PRERELEASE]})?(?:${n[i.BUILD]})?(?:$|[^\\d])`),E("COERCERTL",n[i.COERCE],!0),E("COERCERTLFULL",n[i.COERCEFULL],!0),E("LONETILDE","(?:~>?)"),E("TILDETRIM",`(\\s*)${n[i.LONETILDE]}\\s+`,!0),u.tildeTrimReplace="$1~",E("TILDE",`^${n[i.LONETILDE]}${n[i.XRANGEPLAIN]}$`),E("TILDELOOSE",`^${n[i.LONETILDE]}${n[i.XRANGEPLAINLOOSE]}$`),E("LONECARET","(?:\\^)"),E("CARETTRIM",`(\\s*)${n[i.LONECARET]}\\s+`,!0),u.caretTrimReplace="$1^",E("CARET",`^${n[i.LONECARET]}${n[i.XRANGEPLAIN]}$`),E("CARETLOOSE",`^${n[i.LONECARET]}${n[i.XRANGEPLAINLOOSE]}$`),E("COMPARATORLOOSE",`^${n[i.GTLT]}\\s*(${n[i.LOOSEPLAIN]})$|^$`),E("COMPARATOR",`^${n[i.GTLT]}\\s*(${n[i.FULLPLAIN]})$|^$`),E("COMPARATORTRIM",`(\\s*)${n[i.GTLT]}\\s*(${n[i.LOOSEPLAIN]}|${n[i.XRANGEPLAIN]})`,!0),u.comparatorTrimReplace="$1$2$3",E("HYPHENRANGE",`^\\s*(${n[i.XRANGEPLAIN]})\\s+-\\s+(${n[i.XRANGEPLAIN]})\\s*$`),E("HYPHENRANGELOOSE",`^\\s*(${n[i.XRANGEPLAINLOOSE]})\\s+-\\s+(${n[i.XRANGEPLAINLOOSE]})\\s*$`),E("STAR","(<|>)?=?\\s*\\*"),E("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),E("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(Dr,Dr.exports)),Dr.exports}var Qn,Va;function Qi(){if(Va)return Qn;Va=1;const t=Object.freeze({loose:!0}),u=Object.freeze({});return Qn=f=>f?typeof f!="object"?t:f:u,Qn}var Zn,Wa;function Bl(){if(Wa)return Zn;Wa=1;const t=/^[0-9]+$/,u=(f,c)=>{const s=t.test(f),o=t.test(c);return s&&o&&(f=+f,c=+c),f===c?0:s&&!o?-1:o&&!s?1:f<c?-1:1};return Zn={compareIdentifiers:u,rcompareIdentifiers:(f,c)=>u(c,f)},Zn}var ei,Ya;function Ve(){if(Ya)return ei;Ya=1;const t=kr(),{MAX_LENGTH:u,MAX_SAFE_INTEGER:h}=Ur(),{safeRe:f,safeSrc:c,t:s}=pr(),o=Qi(),{compareIdentifiers:d}=Bl();class n{constructor(i,a){if(a=o(a),i instanceof n){if(i.loose===!!a.loose&&i.includePrerelease===!!a.includePrerelease)return i;i=i.version}else if(typeof i!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof i}".`);if(i.length>u)throw new TypeError(`version is longer than ${u} characters`);t("SemVer",i,a),this.options=a,this.loose=!!a.loose,this.includePrerelease=!!a.includePrerelease;const r=i.trim().match(a.loose?f[s.LOOSE]:f[s.FULL]);if(!r)throw new TypeError(`Invalid Version: ${i}`);if(this.raw=i,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>h||this.major<0)throw new TypeError("Invalid major version");if(this.minor>h||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>h||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(p=>{if(/^[0-9]+$/.test(p)){const g=+p;if(g>=0&&g<h)return g}return p}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(i){if(t("SemVer.compare",this.version,this.options,i),!(i instanceof n)){if(typeof i=="string"&&i===this.version)return 0;i=new n(i,this.options)}return i.version===this.version?0:this.compareMain(i)||this.comparePre(i)}compareMain(i){return i instanceof n||(i=new n(i,this.options)),d(this.major,i.major)||d(this.minor,i.minor)||d(this.patch,i.patch)}comparePre(i){if(i instanceof n||(i=new n(i,this.options)),this.prerelease.length&&!i.prerelease.length)return-1;if(!this.prerelease.length&&i.prerelease.length)return 1;if(!this.prerelease.length&&!i.prerelease.length)return 0;let a=0;do{const r=this.prerelease[a],p=i.prerelease[a];if(t("prerelease compare",a,r,p),r===void 0&&p===void 0)return 0;if(p===void 0)return 1;if(r===void 0)return-1;if(r===p)continue;return d(r,p)}while(++a)}compareBuild(i){i instanceof n||(i=new n(i,this.options));let a=0;do{const r=this.build[a],p=i.build[a];if(t("build compare",a,r,p),r===void 0&&p===void 0)return 0;if(p===void 0)return 1;if(r===void 0)return-1;if(r===p)continue;return d(r,p)}while(++a)}inc(i,a,r){if(i.startsWith("pre")){if(!a&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(a){const p=new RegExp(`^${this.options.loose?c[s.PRERELEASELOOSE]:c[s.PRERELEASE]}$`),g=`-${a}`.match(p);if(!g||g[1]!==a)throw new Error(`invalid identifier: ${a}`)}}switch(i){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",a,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",a,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",a,r),this.inc("pre",a,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",a,r),this.inc("pre",a,r);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const p=Number(r)?1:0;if(this.prerelease.length===0)this.prerelease=[p];else{let g=this.prerelease.length;for(;--g>=0;)typeof this.prerelease[g]=="number"&&(this.prerelease[g]++,g=-2);if(g===-1){if(a===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(p)}}if(a){let g=[a,p];r===!1&&(g=[a]),d(this.prerelease[0],a)===0?isNaN(this.prerelease[1])&&(this.prerelease=g):this.prerelease=g}break}default:throw new Error(`invalid increment argument: ${i}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return ei=n,ei}var ti,za;function Ut(){if(za)return ti;za=1;const t=Ve();return ti=(h,f,c=!1)=>{if(h instanceof t)return h;try{return new t(h,f)}catch(s){if(!c)return null;throw s}},ti}var ri,Xa;function Hc(){if(Xa)return ri;Xa=1;const t=Ut();return ri=(h,f)=>{const c=t(h,f);return c?c.version:null},ri}var ni,Ka;function jc(){if(Ka)return ni;Ka=1;const t=Ut();return ni=(h,f)=>{const c=t(h.trim().replace(/^[=v]+/,""),f);return c?c.version:null},ni}var ii,Ja;function Gc(){if(Ja)return ii;Ja=1;const t=Ve();return ii=(h,f,c,s,o)=>{typeof c=="string"&&(o=s,s=c,c=void 0);try{return new t(h instanceof t?h.version:h,c).inc(f,s,o).version}catch{return null}},ii}var oi,Qa;function Vc(){if(Qa)return oi;Qa=1;const t=Ut();return oi=(h,f)=>{const c=t(h,null,!0),s=t(f,null,!0),o=c.compare(s);if(o===0)return null;const d=o>0,n=d?c:s,l=d?s:c,i=!!n.prerelease.length;if(!!l.prerelease.length&&!i){if(!l.patch&&!l.minor)return"major";if(l.compareMain(n)===0)return l.minor&&!l.patch?"minor":"patch"}const r=i?"pre":"";return c.major!==s.major?r+"major":c.minor!==s.minor?r+"minor":c.patch!==s.patch?r+"patch":"prerelease"},oi}var ai,Za;function Wc(){if(Za)return ai;Za=1;const t=Ve();return ai=(h,f)=>new t(h,f).major,ai}var si,es;function Yc(){if(es)return si;es=1;const t=Ve();return si=(h,f)=>new t(h,f).minor,si}var li,ts;function zc(){if(ts)return li;ts=1;const t=Ve();return li=(h,f)=>new t(h,f).patch,li}var ui,rs;function Xc(){if(rs)return ui;rs=1;const t=Ut();return ui=(h,f)=>{const c=t(h,f);return c&&c.prerelease.length?c.prerelease:null},ui}var ci,ns;function tt(){if(ns)return ci;ns=1;const t=Ve();return ci=(h,f,c)=>new t(h,c).compare(new t(f,c)),ci}var fi,is;function Kc(){if(is)return fi;is=1;const t=tt();return fi=(h,f,c)=>t(f,h,c),fi}var di,os;function Jc(){if(os)return di;os=1;const t=tt();return di=(h,f)=>t(h,f,!0),di}var hi,as;function Zi(){if(as)return hi;as=1;const t=Ve();return hi=(h,f,c)=>{const s=new t(h,c),o=new t(f,c);return s.compare(o)||s.compareBuild(o)},hi}var pi,ss;function Qc(){if(ss)return pi;ss=1;const t=Zi();return pi=(h,f)=>h.sort((c,s)=>t(c,s,f)),pi}var mi,ls;function Zc(){if(ls)return mi;ls=1;const t=Zi();return mi=(h,f)=>h.sort((c,s)=>t(s,c,f)),mi}var gi,us;function qr(){if(us)return gi;us=1;const t=tt();return gi=(h,f,c)=>t(h,f,c)>0,gi}var vi,cs;function eo(){if(cs)return vi;cs=1;const t=tt();return vi=(h,f,c)=>t(h,f,c)<0,vi}var Ei,fs;function Hl(){if(fs)return Ei;fs=1;const t=tt();return Ei=(h,f,c)=>t(h,f,c)===0,Ei}var yi,ds;function jl(){if(ds)return yi;ds=1;const t=tt();return yi=(h,f,c)=>t(h,f,c)!==0,yi}var wi,hs;function to(){if(hs)return wi;hs=1;const t=tt();return wi=(h,f,c)=>t(h,f,c)>=0,wi}var _i,ps;function ro(){if(ps)return _i;ps=1;const t=tt();return _i=(h,f,c)=>t(h,f,c)<=0,_i}var Si,ms;function Gl(){if(ms)return Si;ms=1;const t=Hl(),u=jl(),h=qr(),f=to(),c=eo(),s=ro();return Si=(d,n,l,i)=>{switch(n){case"===":return typeof d=="object"&&(d=d.version),typeof l=="object"&&(l=l.version),d===l;case"!==":return typeof d=="object"&&(d=d.version),typeof l=="object"&&(l=l.version),d!==l;case"":case"=":case"==":return t(d,l,i);case"!=":return u(d,l,i);case">":return h(d,l,i);case">=":return f(d,l,i);case"<":return c(d,l,i);case"<=":return s(d,l,i);default:throw new TypeError(`Invalid operator: ${n}`)}},Si}var Ai,gs;function ef(){if(gs)return Ai;gs=1;const t=Ve(),u=Ut(),{safeRe:h,t:f}=pr();return Ai=(s,o)=>{if(s instanceof t)return s;if(typeof s=="number"&&(s=String(s)),typeof s!="string")return null;o=o||{};let d=null;if(!o.rtl)d=s.match(o.includePrerelease?h[f.COERCEFULL]:h[f.COERCE]);else{const p=o.includePrerelease?h[f.COERCERTLFULL]:h[f.COERCERTL];let g;for(;(g=p.exec(s))&&(!d||d.index+d[0].length!==s.length);)(!d||g.index+g[0].length!==d.index+d[0].length)&&(d=g),p.lastIndex=g.index+g[1].length+g[2].length;p.lastIndex=-1}if(d===null)return null;const n=d[2],l=d[3]||"0",i=d[4]||"0",a=o.includePrerelease&&d[5]?`-${d[5]}`:"",r=o.includePrerelease&&d[6]?`+${d[6]}`:"";return u(`${n}.${l}.${i}${a}${r}`,o)},Ai}var Ti,vs;function tf(){if(vs)return Ti;vs=1;class t{constructor(){this.max=1e3,this.map=new Map}get(h){const f=this.map.get(h);if(f!==void 0)return this.map.delete(h),this.map.set(h,f),f}delete(h){return this.map.delete(h)}set(h,f){if(!this.delete(h)&&f!==void 0){if(this.map.size>=this.max){const s=this.map.keys().next().value;this.delete(s)}this.map.set(h,f)}return this}}return Ti=t,Ti}var Ri,Es;function rt(){if(Es)return Ri;Es=1;const t=/\s+/g;class u{constructor(P,F){if(F=c(F),P instanceof u)return P.loose===!!F.loose&&P.includePrerelease===!!F.includePrerelease?P:new u(P.raw,F);if(P instanceof s)return this.raw=P.value,this.set=[[P]],this.formatted=void 0,this;if(this.options=F,this.loose=!!F.loose,this.includePrerelease=!!F.includePrerelease,this.raw=P.trim().replace(t," "),this.set=this.raw.split("||").map(U=>this.parseRange(U.trim())).filter(U=>U.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const U=this.set[0];if(this.set=this.set.filter(J=>!E(J[0])),this.set.length===0)this.set=[U];else if(this.set.length>1){for(const J of this.set)if(J.length===1&&m(J[0])){this.set=[J];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let P=0;P<this.set.length;P++){P>0&&(this.formatted+="||");const F=this.set[P];for(let U=0;U<F.length;U++)U>0&&(this.formatted+=" "),this.formatted+=F[U].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(P){const U=((this.options.includePrerelease&&p)|(this.options.loose&&g))+":"+P,J=f.get(U);if(J)return J;const V=this.options.loose,ne=V?n[l.HYPHENRANGELOOSE]:n[l.HYPHENRANGE];P=P.replace(ne,L(this.options.includePrerelease)),o("hyphen replace",P),P=P.replace(n[l.COMPARATORTRIM],i),o("comparator trim",P),P=P.replace(n[l.TILDETRIM],a),o("tilde trim",P),P=P.replace(n[l.CARETTRIM],r),o("caret trim",P);let ce=P.split(" ").map(K=>C(K,this.options)).join(" ").split(/\s+/).map(K=>$(K,this.options));V&&(ce=ce.filter(K=>(o("loose invalid filter",K,this.options),!!K.match(n[l.COMPARATORLOOSE])))),o("range list",ce);const ue=new Map,ae=ce.map(K=>new s(K,this.options));for(const K of ae){if(E(K))return[K];ue.set(K.value,K)}ue.size>1&&ue.has("")&&ue.delete("");const Ae=[...ue.values()];return f.set(U,Ae),Ae}intersects(P,F){if(!(P instanceof u))throw new TypeError("a Range is required");return this.set.some(U=>A(U,F)&&P.set.some(J=>A(J,F)&&U.every(V=>J.every(ne=>V.intersects(ne,F)))))}test(P){if(!P)return!1;if(typeof P=="string")try{P=new d(P,this.options)}catch{return!1}for(let F=0;F<this.set.length;F++)if(k(this.set[F],P,this.options))return!0;return!1}}Ri=u;const h=tf(),f=new h,c=Qi(),s=Mr(),o=kr(),d=Ve(),{safeRe:n,t:l,comparatorTrimReplace:i,tildeTrimReplace:a,caretTrimReplace:r}=pr(),{FLAG_INCLUDE_PRERELEASE:p,FLAG_LOOSE:g}=Ur(),E=D=>D.value==="<0.0.0-0",m=D=>D.value==="",A=(D,P)=>{let F=!0;const U=D.slice();let J=U.pop();for(;F&&U.length;)F=U.every(V=>J.intersects(V,P)),J=U.pop();return F},C=(D,P)=>(o("comp",D,P),D=R(D,P),o("caret",D),D=I(D,P),o("tildes",D),D=T(D,P),o("xrange",D),D=q(D,P),o("stars",D),D),O=D=>!D||D.toLowerCase()==="x"||D==="*",I=(D,P)=>D.trim().split(/\s+/).map(F=>j(F,P)).join(" "),j=(D,P)=>{const F=P.loose?n[l.TILDELOOSE]:n[l.TILDE];return D.replace(F,(U,J,V,ne,ce)=>{o("tilde",D,U,J,V,ne,ce);let ue;return O(J)?ue="":O(V)?ue=`>=${J}.0.0 <${+J+1}.0.0-0`:O(ne)?ue=`>=${J}.${V}.0 <${J}.${+V+1}.0-0`:ce?(o("replaceTilde pr",ce),ue=`>=${J}.${V}.${ne}-${ce} <${J}.${+V+1}.0-0`):ue=`>=${J}.${V}.${ne} <${J}.${+V+1}.0-0`,o("tilde return",ue),ue})},R=(D,P)=>D.trim().split(/\s+/).map(F=>_(F,P)).join(" "),_=(D,P)=>{o("caret",D,P);const F=P.loose?n[l.CARETLOOSE]:n[l.CARET],U=P.includePrerelease?"-0":"";return D.replace(F,(J,V,ne,ce,ue)=>{o("caret",D,J,V,ne,ce,ue);let ae;return O(V)?ae="":O(ne)?ae=`>=${V}.0.0${U} <${+V+1}.0.0-0`:O(ce)?V==="0"?ae=`>=${V}.${ne}.0${U} <${V}.${+ne+1}.0-0`:ae=`>=${V}.${ne}.0${U} <${+V+1}.0.0-0`:ue?(o("replaceCaret pr",ue),V==="0"?ne==="0"?ae=`>=${V}.${ne}.${ce}-${ue} <${V}.${ne}.${+ce+1}-0`:ae=`>=${V}.${ne}.${ce}-${ue} <${V}.${+ne+1}.0-0`:ae=`>=${V}.${ne}.${ce}-${ue} <${+V+1}.0.0-0`):(o("no pr"),V==="0"?ne==="0"?ae=`>=${V}.${ne}.${ce}${U} <${V}.${ne}.${+ce+1}-0`:ae=`>=${V}.${ne}.${ce}${U} <${V}.${+ne+1}.0-0`:ae=`>=${V}.${ne}.${ce} <${+V+1}.0.0-0`),o("caret return",ae),ae})},T=(D,P)=>(o("replaceXRanges",D,P),D.split(/\s+/).map(F=>y(F,P)).join(" ")),y=(D,P)=>{D=D.trim();const F=P.loose?n[l.XRANGELOOSE]:n[l.XRANGE];return D.replace(F,(U,J,V,ne,ce,ue)=>{o("xRange",D,U,J,V,ne,ce,ue);const ae=O(V),Ae=ae||O(ne),K=Ae||O(ce),Ee=K;return J==="="&&Ee&&(J=""),ue=P.includePrerelease?"-0":"",ae?J===">"||J==="<"?U="<0.0.0-0":U="*":J&&Ee?(Ae&&(ne=0),ce=0,J===">"?(J=">=",Ae?(V=+V+1,ne=0,ce=0):(ne=+ne+1,ce=0)):J==="<="&&(J="<",Ae?V=+V+1:ne=+ne+1),J==="<"&&(ue="-0"),U=`${J+V}.${ne}.${ce}${ue}`):Ae?U=`>=${V}.0.0${ue} <${+V+1}.0.0-0`:K&&(U=`>=${V}.${ne}.0${ue} <${V}.${+ne+1}.0-0`),o("xRange return",U),U})},q=(D,P)=>(o("replaceStars",D,P),D.trim().replace(n[l.STAR],"")),$=(D,P)=>(o("replaceGTE0",D,P),D.trim().replace(n[P.includePrerelease?l.GTE0PRE:l.GTE0],"")),L=D=>(P,F,U,J,V,ne,ce,ue,ae,Ae,K,Ee)=>(O(U)?F="":O(J)?F=`>=${U}.0.0${D?"-0":""}`:O(V)?F=`>=${U}.${J}.0${D?"-0":""}`:ne?F=`>=${F}`:F=`>=${F}${D?"-0":""}`,O(ae)?ue="":O(Ae)?ue=`<${+ae+1}.0.0-0`:O(K)?ue=`<${ae}.${+Ae+1}.0-0`:Ee?ue=`<=${ae}.${Ae}.${K}-${Ee}`:D?ue=`<${ae}.${Ae}.${+K+1}-0`:ue=`<=${ue}`,`${F} ${ue}`.trim()),k=(D,P,F)=>{for(let U=0;U<D.length;U++)if(!D[U].test(P))return!1;if(P.prerelease.length&&!F.includePrerelease){for(let U=0;U<D.length;U++)if(o(D[U].semver),D[U].semver!==s.ANY&&D[U].semver.prerelease.length>0){const J=D[U].semver;if(J.major===P.major&&J.minor===P.minor&&J.patch===P.patch)return!0}return!1}return!0};return Ri}var Ci,ys;function Mr(){if(ys)return Ci;ys=1;const t=Symbol("SemVer ANY");class u{static get ANY(){return t}constructor(i,a){if(a=h(a),i instanceof u){if(i.loose===!!a.loose)return i;i=i.value}i=i.trim().split(/\s+/).join(" "),o("comparator",i,a),this.options=a,this.loose=!!a.loose,this.parse(i),this.semver===t?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(i){const a=this.options.loose?f[c.COMPARATORLOOSE]:f[c.COMPARATOR],r=i.match(a);if(!r)throw new TypeError(`Invalid comparator: ${i}`);this.operator=r[1]!==void 0?r[1]:"",this.operator==="="&&(this.operator=""),r[2]?this.semver=new d(r[2],this.options.loose):this.semver=t}toString(){return this.value}test(i){if(o("Comparator.test",i,this.options.loose),this.semver===t||i===t)return!0;if(typeof i=="string")try{i=new d(i,this.options)}catch{return!1}return s(i,this.operator,this.semver,this.options)}intersects(i,a){if(!(i instanceof u))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new n(i.value,a).test(this.value):i.operator===""?i.value===""?!0:new n(this.value,a).test(i.semver):(a=h(a),a.includePrerelease&&(this.value==="<0.0.0-0"||i.value==="<0.0.0-0")||!a.includePrerelease&&(this.value.startsWith("<0.0.0")||i.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&i.operator.startsWith(">")||this.operator.startsWith("<")&&i.operator.startsWith("<")||this.semver.version===i.semver.version&&this.operator.includes("=")&&i.operator.includes("=")||s(this.semver,"<",i.semver,a)&&this.operator.startsWith(">")&&i.operator.startsWith("<")||s(this.semver,">",i.semver,a)&&this.operator.startsWith("<")&&i.operator.startsWith(">")))}}Ci=u;const h=Qi(),{safeRe:f,t:c}=pr(),s=Gl(),o=kr(),d=Ve(),n=rt();return Ci}var bi,ws;function Br(){if(ws)return bi;ws=1;const t=rt();return bi=(h,f,c)=>{try{f=new t(f,c)}catch{return!1}return f.test(h)},bi}var Oi,_s;function rf(){if(_s)return Oi;_s=1;const t=rt();return Oi=(h,f)=>new t(h,f).set.map(c=>c.map(s=>s.value).join(" ").trim().split(" ")),Oi}var Ii,Ss;function nf(){if(Ss)return Ii;Ss=1;const t=Ve(),u=rt();return Ii=(f,c,s)=>{let o=null,d=null,n=null;try{n=new u(c,s)}catch{return null}return f.forEach(l=>{n.test(l)&&(!o||d.compare(l)===-1)&&(o=l,d=new t(o,s))}),o},Ii}var Pi,As;function of(){if(As)return Pi;As=1;const t=Ve(),u=rt();return Pi=(f,c,s)=>{let o=null,d=null,n=null;try{n=new u(c,s)}catch{return null}return f.forEach(l=>{n.test(l)&&(!o||d.compare(l)===1)&&(o=l,d=new t(o,s))}),o},Pi}var Di,Ts;function af(){if(Ts)return Di;Ts=1;const t=Ve(),u=rt(),h=qr();return Di=(c,s)=>{c=new u(c,s);let o=new t("0.0.0");if(c.test(o)||(o=new t("0.0.0-0"),c.test(o)))return o;o=null;for(let d=0;d<c.set.length;++d){const n=c.set[d];let l=null;n.forEach(i=>{const a=new t(i.semver.version);switch(i.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!l||h(a,l))&&(l=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${i.operator}`)}}),l&&(!o||h(o,l))&&(o=l)}return o&&c.test(o)?o:null},Di}var Ni,Rs;function sf(){if(Rs)return Ni;Rs=1;const t=rt();return Ni=(h,f)=>{try{return new t(h,f).range||"*"}catch{return null}},Ni}var Fi,Cs;function no(){if(Cs)return Fi;Cs=1;const t=Ve(),u=Mr(),{ANY:h}=u,f=rt(),c=Br(),s=qr(),o=eo(),d=ro(),n=to();return Fi=(i,a,r,p)=>{i=new t(i,p),a=new f(a,p);let g,E,m,A,C;switch(r){case">":g=s,E=d,m=o,A=">",C=">=";break;case"<":g=o,E=n,m=s,A="<",C="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(c(i,a,p))return!1;for(let O=0;O<a.set.length;++O){const I=a.set[O];let j=null,R=null;if(I.forEach(_=>{_.semver===h&&(_=new u(">=0.0.0")),j=j||_,R=R||_,g(_.semver,j.semver,p)?j=_:m(_.semver,R.semver,p)&&(R=_)}),j.operator===A||j.operator===C||(!R.operator||R.operator===A)&&E(i,R.semver))return!1;if(R.operator===C&&m(i,R.semver))return!1}return!0},Fi}var xi,bs;function lf(){if(bs)return xi;bs=1;const t=no();return xi=(h,f,c)=>t(h,f,">",c),xi}var Li,Os;function uf(){if(Os)return Li;Os=1;const t=no();return Li=(h,f,c)=>t(h,f,"<",c),Li}var $i,Is;function cf(){if(Is)return $i;Is=1;const t=rt();return $i=(h,f,c)=>(h=new t(h,c),f=new t(f,c),h.intersects(f,c)),$i}var Ui,Ps;function ff(){if(Ps)return Ui;Ps=1;const t=Br(),u=tt();return Ui=(h,f,c)=>{const s=[];let o=null,d=null;const n=h.sort((r,p)=>u(r,p,c));for(const r of n)t(r,f,c)?(d=r,o||(o=r)):(d&&s.push([o,d]),d=null,o=null);o&&s.push([o,null]);const l=[];for(const[r,p]of s)r===p?l.push(r):!p&&r===n[0]?l.push("*"):p?r===n[0]?l.push(`<=${p}`):l.push(`${r} - ${p}`):l.push(`>=${r}`);const i=l.join(" || "),a=typeof f.raw=="string"?f.raw:String(f);return i.length<a.length?i:f},Ui}var ki,Ds;function df(){if(Ds)return ki;Ds=1;const t=rt(),u=Mr(),{ANY:h}=u,f=Br(),c=tt(),s=(a,r,p={})=>{if(a===r)return!0;a=new t(a,p),r=new t(r,p);let g=!1;e:for(const E of a.set){for(const m of r.set){const A=n(E,m,p);if(g=g||A!==null,A)continue e}if(g)return!1}return!0},o=[new u(">=0.0.0-0")],d=[new u(">=0.0.0")],n=(a,r,p)=>{if(a===r)return!0;if(a.length===1&&a[0].semver===h){if(r.length===1&&r[0].semver===h)return!0;p.includePrerelease?a=o:a=d}if(r.length===1&&r[0].semver===h){if(p.includePrerelease)return!0;r=d}const g=new Set;let E,m;for(const T of a)T.operator===">"||T.operator===">="?E=l(E,T,p):T.operator==="<"||T.operator==="<="?m=i(m,T,p):g.add(T.semver);if(g.size>1)return null;let A;if(E&&m){if(A=c(E.semver,m.semver,p),A>0)return null;if(A===0&&(E.operator!==">="||m.operator!=="<="))return null}for(const T of g){if(E&&!f(T,String(E),p)||m&&!f(T,String(m),p))return null;for(const y of r)if(!f(T,String(y),p))return!1;return!0}let C,O,I,j,R=m&&!p.includePrerelease&&m.semver.prerelease.length?m.semver:!1,_=E&&!p.includePrerelease&&E.semver.prerelease.length?E.semver:!1;R&&R.prerelease.length===1&&m.operator==="<"&&R.prerelease[0]===0&&(R=!1);for(const T of r){if(j=j||T.operator===">"||T.operator===">=",I=I||T.operator==="<"||T.operator==="<=",E){if(_&&T.semver.prerelease&&T.semver.prerelease.length&&T.semver.major===_.major&&T.semver.minor===_.minor&&T.semver.patch===_.patch&&(_=!1),T.operator===">"||T.operator===">="){if(C=l(E,T,p),C===T&&C!==E)return!1}else if(E.operator===">="&&!f(E.semver,String(T),p))return!1}if(m){if(R&&T.semver.prerelease&&T.semver.prerelease.length&&T.semver.major===R.major&&T.semver.minor===R.minor&&T.semver.patch===R.patch&&(R=!1),T.operator==="<"||T.operator==="<="){if(O=i(m,T,p),O===T&&O!==m)return!1}else if(m.operator==="<="&&!f(m.semver,String(T),p))return!1}if(!T.operator&&(m||E)&&A!==0)return!1}return!(E&&I&&!m&&A!==0||m&&j&&!E&&A!==0||_||R)},l=(a,r,p)=>{if(!a)return r;const g=c(a.semver,r.semver,p);return g>0?a:g<0||r.operator===">"&&a.operator===">="?r:a},i=(a,r,p)=>{if(!a)return r;const g=c(a.semver,r.semver,p);return g<0?a:g>0||r.operator==="<"&&a.operator==="<="?r:a};return ki=s,ki}var qi,Ns;function Vl(){if(Ns)return qi;Ns=1;const t=pr(),u=Ur(),h=Ve(),f=Bl(),c=Ut(),s=Hc(),o=jc(),d=Gc(),n=Vc(),l=Wc(),i=Yc(),a=zc(),r=Xc(),p=tt(),g=Kc(),E=Jc(),m=Zi(),A=Qc(),C=Zc(),O=qr(),I=eo(),j=Hl(),R=jl(),_=to(),T=ro(),y=Gl(),q=ef(),$=Mr(),L=rt(),k=Br(),D=rf(),P=nf(),F=of(),U=af(),J=sf(),V=no(),ne=lf(),ce=uf(),ue=cf(),ae=ff(),Ae=df();return qi={parse:c,valid:s,clean:o,inc:d,diff:n,major:l,minor:i,patch:a,prerelease:r,compare:p,rcompare:g,compareLoose:E,compareBuild:m,sort:A,rsort:C,gt:O,lt:I,eq:j,neq:R,gte:_,lte:T,cmp:y,coerce:q,Comparator:$,Range:L,satisfies:k,toComparators:D,maxSatisfying:P,minSatisfying:F,minVersion:U,validRange:J,outside:V,gtr:ne,ltr:ce,intersects:ue,simplifyRange:ae,subset:Ae,SemVer:h,re:t.re,src:t.src,tokens:t.t,SEMVER_SPEC_VERSION:u.SEMVER_SPEC_VERSION,RELEASE_TYPES:u.RELEASE_TYPES,compareIdentifiers:f.compareIdentifiers,rcompareIdentifiers:f.rcompareIdentifiers},qi}var Dt={},lr={exports:{}};lr.exports;var Fs;function hf(){return Fs||(Fs=1,function(t,u){var h=200,f="__lodash_hash_undefined__",c=1,s=2,o=9007199254740991,d="[object Arguments]",n="[object Array]",l="[object AsyncFunction]",i="[object Boolean]",a="[object Date]",r="[object Error]",p="[object Function]",g="[object GeneratorFunction]",E="[object Map]",m="[object Number]",A="[object Null]",C="[object Object]",O="[object Promise]",I="[object Proxy]",j="[object RegExp]",R="[object Set]",_="[object String]",T="[object Symbol]",y="[object Undefined]",q="[object WeakMap]",$="[object ArrayBuffer]",L="[object DataView]",k="[object Float32Array]",D="[object Float64Array]",P="[object Int8Array]",F="[object Int16Array]",U="[object Int32Array]",J="[object Uint8Array]",V="[object Uint8ClampedArray]",ne="[object Uint16Array]",ce="[object Uint32Array]",ue=/[\\^$.*+?()[\]{}|]/g,ae=/^\[object .+?Constructor\]$/,Ae=/^(?:0|[1-9]\d*)$/,K={};K[k]=K[D]=K[P]=K[F]=K[U]=K[J]=K[V]=K[ne]=K[ce]=!0,K[d]=K[n]=K[$]=K[i]=K[L]=K[a]=K[r]=K[p]=K[E]=K[m]=K[C]=K[j]=K[R]=K[_]=K[q]=!1;var Ee=typeof et=="object"&&et&&et.Object===Object&&et,S=typeof self=="object"&&self&&self.Object===Object&&self,v=Ee||S||Function("return this")(),B=u&&!u.nodeType&&u,N=B&&!0&&t&&!t.nodeType&&t,le=N&&N.exports===B,me=le&&Ee.process,pe=function(){try{return me&&me.binding&&me.binding("util")}catch{}}(),_e=pe&&pe.isTypedArray;function ye(b,x){for(var z=-1,se=b==null?0:b.length,Ie=0,Se=[];++z<se;){var Ne=b[z];x(Ne,z,b)&&(Se[Ie++]=Ne)}return Se}function Le(b,x){for(var z=-1,se=x.length,Ie=b.length;++z<se;)b[Ie+z]=x[z];return b}function be(b,x){for(var z=-1,se=b==null?0:b.length;++z<se;)if(x(b[z],z,b))return!0;return!1}function Me(b,x){for(var z=-1,se=Array(b);++z<b;)se[z]=x(z);return se}function gt(b){return function(x){return b(x)}}function at(b,x){return b.has(x)}function e(b,x){return b==null?void 0:b[x]}function M(b){var x=-1,z=Array(b.size);return b.forEach(function(se,Ie){z[++x]=[Ie,se]}),z}function G(b,x){return function(z){return b(x(z))}}function re(b){var x=-1,z=Array(b.size);return b.forEach(function(se){z[++x]=se}),z}var W=Array.prototype,te=Function.prototype,Z=Object.prototype,ie=v["__core-js_shared__"],ge=te.toString,ve=Z.hasOwnProperty,Te=function(){var b=/[^.]+$/.exec(ie&&ie.keys&&ie.keys.IE_PROTO||"");return b?"Symbol(src)_1."+b:""}(),de=Z.toString,$e=RegExp("^"+ge.call(ve).replace(ue,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),w=le?v.Buffer:void 0,H=v.Symbol,X=v.Uint8Array,Y=Z.propertyIsEnumerable,Q=W.splice,ee=H?H.toStringTag:void 0,fe=Object.getOwnPropertySymbols,oe=w?w.isBuffer:void 0,he=G(Object.keys,Object),we=It(v,"DataView"),Oe=It(v,"Map"),De=It(v,"Promise"),Ce=It(v,"Set"),Ot=It(v,"WeakMap"),Qe=It(Object,"create"),vt=wt(we),Zl=wt(Oe),eu=wt(De),tu=wt(Ce),ru=wt(Ot),ao=H?H.prototype:void 0,Hr=ao?ao.valueOf:void 0;function Et(b){var x=-1,z=b==null?0:b.length;for(this.clear();++x<z;){var se=b[x];this.set(se[0],se[1])}}function nu(){this.__data__=Qe?Qe(null):{},this.size=0}function iu(b){var x=this.has(b)&&delete this.__data__[b];return this.size-=x?1:0,x}function ou(b){var x=this.__data__;if(Qe){var z=x[b];return z===f?void 0:z}return ve.call(x,b)?x[b]:void 0}function au(b){var x=this.__data__;return Qe?x[b]!==void 0:ve.call(x,b)}function su(b,x){var z=this.__data__;return this.size+=this.has(b)?0:1,z[b]=Qe&&x===void 0?f:x,this}Et.prototype.clear=nu,Et.prototype.delete=iu,Et.prototype.get=ou,Et.prototype.has=au,Et.prototype.set=su;function st(b){var x=-1,z=b==null?0:b.length;for(this.clear();++x<z;){var se=b[x];this.set(se[0],se[1])}}function lu(){this.__data__=[],this.size=0}function uu(b){var x=this.__data__,z=vr(x,b);if(z<0)return!1;var se=x.length-1;return z==se?x.pop():Q.call(x,z,1),--this.size,!0}function cu(b){var x=this.__data__,z=vr(x,b);return z<0?void 0:x[z][1]}function fu(b){return vr(this.__data__,b)>-1}function du(b,x){var z=this.__data__,se=vr(z,b);return se<0?(++this.size,z.push([b,x])):z[se][1]=x,this}st.prototype.clear=lu,st.prototype.delete=uu,st.prototype.get=cu,st.prototype.has=fu,st.prototype.set=du;function yt(b){var x=-1,z=b==null?0:b.length;for(this.clear();++x<z;){var se=b[x];this.set(se[0],se[1])}}function hu(){this.size=0,this.__data__={hash:new Et,map:new(Oe||st),string:new Et}}function pu(b){var x=Er(this,b).delete(b);return this.size-=x?1:0,x}function mu(b){return Er(this,b).get(b)}function gu(b){return Er(this,b).has(b)}function vu(b,x){var z=Er(this,b),se=z.size;return z.set(b,x),this.size+=z.size==se?0:1,this}yt.prototype.clear=hu,yt.prototype.delete=pu,yt.prototype.get=mu,yt.prototype.has=gu,yt.prototype.set=vu;function gr(b){var x=-1,z=b==null?0:b.length;for(this.__data__=new yt;++x<z;)this.add(b[x])}function Eu(b){return this.__data__.set(b,f),this}function yu(b){return this.__data__.has(b)}gr.prototype.add=gr.prototype.push=Eu,gr.prototype.has=yu;function ct(b){var x=this.__data__=new st(b);this.size=x.size}function wu(){this.__data__=new st,this.size=0}function _u(b){var x=this.__data__,z=x.delete(b);return this.size=x.size,z}function Su(b){return this.__data__.get(b)}function Au(b){return this.__data__.has(b)}function Tu(b,x){var z=this.__data__;if(z instanceof st){var se=z.__data__;if(!Oe||se.length<h-1)return se.push([b,x]),this.size=++z.size,this;z=this.__data__=new yt(se)}return z.set(b,x),this.size=z.size,this}ct.prototype.clear=wu,ct.prototype.delete=_u,ct.prototype.get=Su,ct.prototype.has=Au,ct.prototype.set=Tu;function Ru(b,x){var z=yr(b),se=!z&&Mu(b),Ie=!z&&!se&&jr(b),Se=!z&&!se&&!Ie&&go(b),Ne=z||se||Ie||Se,Ue=Ne?Me(b.length,String):[],ke=Ue.length;for(var Pe in b)ve.call(b,Pe)&&!(Ne&&(Pe=="length"||Ie&&(Pe=="offset"||Pe=="parent")||Se&&(Pe=="buffer"||Pe=="byteLength"||Pe=="byteOffset")||Lu(Pe,ke)))&&Ue.push(Pe);return Ue}function vr(b,x){for(var z=b.length;z--;)if(fo(b[z][0],x))return z;return-1}function Cu(b,x,z){var se=x(b);return yr(b)?se:Le(se,z(b))}function qt(b){return b==null?b===void 0?y:A:ee&&ee in Object(b)?Fu(b):qu(b)}function so(b){return Mt(b)&&qt(b)==d}function lo(b,x,z,se,Ie){return b===x?!0:b==null||x==null||!Mt(b)&&!Mt(x)?b!==b&&x!==x:bu(b,x,z,se,lo,Ie)}function bu(b,x,z,se,Ie,Se){var Ne=yr(b),Ue=yr(x),ke=Ne?n:ft(b),Pe=Ue?n:ft(x);ke=ke==d?C:ke,Pe=Pe==d?C:Pe;var Ye=ke==C,Ze=Pe==C,Be=ke==Pe;if(Be&&jr(b)){if(!jr(x))return!1;Ne=!0,Ye=!1}if(Be&&!Ye)return Se||(Se=new ct),Ne||go(b)?uo(b,x,z,se,Ie,Se):Du(b,x,ke,z,se,Ie,Se);if(!(z&c)){var Xe=Ye&&ve.call(b,"__wrapped__"),Ke=Ze&&ve.call(x,"__wrapped__");if(Xe||Ke){var dt=Xe?b.value():b,lt=Ke?x.value():x;return Se||(Se=new ct),Ie(dt,lt,z,se,Se)}}return Be?(Se||(Se=new ct),Nu(b,x,z,se,Ie,Se)):!1}function Ou(b){if(!mo(b)||Uu(b))return!1;var x=ho(b)?$e:ae;return x.test(wt(b))}function Iu(b){return Mt(b)&&po(b.length)&&!!K[qt(b)]}function Pu(b){if(!ku(b))return he(b);var x=[];for(var z in Object(b))ve.call(b,z)&&z!="constructor"&&x.push(z);return x}function uo(b,x,z,se,Ie,Se){var Ne=z&c,Ue=b.length,ke=x.length;if(Ue!=ke&&!(Ne&&ke>Ue))return!1;var Pe=Se.get(b);if(Pe&&Se.get(x))return Pe==x;var Ye=-1,Ze=!0,Be=z&s?new gr:void 0;for(Se.set(b,x),Se.set(x,b);++Ye<Ue;){var Xe=b[Ye],Ke=x[Ye];if(se)var dt=Ne?se(Ke,Xe,Ye,x,b,Se):se(Xe,Ke,Ye,b,x,Se);if(dt!==void 0){if(dt)continue;Ze=!1;break}if(Be){if(!be(x,function(lt,_t){if(!at(Be,_t)&&(Xe===lt||Ie(Xe,lt,z,se,Se)))return Be.push(_t)})){Ze=!1;break}}else if(!(Xe===Ke||Ie(Xe,Ke,z,se,Se))){Ze=!1;break}}return Se.delete(b),Se.delete(x),Ze}function Du(b,x,z,se,Ie,Se,Ne){switch(z){case L:if(b.byteLength!=x.byteLength||b.byteOffset!=x.byteOffset)return!1;b=b.buffer,x=x.buffer;case $:return!(b.byteLength!=x.byteLength||!Se(new X(b),new X(x)));case i:case a:case m:return fo(+b,+x);case r:return b.name==x.name&&b.message==x.message;case j:case _:return b==x+"";case E:var Ue=M;case R:var ke=se&c;if(Ue||(Ue=re),b.size!=x.size&&!ke)return!1;var Pe=Ne.get(b);if(Pe)return Pe==x;se|=s,Ne.set(b,x);var Ye=uo(Ue(b),Ue(x),se,Ie,Se,Ne);return Ne.delete(b),Ye;case T:if(Hr)return Hr.call(b)==Hr.call(x)}return!1}function Nu(b,x,z,se,Ie,Se){var Ne=z&c,Ue=co(b),ke=Ue.length,Pe=co(x),Ye=Pe.length;if(ke!=Ye&&!Ne)return!1;for(var Ze=ke;Ze--;){var Be=Ue[Ze];if(!(Ne?Be in x:ve.call(x,Be)))return!1}var Xe=Se.get(b);if(Xe&&Se.get(x))return Xe==x;var Ke=!0;Se.set(b,x),Se.set(x,b);for(var dt=Ne;++Ze<ke;){Be=Ue[Ze];var lt=b[Be],_t=x[Be];if(se)var vo=Ne?se(_t,lt,Be,x,b,Se):se(lt,_t,Be,b,x,Se);if(!(vo===void 0?lt===_t||Ie(lt,_t,z,se,Se):vo)){Ke=!1;break}dt||(dt=Be=="constructor")}if(Ke&&!dt){var wr=b.constructor,_r=x.constructor;wr!=_r&&"constructor"in b&&"constructor"in x&&!(typeof wr=="function"&&wr instanceof wr&&typeof _r=="function"&&_r instanceof _r)&&(Ke=!1)}return Se.delete(b),Se.delete(x),Ke}function co(b){return Cu(b,ju,xu)}function Er(b,x){var z=b.__data__;return $u(x)?z[typeof x=="string"?"string":"hash"]:z.map}function It(b,x){var z=e(b,x);return Ou(z)?z:void 0}function Fu(b){var x=ve.call(b,ee),z=b[ee];try{b[ee]=void 0;var se=!0}catch{}var Ie=de.call(b);return se&&(x?b[ee]=z:delete b[ee]),Ie}var xu=fe?function(b){return b==null?[]:(b=Object(b),ye(fe(b),function(x){return Y.call(b,x)}))}:Gu,ft=qt;(we&&ft(new we(new ArrayBuffer(1)))!=L||Oe&&ft(new Oe)!=E||De&&ft(De.resolve())!=O||Ce&&ft(new Ce)!=R||Ot&&ft(new Ot)!=q)&&(ft=function(b){var x=qt(b),z=x==C?b.constructor:void 0,se=z?wt(z):"";if(se)switch(se){case vt:return L;case Zl:return E;case eu:return O;case tu:return R;case ru:return q}return x});function Lu(b,x){return x=x??o,!!x&&(typeof b=="number"||Ae.test(b))&&b>-1&&b%1==0&&b<x}function $u(b){var x=typeof b;return x=="string"||x=="number"||x=="symbol"||x=="boolean"?b!=="__proto__":b===null}function Uu(b){return!!Te&&Te in b}function ku(b){var x=b&&b.constructor,z=typeof x=="function"&&x.prototype||Z;return b===z}function qu(b){return de.call(b)}function wt(b){if(b!=null){try{return ge.call(b)}catch{}try{return b+""}catch{}}return""}function fo(b,x){return b===x||b!==b&&x!==x}var Mu=so(function(){return arguments}())?so:function(b){return Mt(b)&&ve.call(b,"callee")&&!Y.call(b,"callee")},yr=Array.isArray;function Bu(b){return b!=null&&po(b.length)&&!ho(b)}var jr=oe||Vu;function Hu(b,x){return lo(b,x)}function ho(b){if(!mo(b))return!1;var x=qt(b);return x==p||x==g||x==l||x==I}function po(b){return typeof b=="number"&&b>-1&&b%1==0&&b<=o}function mo(b){var x=typeof b;return b!=null&&(x=="object"||x=="function")}function Mt(b){return b!=null&&typeof b=="object"}var go=_e?gt(_e):Iu;function ju(b){return Bu(b)?Ru(b):Pu(b)}function Gu(){return[]}function Vu(){return!1}t.exports=Hu}(lr,lr.exports)),lr.exports}var xs;function pf(){if(xs)return Dt;xs=1,Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.DownloadedUpdateHelper=void 0,Dt.createTempUpdateFile=d;const t=ur,u=it,h=hf(),f=mt(),c=Re;let s=class{constructor(l){this.cacheDir=l,this._file=null,this._packageFile=null,this.versionInfo=null,this.fileInfo=null,this._downloadedFileInfo=null}get downloadedFileInfo(){return this._downloadedFileInfo}get file(){return this._file}get packageFile(){return this._packageFile}get cacheDirForPendingUpdate(){return c.join(this.cacheDir,"pending")}async validateDownloadedPath(l,i,a,r){if(this.versionInfo!=null&&this.file===l&&this.fileInfo!=null)return h(this.versionInfo,i)&&h(this.fileInfo.info,a.info)&&await(0,f.pathExists)(l)?l:null;const p=await this.getValidCachedUpdateFile(a,r);return p===null?null:(r.info(`Update has already been downloaded to ${l}).`),this._file=p,p)}async setDownloadedFile(l,i,a,r,p,g){this._file=l,this._packageFile=i,this.versionInfo=a,this.fileInfo=r,this._downloadedFileInfo={fileName:p,sha512:r.info.sha512,isAdminRightsRequired:r.info.isAdminRightsRequired===!0},g&&await(0,f.outputJson)(this.getUpdateInfoFile(),this._downloadedFileInfo)}async clear(){this._file=null,this._packageFile=null,this.versionInfo=null,this.fileInfo=null,await this.cleanCacheDirForPendingUpdate()}async cleanCacheDirForPendingUpdate(){try{await(0,f.emptyDir)(this.cacheDirForPendingUpdate)}catch{}}async getValidCachedUpdateFile(l,i){var a;const r=this.getUpdateInfoFile();if(!await(0,f.pathExists)(r))return null;let g;try{g=await(0,f.readJson)(r)}catch(C){let O="No cached update info available";return C.code!=="ENOENT"&&(await this.cleanCacheDirForPendingUpdate(),O+=` (error on read: ${C.message})`),i.info(O),null}if(!((a=(g==null?void 0:g.fileName)!==null)!==null&&a!==void 0?a:!1))return i.warn("Cached update info is corrupted: no fileName, directory for cached update will be cleaned"),await this.cleanCacheDirForPendingUpdate(),null;if(l.info.sha512!==g.sha512)return i.info(`Cached update sha512 checksum doesn't match the latest available update. New update must be downloaded. Cached: ${g.sha512}, expected: ${l.info.sha512}. Directory for cached update will be cleaned`),await this.cleanCacheDirForPendingUpdate(),null;const m=c.join(this.cacheDirForPendingUpdate,g.fileName);if(!await(0,f.pathExists)(m))return i.info("Cached update file doesn't exist"),null;const A=await o(m);return l.info.sha512!==A?(i.warn(`Sha512 checksum doesn't match the latest available update. New update must be downloaded. Cached: ${A}, expected: ${l.info.sha512}`),await this.cleanCacheDirForPendingUpdate(),null):(this._downloadedFileInfo=g,m)}getUpdateInfoFile(){return c.join(this.cacheDirForPendingUpdate,"update-info.json")}};Dt.DownloadedUpdateHelper=s;function o(n,l="sha512",i="base64",a){return new Promise((r,p)=>{const g=(0,t.createHash)(l);g.on("error",p).setEncoding(i),(0,u.createReadStream)(n,{...a,highWaterMark:1024*1024}).on("error",p).on("end",()=>{g.end(),r(g.read())}).pipe(g,{end:!1})})}async function d(n,l,i){let a=0,r=c.join(l,n);for(let p=0;p<3;p++)try{return await(0,f.unlink)(r),r}catch(g){if(g.code==="ENOENT")return r;i.warn(`Error on remove temp update file: ${g}`),r=c.join(l,`${a++}-${n}`)}return r}return Dt}var Wt={},Nr={},Ls;function mf(){if(Ls)return Nr;Ls=1,Object.defineProperty(Nr,"__esModule",{value:!0}),Nr.getAppCacheDir=h;const t=Re,u=Wi;function h(){const f=(0,u.homedir)();let c;return process.platform==="win32"?c=process.env.LOCALAPPDATA||t.join(f,"AppData","Local"):process.platform==="darwin"?c=t.join(f,"Library","Caches"):c=process.env.XDG_CACHE_HOME||t.join(f,".cache"),c}return Nr}var $s;function gf(){if($s)return Wt;$s=1,Object.defineProperty(Wt,"__esModule",{value:!0}),Wt.ElectronAppAdapter=void 0;const t=Re,u=mf();let h=class{constructor(c=xe.app){this.app=c}whenReady(){return this.app.whenReady()}get version(){return this.app.getVersion()}get name(){return this.app.getName()}get isPackaged(){return this.app.isPackaged===!0}get appUpdateConfigPath(){return this.isPackaged?t.join(process.resourcesPath,"app-update.yml"):t.join(this.app.getAppPath(),"dev-app-update.yml")}get userDataPath(){return this.app.getPath("userData")}get baseCachePath(){return(0,u.getAppCacheDir)()}quit(){this.app.quit()}relaunch(){this.app.relaunch()}onQuit(c){this.app.once("quit",(s,o)=>c(o))}};return Wt.ElectronAppAdapter=h,Wt}var Mi={},Us;function vf(){return Us||(Us=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ElectronHttpExecutor=t.NET_SESSION_NAME=void 0,t.getNetSession=h;const u=qe();t.NET_SESSION_NAME="electron-updater";function h(){return xe.session.fromPartition(t.NET_SESSION_NAME,{cache:!1})}class f extends u.HttpExecutor{constructor(s){super(),this.proxyLoginCallback=s,this.cachedSession=null}async download(s,o,d){return await d.cancellationToken.createPromise((n,l,i)=>{const a={headers:d.headers||void 0,redirect:"manual"};(0,u.configureRequestUrl)(s,a),(0,u.configureRequestOptions)(a),this.doDownload(a,{destination:o,options:d,onCancel:i,callback:r=>{r==null?n(o):l(r)},responseHandler:null},0)})}createRequest(s,o){s.headers&&s.headers.Host&&(s.host=s.headers.Host,delete s.headers.Host),this.cachedSession==null&&(this.cachedSession=h());const d=xe.net.request({...s,session:this.cachedSession});return d.on("response",o),this.proxyLoginCallback!=null&&d.on("login",this.proxyLoginCallback),d}addRedirectHandlers(s,o,d,n,l){s.on("redirect",(i,a,r)=>{s.abort(),n>this.maxRedirects?d(this.createMaxRedirectError()):l(u.HttpExecutor.prepareRedirectUrlOptions(r,o))})}}t.ElectronHttpExecutor=f}(Mi)),Mi}var Yt={},Rt={},Bi,ks;function Ef(){if(ks)return Bi;ks=1;var t="[object Symbol]",u=/[\\^$.*+?()[\]{}|]/g,h=RegExp(u.source),f=typeof et=="object"&&et&&et.Object===Object&&et,c=typeof self=="object"&&self&&self.Object===Object&&self,s=f||c||Function("return this")(),o=Object.prototype,d=o.toString,n=s.Symbol,l=n?n.prototype:void 0,i=l?l.toString:void 0;function a(m){if(typeof m=="string")return m;if(p(m))return i?i.call(m):"";var A=m+"";return A=="0"&&1/m==-1/0?"-0":A}function r(m){return!!m&&typeof m=="object"}function p(m){return typeof m=="symbol"||r(m)&&d.call(m)==t}function g(m){return m==null?"":a(m)}function E(m){return m=g(m),m&&h.test(m)?m.replace(u,"\\$&"):m}return Bi=E,Bi}var qs;function bt(){if(qs)return Rt;qs=1,Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.newBaseUrl=h,Rt.newUrlFromBase=f,Rt.getChannelFilename=c,Rt.blockmapFiles=s;const t=xt,u=Ef();function h(o){const d=new t.URL(o);return d.pathname.endsWith("/")||(d.pathname+="/"),d}function f(o,d,n=!1){const l=new t.URL(o,d),i=d.search;return i!=null&&i.length!==0?l.search=i:n&&(l.search=`noCache=${Date.now().toString(32)}`),l}function c(o){return`${o}.yml`}function s(o,d,n){const l=f(`${o.pathname}.blockmap`,o);return[f(`${o.pathname.replace(new RegExp(u(n),"g"),d)}.blockmap`,o),l]}return Rt}var ut={},Ms;function nt(){if(Ms)return ut;Ms=1,Object.defineProperty(ut,"__esModule",{value:!0}),ut.Provider=void 0,ut.findFile=c,ut.parseUpdateInfo=s,ut.getFileList=o,ut.resolveFiles=d;const t=qe(),u=Ji(),h=bt();let f=class{constructor(l){this.runtimeOptions=l,this.requestHeaders=null,this.executor=l.executor}get isUseMultipleRangeRequest(){return this.runtimeOptions.isUseMultipleRangeRequest!==!1}getChannelFilePrefix(){if(this.runtimeOptions.platform==="linux"){const l=process.env.TEST_UPDATER_ARCH||process.arch;return"-linux"+(l==="x64"?"":`-${l}`)}else return this.runtimeOptions.platform==="darwin"?"-mac":""}getDefaultChannelName(){return this.getCustomChannelName("latest")}getCustomChannelName(l){return`${l}${this.getChannelFilePrefix()}`}get fileExtraDownloadHeaders(){return null}setRequestHeaders(l){this.requestHeaders=l}httpRequest(l,i,a){return this.executor.request(this.createRequestOptions(l,i),a)}createRequestOptions(l,i){const a={};return this.requestHeaders==null?i!=null&&(a.headers=i):a.headers=i==null?this.requestHeaders:{...this.requestHeaders,...i},(0,t.configureRequestUrl)(l,a),a}};ut.Provider=f;function c(n,l,i){if(n.length===0)throw(0,t.newError)("No files provided","ERR_UPDATER_NO_FILES_PROVIDED");const a=n.find(r=>r.url.pathname.toLowerCase().endsWith(`.${l}`));return a??(i==null?n[0]:n.find(r=>!i.some(p=>r.url.pathname.toLowerCase().endsWith(`.${p}`))))}function s(n,l,i){if(n==null)throw(0,t.newError)(`Cannot parse update info from ${l} in the latest release artifacts (${i}): rawData: null`,"ERR_UPDATER_INVALID_UPDATE_INFO");let a;try{a=(0,u.load)(n)}catch(r){throw(0,t.newError)(`Cannot parse update info from ${l} in the latest release artifacts (${i}): ${r.stack||r.message}, rawData: ${n}`,"ERR_UPDATER_INVALID_UPDATE_INFO")}return a}function o(n){const l=n.files;if(l!=null&&l.length>0)return l;if(n.path!=null)return[{url:n.path,sha2:n.sha2,sha512:n.sha512}];throw(0,t.newError)(`No files provided: ${(0,t.safeStringifyJson)(n)}`,"ERR_UPDATER_NO_FILES_PROVIDED")}function d(n,l,i=a=>a){const r=o(n).map(E=>{if(E.sha2==null&&E.sha512==null)throw(0,t.newError)(`Update info doesn't contain nor sha256 neither sha512 checksum: ${(0,t.safeStringifyJson)(E)}`,"ERR_UPDATER_NO_CHECKSUM");return{url:(0,h.newUrlFromBase)(i(E.url),l),info:E}}),p=n.packages,g=p==null?null:p[process.arch]||p.ia32;return g!=null&&(r[0].packageInfo={...g,path:(0,h.newUrlFromBase)(i(g.path),l).href}),r}return ut}var Bs;function Wl(){if(Bs)return Yt;Bs=1,Object.defineProperty(Yt,"__esModule",{value:!0}),Yt.GenericProvider=void 0;const t=qe(),u=bt(),h=nt();let f=class extends h.Provider{constructor(s,o,d){super(d),this.configuration=s,this.updater=o,this.baseUrl=(0,u.newBaseUrl)(this.configuration.url)}get channel(){const s=this.updater.channel||this.configuration.channel;return s==null?this.getDefaultChannelName():this.getCustomChannelName(s)}async getLatestVersion(){const s=(0,u.getChannelFilename)(this.channel),o=(0,u.newUrlFromBase)(s,this.baseUrl,this.updater.isAddNoCacheQuery);for(let d=0;;d++)try{return(0,h.parseUpdateInfo)(await this.httpRequest(o),s,o)}catch(n){if(n instanceof t.HttpError&&n.statusCode===404)throw(0,t.newError)(`Cannot find channel "${s}" update info: ${n.stack||n.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND");if(n.code==="ECONNREFUSED"&&d<3){await new Promise((l,i)=>{try{setTimeout(l,1e3*d)}catch(a){i(a)}});continue}throw n}}resolveFiles(s){return(0,h.resolveFiles)(s,this.baseUrl)}};return Yt.GenericProvider=f,Yt}var zt={},Xt={},Hs;function yf(){if(Hs)return Xt;Hs=1,Object.defineProperty(Xt,"__esModule",{value:!0}),Xt.BitbucketProvider=void 0;const t=qe(),u=bt(),h=nt();let f=class extends h.Provider{constructor(s,o,d){super({...d,isUseMultipleRangeRequest:!1}),this.configuration=s,this.updater=o;const{owner:n,slug:l}=s;this.baseUrl=(0,u.newBaseUrl)(`https://api.bitbucket.org/2.0/repositories/${n}/${l}/downloads`)}get channel(){return this.updater.channel||this.configuration.channel||"latest"}async getLatestVersion(){const s=new t.CancellationToken,o=(0,u.getChannelFilename)(this.getCustomChannelName(this.channel)),d=(0,u.newUrlFromBase)(o,this.baseUrl,this.updater.isAddNoCacheQuery);try{const n=await this.httpRequest(d,void 0,s);return(0,h.parseUpdateInfo)(n,o,d)}catch(n){throw(0,t.newError)(`Unable to find latest version on ${this.toString()}, please ensure release exists: ${n.stack||n.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}resolveFiles(s){return(0,h.resolveFiles)(s,this.baseUrl)}toString(){const{owner:s,slug:o}=this.configuration;return`Bitbucket (owner: ${s}, slug: ${o}, channel: ${this.channel})`}};return Xt.BitbucketProvider=f,Xt}var pt={},js;function Yl(){if(js)return pt;js=1,Object.defineProperty(pt,"__esModule",{value:!0}),pt.GitHubProvider=pt.BaseGitHubProvider=void 0,pt.computeReleaseNotes=l;const t=qe(),u=Vl(),h=xt,f=bt(),c=nt(),s=/\/tag\/([^/]+)$/;class o extends c.Provider{constructor(a,r,p){super({...p,isUseMultipleRangeRequest:!1}),this.options=a,this.baseUrl=(0,f.newBaseUrl)((0,t.githubUrl)(a,r));const g=r==="github.com"?"api.github.com":r;this.baseApiUrl=(0,f.newBaseUrl)((0,t.githubUrl)(a,g))}computeGithubBasePath(a){const r=this.options.host;return r&&!["github.com","api.github.com"].includes(r)?`/api/v3${a}`:a}}pt.BaseGitHubProvider=o;let d=class extends o{constructor(a,r,p){super(a,"github.com",p),this.options=a,this.updater=r}get channel(){const a=this.updater.channel||this.options.channel;return a==null?this.getDefaultChannelName():this.getCustomChannelName(a)}async getLatestVersion(){var a,r,p,g,E;const m=new t.CancellationToken,A=await this.httpRequest((0,f.newUrlFromBase)(`${this.basePath}.atom`,this.baseUrl),{accept:"application/xml, application/atom+xml, text/xml, */*"},m),C=(0,t.parseXml)(A);let O=C.element("entry",!1,"No published versions on GitHub"),I=null;try{if(this.updater.allowPrerelease){const q=((a=this.updater)===null||a===void 0?void 0:a.channel)||((r=u.prerelease(this.updater.currentVersion))===null||r===void 0?void 0:r[0])||null;if(q===null)I=s.exec(O.element("link").attribute("href"))[1];else for(const $ of C.getElements("entry")){const L=s.exec($.element("link").attribute("href"));if(L===null)continue;const k=L[1],D=((p=u.prerelease(k))===null||p===void 0?void 0:p[0])||null,P=!q||["alpha","beta"].includes(q),F=D!==null&&!["alpha","beta"].includes(String(D));if(P&&!F&&!(q==="beta"&&D==="alpha")){I=k;break}if(D&&D===q){I=k;break}}}else{I=await this.getLatestTagName(m);for(const q of C.getElements("entry"))if(s.exec(q.element("link").attribute("href"))[1]===I){O=q;break}}}catch(q){throw(0,t.newError)(`Cannot parse releases feed: ${q.stack||q.message},
XML:
${A}`,"ERR_UPDATER_INVALID_RELEASE_FEED")}if(I==null)throw(0,t.newError)("No published versions on GitHub","ERR_UPDATER_NO_PUBLISHED_VERSIONS");let j,R="",_="";const T=async q=>{R=(0,f.getChannelFilename)(q),_=(0,f.newUrlFromBase)(this.getBaseDownloadPath(String(I),R),this.baseUrl);const $=this.createRequestOptions(_);try{return await this.executor.request($,m)}catch(L){throw L instanceof t.HttpError&&L.statusCode===404?(0,t.newError)(`Cannot find ${R} in the latest release artifacts (${_}): ${L.stack||L.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND"):L}};try{let q=this.channel;this.updater.allowPrerelease&&(!((g=u.prerelease(I))===null||g===void 0)&&g[0])&&(q=this.getCustomChannelName(String((E=u.prerelease(I))===null||E===void 0?void 0:E[0]))),j=await T(q)}catch(q){if(this.updater.allowPrerelease)j=await T(this.getDefaultChannelName());else throw q}const y=(0,c.parseUpdateInfo)(j,R,_);return y.releaseName==null&&(y.releaseName=O.elementValueOrEmpty("title")),y.releaseNotes==null&&(y.releaseNotes=l(this.updater.currentVersion,this.updater.fullChangelog,C,O)),{tag:I,...y}}async getLatestTagName(a){const r=this.options,p=r.host==null||r.host==="github.com"?(0,f.newUrlFromBase)(`${this.basePath}/latest`,this.baseUrl):new h.URL(`${this.computeGithubBasePath(`/repos/${r.owner}/${r.repo}/releases`)}/latest`,this.baseApiUrl);try{const g=await this.httpRequest(p,{Accept:"application/json"},a);return g==null?null:JSON.parse(g).tag_name}catch(g){throw(0,t.newError)(`Unable to find latest version on GitHub (${p}), please ensure a production release exists: ${g.stack||g.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}get basePath(){return`/${this.options.owner}/${this.options.repo}/releases`}resolveFiles(a){return(0,c.resolveFiles)(a,this.baseUrl,r=>this.getBaseDownloadPath(a.tag,r.replace(/ /g,"-")))}getBaseDownloadPath(a,r){return`${this.basePath}/download/${a}/${r}`}};pt.GitHubProvider=d;function n(i){const a=i.elementValueOrEmpty("content");return a==="No content."?"":a}function l(i,a,r,p){if(!a)return n(p);const g=[];for(const E of r.getElements("entry")){const m=/\/tag\/v?([^/]+)$/.exec(E.element("link").attribute("href"))[1];u.lt(i,m)&&g.push({version:m,note:n(E)})}return g.sort((E,m)=>u.rcompare(E.version,m.version))}return pt}var Kt={},Gs;function wf(){if(Gs)return Kt;Gs=1,Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.KeygenProvider=void 0;const t=qe(),u=bt(),h=nt();let f=class extends h.Provider{constructor(s,o,d){super({...d,isUseMultipleRangeRequest:!1}),this.configuration=s,this.updater=o,this.baseUrl=(0,u.newBaseUrl)(`https://api.keygen.sh/v1/accounts/${this.configuration.account}/artifacts?product=${this.configuration.product}`)}get channel(){return this.updater.channel||this.configuration.channel||"stable"}async getLatestVersion(){const s=new t.CancellationToken,o=(0,u.getChannelFilename)(this.getCustomChannelName(this.channel)),d=(0,u.newUrlFromBase)(o,this.baseUrl,this.updater.isAddNoCacheQuery);try{const n=await this.httpRequest(d,{Accept:"application/vnd.api+json","Keygen-Version":"1.1"},s);return(0,h.parseUpdateInfo)(n,o,d)}catch(n){throw(0,t.newError)(`Unable to find latest version on ${this.toString()}, please ensure release exists: ${n.stack||n.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}resolveFiles(s){return(0,h.resolveFiles)(s,this.baseUrl)}toString(){const{account:s,product:o,platform:d}=this.configuration;return`Keygen (account: ${s}, product: ${o}, platform: ${d}, channel: ${this.channel})`}};return Kt.KeygenProvider=f,Kt}var Jt={},Vs;function _f(){if(Vs)return Jt;Vs=1,Object.defineProperty(Jt,"__esModule",{value:!0}),Jt.PrivateGitHubProvider=void 0;const t=qe(),u=Ji(),h=Re,f=xt,c=bt(),s=Yl(),o=nt();let d=class extends s.BaseGitHubProvider{constructor(l,i,a,r){super(l,"api.github.com",r),this.updater=i,this.token=a}createRequestOptions(l,i){const a=super.createRequestOptions(l,i);return a.redirect="manual",a}async getLatestVersion(){const l=new t.CancellationToken,i=(0,c.getChannelFilename)(this.getDefaultChannelName()),a=await this.getLatestVersionInfo(l),r=a.assets.find(E=>E.name===i);if(r==null)throw(0,t.newError)(`Cannot find ${i} in the release ${a.html_url||a.name}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND");const p=new f.URL(r.url);let g;try{g=(0,u.load)(await this.httpRequest(p,this.configureHeaders("application/octet-stream"),l))}catch(E){throw E instanceof t.HttpError&&E.statusCode===404?(0,t.newError)(`Cannot find ${i} in the latest release artifacts (${p}): ${E.stack||E.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND"):E}return g.assets=a.assets,g}get fileExtraDownloadHeaders(){return this.configureHeaders("application/octet-stream")}configureHeaders(l){return{accept:l,authorization:`token ${this.token}`}}async getLatestVersionInfo(l){const i=this.updater.allowPrerelease;let a=this.basePath;i||(a=`${a}/latest`);const r=(0,c.newUrlFromBase)(a,this.baseUrl);try{const p=JSON.parse(await this.httpRequest(r,this.configureHeaders("application/vnd.github.v3+json"),l));return i?p.find(g=>g.prerelease)||p[0]:p}catch(p){throw(0,t.newError)(`Unable to find latest version on GitHub (${r}), please ensure a production release exists: ${p.stack||p.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}get basePath(){return this.computeGithubBasePath(`/repos/${this.options.owner}/${this.options.repo}/releases`)}resolveFiles(l){return(0,o.getFileList)(l).map(i=>{const a=h.posix.basename(i.url).replace(/ /g,"-"),r=l.assets.find(p=>p!=null&&p.name===a);if(r==null)throw(0,t.newError)(`Cannot find asset "${a}" in: ${JSON.stringify(l.assets,null,2)}`,"ERR_UPDATER_ASSET_NOT_FOUND");return{url:new f.URL(r.url),info:i}})}};return Jt.PrivateGitHubProvider=d,Jt}var Ws;function Sf(){if(Ws)return zt;Ws=1,Object.defineProperty(zt,"__esModule",{value:!0}),zt.isUrlProbablySupportMultiRangeRequests=o,zt.createClient=d;const t=qe(),u=yf(),h=Wl(),f=Yl(),c=wf(),s=_f();function o(n){return!n.includes("s3.amazonaws.com")}function d(n,l,i){if(typeof n=="string")throw(0,t.newError)("Please pass PublishConfiguration object","ERR_UPDATER_INVALID_PROVIDER_CONFIGURATION");const a=n.provider;switch(a){case"github":{const r=n,p=(r.private?process.env.GH_TOKEN||process.env.GITHUB_TOKEN:null)||r.token;return p==null?new f.GitHubProvider(r,l,i):new s.PrivateGitHubProvider(r,l,p,i)}case"bitbucket":return new u.BitbucketProvider(n,l,i);case"keygen":return new c.KeygenProvider(n,l,i);case"s3":case"spaces":return new h.GenericProvider({provider:"generic",url:(0,t.getS3LikeProviderBaseUrl)(n),channel:n.channel||null},l,{...i,isUseMultipleRangeRequest:!1});case"generic":{const r=n;return new h.GenericProvider(r,l,{...i,isUseMultipleRangeRequest:r.useMultipleRangeRequest!==!1&&o(r.url)})}case"custom":{const r=n,p=r.updateProvider;if(!p)throw(0,t.newError)("Custom provider not specified","ERR_UPDATER_INVALID_PROVIDER_CONFIGURATION");return new p(r,l,i)}default:throw(0,t.newError)(`Unsupported provider: ${a}`,"ERR_UPDATER_UNSUPPORTED_PROVIDER")}}return zt}var Qt={},Zt={},Nt={},Ft={},Ys;function io(){if(Ys)return Ft;Ys=1,Object.defineProperty(Ft,"__esModule",{value:!0}),Ft.OperationKind=void 0,Ft.computeOperations=u;var t;(function(o){o[o.COPY=0]="COPY",o[o.DOWNLOAD=1]="DOWNLOAD"})(t||(Ft.OperationKind=t={}));function u(o,d,n){const l=s(o.files),i=s(d.files);let a=null;const r=d.files[0],p=[],g=r.name,E=l.get(g);if(E==null)throw new Error(`no file ${g} in old blockmap`);const m=i.get(g);let A=0;const{checksumToOffset:C,checksumToOldSize:O}=c(l.get(g),E.offset,n);let I=r.offset;for(let j=0;j<m.checksums.length;I+=m.sizes[j],j++){const R=m.sizes[j],_=m.checksums[j];let T=C.get(_);T!=null&&O.get(_)!==R&&(n.warn(`Checksum ("${_}") matches, but size differs (old: ${O.get(_)}, new: ${R})`),T=void 0),T===void 0?(A++,a!=null&&a.kind===t.DOWNLOAD&&a.end===I?a.end+=R:(a={kind:t.DOWNLOAD,start:I,end:I+R},f(a,p,_,j))):a!=null&&a.kind===t.COPY&&a.end===T?a.end+=R:(a={kind:t.COPY,start:T,end:T+R},f(a,p,_,j))}return A>0&&n.info(`File${r.name==="file"?"":" "+r.name} has ${A} changed blocks`),p}const h=process.env.DIFFERENTIAL_DOWNLOAD_PLAN_BUILDER_VALIDATE_RANGES==="true";function f(o,d,n,l){if(h&&d.length!==0){const i=d[d.length-1];if(i.kind===o.kind&&o.start<i.end&&o.start>i.start){const a=[i.start,i.end,o.start,o.end].reduce((r,p)=>r<p?r:p);throw new Error(`operation (block index: ${l}, checksum: ${n}, kind: ${t[o.kind]}) overlaps previous operation (checksum: ${n}):
abs: ${i.start} until ${i.end} and ${o.start} until ${o.end}
rel: ${i.start-a} until ${i.end-a} and ${o.start-a} until ${o.end-a}`)}}d.push(o)}function c(o,d,n){const l=new Map,i=new Map;let a=d;for(let r=0;r<o.checksums.length;r++){const p=o.checksums[r],g=o.sizes[r],E=i.get(p);if(E===void 0)l.set(p,a),i.set(p,g);else if(n.debug!=null){const m=E===g?"(same size)":`(size: ${E}, this size: ${g})`;n.debug(`${p} duplicated in blockmap ${m}, it doesn't lead to broken differential downloader, just corresponding block will be skipped)`)}a+=g}return{checksumToOffset:l,checksumToOldSize:i}}function s(o){const d=new Map;for(const n of o)d.set(n.name,n);return d}return Ft}var zs;function zl(){if(zs)return Nt;zs=1,Object.defineProperty(Nt,"__esModule",{value:!0}),Nt.DataSplitter=void 0,Nt.copyData=o;const t=qe(),u=it,h=cr,f=io(),c=Buffer.from(`\r
\r
`);var s;(function(n){n[n.INIT=0]="INIT",n[n.HEADER=1]="HEADER",n[n.BODY=2]="BODY"})(s||(s={}));function o(n,l,i,a,r){const p=(0,u.createReadStream)("",{fd:i,autoClose:!1,start:n.start,end:n.end-1});p.on("error",a),p.once("end",r),p.pipe(l,{end:!1})}let d=class extends h.Writable{constructor(l,i,a,r,p,g){super(),this.out=l,this.options=i,this.partIndexToTaskIndex=a,this.partIndexToLength=p,this.finishHandler=g,this.partIndex=-1,this.headerListBuffer=null,this.readState=s.INIT,this.ignoreByteCount=0,this.remainingPartDataCount=0,this.actualPartLength=0,this.boundaryLength=r.length+4,this.ignoreByteCount=this.boundaryLength-2}get isFinished(){return this.partIndex===this.partIndexToLength.length}_write(l,i,a){if(this.isFinished){console.error(`Trailing ignored data: ${l.length} bytes`);return}this.handleData(l).then(a).catch(a)}async handleData(l){let i=0;if(this.ignoreByteCount!==0&&this.remainingPartDataCount!==0)throw(0,t.newError)("Internal error","ERR_DATA_SPLITTER_BYTE_COUNT_MISMATCH");if(this.ignoreByteCount>0){const a=Math.min(this.ignoreByteCount,l.length);this.ignoreByteCount-=a,i=a}else if(this.remainingPartDataCount>0){const a=Math.min(this.remainingPartDataCount,l.length);this.remainingPartDataCount-=a,await this.processPartData(l,0,a),i=a}if(i!==l.length){if(this.readState===s.HEADER){const a=this.searchHeaderListEnd(l,i);if(a===-1)return;i=a,this.readState=s.BODY,this.headerListBuffer=null}for(;;){if(this.readState===s.BODY)this.readState=s.INIT;else{this.partIndex++;let g=this.partIndexToTaskIndex.get(this.partIndex);if(g==null)if(this.isFinished)g=this.options.end;else throw(0,t.newError)("taskIndex is null","ERR_DATA_SPLITTER_TASK_INDEX_IS_NULL");const E=this.partIndex===0?this.options.start:this.partIndexToTaskIndex.get(this.partIndex-1)+1;if(E<g)await this.copyExistingData(E,g);else if(E>g)throw(0,t.newError)("prevTaskIndex must be < taskIndex","ERR_DATA_SPLITTER_TASK_INDEX_ASSERT_FAILED");if(this.isFinished){this.onPartEnd(),this.finishHandler();return}if(i=this.searchHeaderListEnd(l,i),i===-1){this.readState=s.HEADER;return}}const a=this.partIndexToLength[this.partIndex],r=i+a,p=Math.min(r,l.length);if(await this.processPartStarted(l,i,p),this.remainingPartDataCount=a-(p-i),this.remainingPartDataCount>0)return;if(i=r+this.boundaryLength,i>=l.length){this.ignoreByteCount=this.boundaryLength-(l.length-r);return}}}}copyExistingData(l,i){return new Promise((a,r)=>{const p=()=>{if(l===i){a();return}const g=this.options.tasks[l];if(g.kind!==f.OperationKind.COPY){r(new Error("Task kind must be COPY"));return}o(g,this.out,this.options.oldFileFd,r,()=>{l++,p()})};p()})}searchHeaderListEnd(l,i){const a=l.indexOf(c,i);if(a!==-1)return a+c.length;const r=i===0?l:l.slice(i);return this.headerListBuffer==null?this.headerListBuffer=r:this.headerListBuffer=Buffer.concat([this.headerListBuffer,r]),-1}onPartEnd(){const l=this.partIndexToLength[this.partIndex-1];if(this.actualPartLength!==l)throw(0,t.newError)(`Expected length: ${l} differs from actual: ${this.actualPartLength}`,"ERR_DATA_SPLITTER_LENGTH_MISMATCH");this.actualPartLength=0}processPartStarted(l,i,a){return this.partIndex!==0&&this.onPartEnd(),this.processPartData(l,i,a)}processPartData(l,i,a){this.actualPartLength+=a-i;const r=this.out;return r.write(i===0&&l.length===a?l:l.slice(i,a))?Promise.resolve():new Promise((p,g)=>{r.on("error",g),r.once("drain",()=>{r.removeListener("error",g),p()})})}};return Nt.DataSplitter=d,Nt}var er={},Xs;function Af(){if(Xs)return er;Xs=1,Object.defineProperty(er,"__esModule",{value:!0}),er.executeTasksUsingMultipleRangeRequests=f,er.checkIsRangesSupported=s;const t=qe(),u=zl(),h=io();function f(o,d,n,l,i){const a=r=>{if(r>=d.length){o.fileMetadataBuffer!=null&&n.write(o.fileMetadataBuffer),n.end();return}const p=r+1e3;c(o,{tasks:d,start:r,end:Math.min(d.length,p),oldFileFd:l},n,()=>a(p),i)};return a}function c(o,d,n,l,i){let a="bytes=",r=0;const p=new Map,g=[];for(let A=d.start;A<d.end;A++){const C=d.tasks[A];C.kind===h.OperationKind.DOWNLOAD&&(a+=`${C.start}-${C.end-1}, `,p.set(r,A),r++,g.push(C.end-C.start))}if(r<=1){const A=C=>{if(C>=d.end){l();return}const O=d.tasks[C++];if(O.kind===h.OperationKind.COPY)(0,u.copyData)(O,n,d.oldFileFd,i,()=>A(C));else{const I=o.createRequestOptions();I.headers.Range=`bytes=${O.start}-${O.end-1}`;const j=o.httpExecutor.createRequest(I,R=>{s(R,i)&&(R.pipe(n,{end:!1}),R.once("end",()=>A(C)))});o.httpExecutor.addErrorAndTimeoutHandlers(j,i),j.end()}};A(d.start);return}const E=o.createRequestOptions();E.headers.Range=a.substring(0,a.length-2);const m=o.httpExecutor.createRequest(E,A=>{if(!s(A,i))return;const C=(0,t.safeGetHeader)(A,"content-type"),O=/^multipart\/.+?(?:; boundary=(?:(?:"(.+)")|(?:([^\s]+))))$/i.exec(C);if(O==null){i(new Error(`Content-Type "multipart/byteranges" is expected, but got "${C}"`));return}const I=new u.DataSplitter(n,d,p,O[1]||O[2],g,l);I.on("error",i),A.pipe(I),A.on("end",()=>{setTimeout(()=>{m.abort(),i(new Error("Response ends without calling any handlers"))},1e4)})});o.httpExecutor.addErrorAndTimeoutHandlers(m,i),m.end()}function s(o,d){if(o.statusCode>=400)return d((0,t.createHttpError)(o)),!1;if(o.statusCode!==206){const n=(0,t.safeGetHeader)(o,"accept-ranges");if(n==null||n==="none")return d(new Error(`Server doesn't support Accept-Ranges (response code ${o.statusCode})`)),!1}return!0}return er}var tr={},Ks;function Tf(){if(Ks)return tr;Ks=1,Object.defineProperty(tr,"__esModule",{value:!0}),tr.ProgressDifferentialDownloadCallbackTransform=void 0;const t=cr;var u;(function(f){f[f.COPY=0]="COPY",f[f.DOWNLOAD=1]="DOWNLOAD"})(u||(u={}));let h=class extends t.Transform{constructor(c,s,o){super(),this.progressDifferentialDownloadInfo=c,this.cancellationToken=s,this.onProgress=o,this.start=Date.now(),this.transferred=0,this.delta=0,this.expectedBytes=0,this.index=0,this.operationType=u.COPY,this.nextUpdate=this.start+1e3}_transform(c,s,o){if(this.cancellationToken.cancelled){o(new Error("cancelled"),null);return}if(this.operationType==u.COPY){o(null,c);return}this.transferred+=c.length,this.delta+=c.length;const d=Date.now();d>=this.nextUpdate&&this.transferred!==this.expectedBytes&&this.transferred!==this.progressDifferentialDownloadInfo.grandTotal&&(this.nextUpdate=d+1e3,this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.progressDifferentialDownloadInfo.grandTotal*100,bytesPerSecond:Math.round(this.transferred/((d-this.start)/1e3))}),this.delta=0),o(null,c)}beginFileCopy(){this.operationType=u.COPY}beginRangeDownload(){this.operationType=u.DOWNLOAD,this.expectedBytes+=this.progressDifferentialDownloadInfo.expectedByteCounts[this.index++]}endRangeDownload(){this.transferred!==this.progressDifferentialDownloadInfo.grandTotal&&this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.progressDifferentialDownloadInfo.grandTotal*100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))})}_flush(c){if(this.cancellationToken.cancelled){c(new Error("cancelled"));return}this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))}),this.delta=0,this.transferred=0,c(null)}};return tr.ProgressDifferentialDownloadCallbackTransform=h,tr}var Js;function Xl(){if(Js)return Zt;Js=1,Object.defineProperty(Zt,"__esModule",{value:!0}),Zt.DifferentialDownloader=void 0;const t=qe(),u=mt(),h=it,f=zl(),c=xt,s=io(),o=Af(),d=Tf();let n=class{constructor(r,p,g){this.blockAwareFileInfo=r,this.httpExecutor=p,this.options=g,this.fileMetadataBuffer=null,this.logger=g.logger}createRequestOptions(){const r={headers:{...this.options.requestHeaders,accept:"*/*"}};return(0,t.configureRequestUrl)(this.options.newUrl,r),(0,t.configureRequestOptions)(r),r}doDownload(r,p){if(r.version!==p.version)throw new Error(`version is different (${r.version} - ${p.version}), full download is required`);const g=this.logger,E=(0,s.computeOperations)(r,p,g);g.debug!=null&&g.debug(JSON.stringify(E,null,2));let m=0,A=0;for(const O of E){const I=O.end-O.start;O.kind===s.OperationKind.DOWNLOAD?m+=I:A+=I}const C=this.blockAwareFileInfo.size;if(m+A+(this.fileMetadataBuffer==null?0:this.fileMetadataBuffer.length)!==C)throw new Error(`Internal error, size mismatch: downloadSize: ${m}, copySize: ${A}, newSize: ${C}`);return g.info(`Full: ${l(C)}, To download: ${l(m)} (${Math.round(m/(C/100))}%)`),this.downloadFile(E)}downloadFile(r){const p=[],g=()=>Promise.all(p.map(E=>(0,u.close)(E.descriptor).catch(m=>{this.logger.error(`cannot close file "${E.path}": ${m}`)})));return this.doDownloadFile(r,p).then(g).catch(E=>g().catch(m=>{try{this.logger.error(`cannot close files: ${m}`)}catch(A){try{console.error(A)}catch{}}throw E}).then(()=>{throw E}))}async doDownloadFile(r,p){const g=await(0,u.open)(this.options.oldFile,"r");p.push({descriptor:g,path:this.options.oldFile});const E=await(0,u.open)(this.options.newFile,"w");p.push({descriptor:E,path:this.options.newFile});const m=(0,h.createWriteStream)(this.options.newFile,{fd:E});await new Promise((A,C)=>{const O=[];let I;if(!this.options.isUseMultipleRangeRequest&&this.options.onProgress){const L=[];let k=0;for(const P of r)P.kind===s.OperationKind.DOWNLOAD&&(L.push(P.end-P.start),k+=P.end-P.start);const D={expectedByteCounts:L,grandTotal:k};I=new d.ProgressDifferentialDownloadCallbackTransform(D,this.options.cancellationToken,this.options.onProgress),O.push(I)}const j=new t.DigestTransform(this.blockAwareFileInfo.sha512);j.isValidateOnEnd=!1,O.push(j),m.on("finish",()=>{m.close(()=>{p.splice(1,1);try{j.validate()}catch(L){C(L);return}A(void 0)})}),O.push(m);let R=null;for(const L of O)L.on("error",C),R==null?R=L:R=R.pipe(L);const _=O[0];let T;if(this.options.isUseMultipleRangeRequest){T=(0,o.executeTasksUsingMultipleRangeRequests)(this,r,_,g,C),T(0);return}let y=0,q=null;this.logger.info(`Differential download: ${this.options.newUrl}`);const $=this.createRequestOptions();$.redirect="manual",T=L=>{var k,D;if(L>=r.length){this.fileMetadataBuffer!=null&&_.write(this.fileMetadataBuffer),_.end();return}const P=r[L++];if(P.kind===s.OperationKind.COPY){I&&I.beginFileCopy(),(0,f.copyData)(P,_,g,C,()=>T(L));return}const F=`bytes=${P.start}-${P.end-1}`;$.headers.range=F,(D=(k=this.logger)===null||k===void 0?void 0:k.debug)===null||D===void 0||D.call(k,`download range: ${F}`),I&&I.beginRangeDownload();const U=this.httpExecutor.createRequest($,J=>{J.on("error",C),J.on("aborted",()=>{C(new Error("response has been aborted by the server"))}),J.statusCode>=400&&C((0,t.createHttpError)(J)),J.pipe(_,{end:!1}),J.once("end",()=>{I&&I.endRangeDownload(),++y===100?(y=0,setTimeout(()=>T(L),1e3)):T(L)})});U.on("redirect",(J,V,ne)=>{this.logger.info(`Redirect to ${i(ne)}`),q=ne,(0,t.configureRequestUrl)(new c.URL(q),$),U.followRedirect()}),this.httpExecutor.addErrorAndTimeoutHandlers(U,C),U.end()},T(0)})}async readRemoteBytes(r,p){const g=Buffer.allocUnsafe(p+1-r),E=this.createRequestOptions();E.headers.range=`bytes=${r}-${p}`;let m=0;if(await this.request(E,A=>{A.copy(g,m),m+=A.length}),m!==g.length)throw new Error(`Received data length ${m} is not equal to expected ${g.length}`);return g}request(r,p){return new Promise((g,E)=>{const m=this.httpExecutor.createRequest(r,A=>{(0,o.checkIsRangesSupported)(A,E)&&(A.on("error",E),A.on("aborted",()=>{E(new Error("response has been aborted by the server"))}),A.on("data",p),A.on("end",()=>g()))});this.httpExecutor.addErrorAndTimeoutHandlers(m,E),m.end()})}};Zt.DifferentialDownloader=n;function l(a,r=" KB"){return new Intl.NumberFormat("en").format((a/1024).toFixed(2))+r}function i(a){const r=a.indexOf("?");return r<0?a:a.substring(0,r)}return Zt}var Qs;function Rf(){if(Qs)return Qt;Qs=1,Object.defineProperty(Qt,"__esModule",{value:!0}),Qt.GenericDifferentialDownloader=void 0;const t=Xl();let u=class extends t.DifferentialDownloader{download(f,c){return this.doDownload(f,c)}};return Qt.GenericDifferentialDownloader=u,Qt}var Zs;function oo(){if(Zs)return Tt;Zs=1,Object.defineProperty(Tt,"__esModule",{value:!0}),Tt.NoOpLogger=Tt.AppUpdater=void 0;const t=qe(),u=ur,h=Wi,f=vl,c=mt(),s=Ji(),o=Bc(),d=Re,n=Vl(),l=pf(),i=gf(),a=vf(),r=Wl(),p=kt(),g=Sf(),E=yl,m=bt(),A=Rf();let C=class Kl extends f.EventEmitter{get channel(){return this._channel}set channel(R){if(this._channel!=null){if(typeof R!="string")throw(0,t.newError)(`Channel must be a string, but got: ${R}`,"ERR_UPDATER_INVALID_CHANNEL");if(R.length===0)throw(0,t.newError)("Channel must be not an empty string","ERR_UPDATER_INVALID_CHANNEL")}this._channel=R,this.allowDowngrade=!0}addAuthHeader(R){this.requestHeaders=Object.assign({},this.requestHeaders,{authorization:R})}get netSession(){return(0,a.getNetSession)()}get logger(){return this._logger}set logger(R){this._logger=R??new I}set updateConfigPath(R){this.clientPromise=null,this._appUpdateConfigPath=R,this.configOnDisk=new o.Lazy(()=>this.loadUpdateConfig())}constructor(R,_){super(),this.autoDownload=!0,this.autoInstallOnAppQuit=!0,this.autoRunAppAfterInstall=!0,this.allowPrerelease=!1,this.fullChangelog=!1,this.allowDowngrade=!1,this.disableWebInstaller=!1,this.disableDifferentialDownload=!1,this.forceDevUpdateConfig=!1,this._channel=null,this.downloadedUpdateHelper=null,this.requestHeaders=null,this._logger=console,this.signals=new p.UpdaterSignal(this),this._appUpdateConfigPath=null,this.clientPromise=null,this.stagingUserIdPromise=new o.Lazy(()=>this.getOrCreateStagingUserId()),this.configOnDisk=new o.Lazy(()=>this.loadUpdateConfig()),this.checkForUpdatesPromise=null,this.downloadPromise=null,this.updateInfoAndProvider=null,this._testOnlyOptions=null,this.on("error",q=>{this._logger.error(`Error: ${q.stack||q.message}`)}),_==null?(this.app=new i.ElectronAppAdapter,this.httpExecutor=new a.ElectronHttpExecutor((q,$)=>this.emit("login",q,$))):(this.app=_,this.httpExecutor=null);const T=this.app.version,y=(0,n.parse)(T);if(y==null)throw(0,t.newError)(`App version is not a valid semver version: "${T}"`,"ERR_UPDATER_INVALID_VERSION");this.currentVersion=y,this.allowPrerelease=O(y),R!=null&&(this.setFeedURL(R),typeof R!="string"&&R.requestHeaders&&(this.requestHeaders=R.requestHeaders))}getFeedURL(){return"Deprecated. Do not use it."}setFeedURL(R){const _=this.createProviderRuntimeOptions();let T;typeof R=="string"?T=new r.GenericProvider({provider:"generic",url:R},this,{..._,isUseMultipleRangeRequest:(0,g.isUrlProbablySupportMultiRangeRequests)(R)}):T=(0,g.createClient)(R,this,_),this.clientPromise=Promise.resolve(T)}checkForUpdates(){if(!this.isUpdaterActive())return Promise.resolve(null);let R=this.checkForUpdatesPromise;if(R!=null)return this._logger.info("Checking for update (already in progress)"),R;const _=()=>this.checkForUpdatesPromise=null;return this._logger.info("Checking for update"),R=this.doCheckForUpdates().then(T=>(_(),T)).catch(T=>{throw _(),this.emit("error",T,`Cannot check for updates: ${(T.stack||T).toString()}`),T}),this.checkForUpdatesPromise=R,R}isUpdaterActive(){return this.app.isPackaged||this.forceDevUpdateConfig?!0:(this._logger.info("Skip checkForUpdates because application is not packed and dev update config is not forced"),!1)}checkForUpdatesAndNotify(R){return this.checkForUpdates().then(_=>_!=null&&_.downloadPromise?(_.downloadPromise.then(()=>{const T=Kl.formatDownloadNotification(_.updateInfo.version,this.app.name,R);new xe.Notification(T).show()}),_):(this._logger.debug!=null&&this._logger.debug("checkForUpdatesAndNotify called, downloadPromise is null"),_))}static formatDownloadNotification(R,_,T){return T==null&&(T={title:"A new update is ready to install",body:"{appName} version {version} has been downloaded and will be automatically installed on exit"}),T={title:T.title.replace("{appName}",_).replace("{version}",R),body:T.body.replace("{appName}",_).replace("{version}",R)},T}async isStagingMatch(R){const _=R.stagingPercentage;let T=_;if(T==null)return!0;if(T=parseInt(T,10),isNaN(T))return this._logger.warn(`Staging percentage is NaN: ${_}`),!0;T=T/100;const y=await this.stagingUserIdPromise.value,$=t.UUID.parse(y).readUInt32BE(12)/4294967295;return this._logger.info(`Staging percentage: ${T}, percentage: ${$}, user id: ${y}`),$<T}computeFinalHeaders(R){return this.requestHeaders!=null&&Object.assign(R,this.requestHeaders),R}async isUpdateAvailable(R){const _=(0,n.parse)(R.version);if(_==null)throw(0,t.newError)(`This file could not be downloaded, or the latest version (from update server) does not have a valid semver version: "${R.version}"`,"ERR_UPDATER_INVALID_VERSION");const T=this.currentVersion;if((0,n.eq)(_,T))return!1;const y=R==null?void 0:R.minimumSystemVersion,q=(0,h.release)();if(y)try{if((0,n.lt)(q,y))return this._logger.info(`Current OS version ${q} is less than the minimum OS version required ${y} for version ${q}`),!1}catch(D){this._logger.warn(`Failed to compare current OS version(${q}) with minimum OS version(${y}): ${(D.message||D).toString()}`)}if(!await this.isStagingMatch(R))return!1;const L=(0,n.gt)(_,T),k=(0,n.lt)(_,T);return L?!0:this.allowDowngrade&&k}async getUpdateInfoAndProvider(){await this.app.whenReady(),this.clientPromise==null&&(this.clientPromise=this.configOnDisk.value.then(T=>(0,g.createClient)(T,this,this.createProviderRuntimeOptions())));const R=await this.clientPromise,_=await this.stagingUserIdPromise.value;return R.setRequestHeaders(this.computeFinalHeaders({"x-user-staging-id":_})),{info:await R.getLatestVersion(),provider:R}}createProviderRuntimeOptions(){return{isUseMultipleRangeRequest:!0,platform:this._testOnlyOptions==null?process.platform:this._testOnlyOptions.platform,executor:this.httpExecutor}}async doCheckForUpdates(){this.emit("checking-for-update");const R=await this.getUpdateInfoAndProvider(),_=R.info;if(!await this.isUpdateAvailable(_))return this._logger.info(`Update for version ${this.currentVersion.format()} is not available (latest version: ${_.version}, downgrade is ${this.allowDowngrade?"allowed":"disallowed"}).`),this.emit("update-not-available",_),{versionInfo:_,updateInfo:_};this.updateInfoAndProvider=R,this.onUpdateAvailable(_);const T=new t.CancellationToken;return{versionInfo:_,updateInfo:_,cancellationToken:T,downloadPromise:this.autoDownload?this.downloadUpdate(T):null}}onUpdateAvailable(R){this._logger.info(`Found version ${R.version} (url: ${(0,t.asArray)(R.files).map(_=>_.url).join(", ")})`),this.emit("update-available",R)}downloadUpdate(R=new t.CancellationToken){const _=this.updateInfoAndProvider;if(_==null){const y=new Error("Please check update first");return this.dispatchError(y),Promise.reject(y)}if(this.downloadPromise!=null)return this._logger.info("Downloading update (already in progress)"),this.downloadPromise;this._logger.info(`Downloading update from ${(0,t.asArray)(_.info.files).map(y=>y.url).join(", ")}`);const T=y=>{if(!(y instanceof t.CancellationError))try{this.dispatchError(y)}catch(q){this._logger.warn(`Cannot dispatch error event: ${q.stack||q}`)}return y};return this.downloadPromise=this.doDownloadUpdate({updateInfoAndProvider:_,requestHeaders:this.computeRequestHeaders(_.provider),cancellationToken:R,disableWebInstaller:this.disableWebInstaller,disableDifferentialDownload:this.disableDifferentialDownload}).catch(y=>{throw T(y)}).finally(()=>{this.downloadPromise=null}),this.downloadPromise}dispatchError(R){this.emit("error",R,(R.stack||R).toString())}dispatchUpdateDownloaded(R){this.emit(p.UPDATE_DOWNLOADED,R)}async loadUpdateConfig(){return this._appUpdateConfigPath==null&&(this._appUpdateConfigPath=this.app.appUpdateConfigPath),(0,s.load)(await(0,c.readFile)(this._appUpdateConfigPath,"utf-8"))}computeRequestHeaders(R){const _=R.fileExtraDownloadHeaders;if(_!=null){const T=this.requestHeaders;return T==null?_:{..._,...T}}return this.computeFinalHeaders({accept:"*/*"})}async getOrCreateStagingUserId(){const R=d.join(this.app.userDataPath,".updaterId");try{const T=await(0,c.readFile)(R,"utf-8");if(t.UUID.check(T))return T;this._logger.warn(`Staging user id file exists, but content was invalid: ${T}`)}catch(T){T.code!=="ENOENT"&&this._logger.warn(`Couldn't read staging user ID, creating a blank one: ${T}`)}const _=t.UUID.v5((0,u.randomBytes)(4096),t.UUID.OID);this._logger.info(`Generated new staging user ID: ${_}`);try{await(0,c.outputFile)(R,_)}catch(T){this._logger.warn(`Couldn't write out staging user ID: ${T}`)}return _}get isAddNoCacheQuery(){const R=this.requestHeaders;if(R==null)return!0;for(const _ of Object.keys(R)){const T=_.toLowerCase();if(T==="authorization"||T==="private-token")return!1}return!0}async getOrCreateDownloadHelper(){let R=this.downloadedUpdateHelper;if(R==null){const _=(await this.configOnDisk.value).updaterCacheDirName,T=this._logger;_==null&&T.error("updaterCacheDirName is not specified in app-update.yml Was app build using at least electron-builder 20.34.0?");const y=d.join(this.app.baseCachePath,_||this.app.name);T.debug!=null&&T.debug(`updater cache dir: ${y}`),R=new l.DownloadedUpdateHelper(y),this.downloadedUpdateHelper=R}return R}async executeDownload(R){const _=R.fileInfo,T={headers:R.downloadUpdateOptions.requestHeaders,cancellationToken:R.downloadUpdateOptions.cancellationToken,sha2:_.info.sha2,sha512:_.info.sha512};this.listenerCount(p.DOWNLOAD_PROGRESS)>0&&(T.onProgress=ae=>this.emit(p.DOWNLOAD_PROGRESS,ae));const y=R.downloadUpdateOptions.updateInfoAndProvider.info,q=y.version,$=_.packageInfo;function L(){const ae=decodeURIComponent(R.fileInfo.url.pathname);return ae.endsWith(`.${R.fileExtension}`)?d.basename(ae):R.fileInfo.info.url}const k=await this.getOrCreateDownloadHelper(),D=k.cacheDirForPendingUpdate;await(0,c.mkdir)(D,{recursive:!0});const P=L();let F=d.join(D,P);const U=$==null?null:d.join(D,`package-${q}${d.extname($.path)||".7z"}`),J=async ae=>(await k.setDownloadedFile(F,U,y,_,P,ae),await R.done({...y,downloadedFile:F}),U==null?[F]:[F,U]),V=this._logger,ne=await k.validateDownloadedPath(F,y,_,V);if(ne!=null)return F=ne,await J(!1);const ce=async()=>(await k.clear().catch(()=>{}),await(0,c.unlink)(F).catch(()=>{})),ue=await(0,l.createTempUpdateFile)(`temp-${P}`,D,V);try{await R.task(ue,T,U,ce),await(0,c.rename)(ue,F)}catch(ae){throw await ce(),ae instanceof t.CancellationError&&(V.info("cancelled"),this.emit("update-cancelled",y)),ae}return V.info(`New version ${q} has been downloaded to ${F}`),await J(!0)}async differentialDownloadInstaller(R,_,T,y,q){try{if(this._testOnlyOptions!=null&&!this._testOnlyOptions.isUseDifferentialDownload)return!0;const $=(0,m.blockmapFiles)(R.url,this.app.version,_.updateInfoAndProvider.info.version);this._logger.info(`Download block maps (old: "${$[0]}", new: ${$[1]})`);const L=async P=>{const F=await this.httpExecutor.downloadToBuffer(P,{headers:_.requestHeaders,cancellationToken:_.cancellationToken});if(F==null||F.length===0)throw new Error(`Blockmap "${P.href}" is empty`);try{return JSON.parse((0,E.gunzipSync)(F).toString())}catch(U){throw new Error(`Cannot parse blockmap "${P.href}", error: ${U}`)}},k={newUrl:R.url,oldFile:d.join(this.downloadedUpdateHelper.cacheDir,q),logger:this._logger,newFile:T,isUseMultipleRangeRequest:y.isUseMultipleRangeRequest,requestHeaders:_.requestHeaders,cancellationToken:_.cancellationToken};this.listenerCount(p.DOWNLOAD_PROGRESS)>0&&(k.onProgress=P=>this.emit(p.DOWNLOAD_PROGRESS,P));const D=await Promise.all($.map(P=>L(P)));return await new A.GenericDifferentialDownloader(R.info,this.httpExecutor,k).download(D[0],D[1]),!1}catch($){if(this._logger.error(`Cannot download differentially, fallback to full download: ${$.stack||$}`),this._testOnlyOptions!=null)throw $;return!0}}};Tt.AppUpdater=C;function O(j){const R=(0,n.prerelease)(j);return R!=null&&R.length>0}class I{info(R){}warn(R){}error(R){}}return Tt.NoOpLogger=I,Tt}var el;function mr(){if(el)return Gt;el=1,Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.BaseUpdater=void 0;const t=fr,u=oo();let h=class extends u.AppUpdater{constructor(c,s){super(c,s),this.quitAndInstallCalled=!1,this.quitHandlerAdded=!1}quitAndInstall(c=!1,s=!1){this._logger.info("Install on explicit quitAndInstall"),this.install(c,c?s:this.autoRunAppAfterInstall)?setImmediate(()=>{xe.autoUpdater.emit("before-quit-for-update"),this.app.quit()}):this.quitAndInstallCalled=!1}executeDownload(c){return super.executeDownload({...c,done:s=>(this.dispatchUpdateDownloaded(s),this.addQuitHandler(),Promise.resolve())})}install(c=!1,s=!1){if(this.quitAndInstallCalled)return this._logger.warn("install call ignored: quitAndInstallCalled is set to true"),!1;const o=this.downloadedUpdateHelper,d=o&&o.file?process.platform==="linux"?o.file.replace(/ /g,"\\ "):o.file:null,n=o==null?null:o.downloadedFileInfo;if(d==null||n==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;this.quitAndInstallCalled=!0;try{return this._logger.info(`Install: isSilent: ${c}, isForceRunAfter: ${s}`),this.doInstall({installerPath:d,isSilent:c,isForceRunAfter:s,isAdminRightsRequired:n.isAdminRightsRequired})}catch(l){return this.dispatchError(l),!1}}addQuitHandler(){this.quitHandlerAdded||!this.autoInstallOnAppQuit||(this.quitHandlerAdded=!0,this.app.onQuit(c=>{if(this.quitAndInstallCalled){this._logger.info("Update installer has already been triggered. Quitting application.");return}if(!this.autoInstallOnAppQuit){this._logger.info("Update will not be installed on quit because autoInstallOnAppQuit is set to false.");return}if(c!==0){this._logger.info(`Update will be not installed on quit because application is quitting with exit code ${c}`);return}this._logger.info("Auto install update on quit"),this.install(!0,!1)}))}wrapSudo(){const{name:c}=this.app,s=`"${c} would like to update"`,o=this.spawnSyncLog("which gksudo || which kdesudo || which pkexec || which beesu"),d=[o];return/kdesudo/i.test(o)?(d.push("--comment",s),d.push("-c")):/gksudo/i.test(o)?d.push("--message",s):/pkexec/i.test(o)&&d.push("--disable-internal-agent"),d.join(" ")}spawnSyncLog(c,s=[],o={}){return this._logger.info(`Executing: ${c} with args: ${s}`),(0,t.spawnSync)(c,s,{env:{...process.env,...o},encoding:"utf-8",shell:!0}).stdout.trim()}async spawnLog(c,s=[],o=void 0,d="ignore"){return this._logger.info(`Executing: ${c} with args: ${s}`),new Promise((n,l)=>{try{const i={stdio:d,env:o,detached:!0},a=(0,t.spawn)(c,s,i);a.on("error",r=>{l(r)}),a.unref(),a.pid!==void 0&&n(!0)}catch(i){l(i)}})}};return Gt.BaseUpdater=h,Gt}var rr={},nr={},tl;function Jl(){if(tl)return nr;tl=1,Object.defineProperty(nr,"__esModule",{value:!0}),nr.FileWithEmbeddedBlockMapDifferentialDownloader=void 0;const t=mt(),u=Xl(),h=yl;let f=class extends u.DifferentialDownloader{async download(){const d=this.blockAwareFileInfo,n=d.size,l=n-(d.blockMapSize+4);this.fileMetadataBuffer=await this.readRemoteBytes(l,n-1);const i=c(this.fileMetadataBuffer.slice(0,this.fileMetadataBuffer.length-4));await this.doDownload(await s(this.options.oldFile),i)}};nr.FileWithEmbeddedBlockMapDifferentialDownloader=f;function c(o){return JSON.parse((0,h.inflateRawSync)(o).toString())}async function s(o){const d=await(0,t.open)(o,"r");try{const n=(await(0,t.fstat)(d)).size,l=Buffer.allocUnsafe(4);await(0,t.read)(d,l,0,l.length,n-l.length);const i=Buffer.allocUnsafe(l.readUInt32BE(0));return await(0,t.read)(d,i,0,i.length,n-l.length-i.length),await(0,t.close)(d),c(i)}catch(n){throw await(0,t.close)(d),n}}return nr}var rl;function nl(){if(rl)return rr;rl=1,Object.defineProperty(rr,"__esModule",{value:!0}),rr.AppImageUpdater=void 0;const t=qe(),u=fr,h=mt(),f=it,c=Re,s=mr(),o=Jl(),d=kt(),n=nt();let l=class extends s.BaseUpdater{constructor(a,r){super(a,r)}isUpdaterActive(){return process.env.APPIMAGE==null?(process.env.SNAP==null?this._logger.warn("APPIMAGE env is not defined, current application is not an AppImage"):this._logger.info("SNAP env is defined, updater is disabled"),!1):super.isUpdaterActive()}doDownloadUpdate(a){const r=a.updateInfoAndProvider.provider,p=(0,n.findFile)(r.resolveFiles(a.updateInfoAndProvider.info),"AppImage",["rpm","deb"]);return this.executeDownload({fileExtension:"AppImage",fileInfo:p,downloadUpdateOptions:a,task:async(g,E)=>{const m=process.env.APPIMAGE;if(m==null)throw(0,t.newError)("APPIMAGE env is not defined","ERR_UPDATER_OLD_FILE_NOT_FOUND");let A=!1;try{const C={newUrl:p.url,oldFile:m,logger:this._logger,newFile:g,isUseMultipleRangeRequest:r.isUseMultipleRangeRequest,requestHeaders:a.requestHeaders,cancellationToken:a.cancellationToken};this.listenerCount(d.DOWNLOAD_PROGRESS)>0&&(C.onProgress=O=>this.emit(d.DOWNLOAD_PROGRESS,O)),await new o.FileWithEmbeddedBlockMapDifferentialDownloader(p.info,this.httpExecutor,C).download()}catch(C){this._logger.error(`Cannot download differentially, fallback to full download: ${C.stack||C}`),A=process.platform==="linux"}A&&await this.httpExecutor.download(p.url,g,E),await(0,h.chmod)(g,493)}})}doInstall(a){const r=process.env.APPIMAGE;if(r==null)throw(0,t.newError)("APPIMAGE env is not defined","ERR_UPDATER_OLD_FILE_NOT_FOUND");(0,f.unlinkSync)(r);let p;const g=c.basename(r);c.basename(a.installerPath)===g||!/\d+\.\d+\.\d+/.test(g)?p=r:p=c.join(c.dirname(r),c.basename(a.installerPath)),(0,u.execFileSync)("mv",["-f",a.installerPath,p]),p!==r&&this.emit("appimage-filename-updated",p);const E={...process.env,APPIMAGE_SILENT_INSTALL:"true"};return a.isForceRunAfter?this.spawnLog(p,[],E):(E.APPIMAGE_EXIT_AFTER_INSTALL="true",(0,u.execFileSync)(p,[],{env:E})),!0}};return rr.AppImageUpdater=l,rr}var ir={},il;function ol(){if(il)return ir;il=1,Object.defineProperty(ir,"__esModule",{value:!0}),ir.DebUpdater=void 0;const t=mr(),u=kt(),h=nt();let f=class extends t.BaseUpdater{constructor(s,o){super(s,o)}doDownloadUpdate(s){const o=s.updateInfoAndProvider.provider,d=(0,h.findFile)(o.resolveFiles(s.updateInfoAndProvider.info),"deb",["AppImage","rpm"]);return this.executeDownload({fileExtension:"deb",fileInfo:d,downloadUpdateOptions:s,task:async(n,l)=>{this.listenerCount(u.DOWNLOAD_PROGRESS)>0&&(l.onProgress=i=>this.emit(u.DOWNLOAD_PROGRESS,i)),await this.httpExecutor.download(d.url,n,l)}})}doInstall(s){const o=this.wrapSudo(),d=/pkexec/i.test(o)?"":'"',n=["dpkg","-i",s.installerPath,"||","apt-get","install","-f","-y"];return this.spawnSyncLog(o,[`${d}/bin/bash`,"-c",`'${n.join(" ")}'${d}`]),s.isForceRunAfter&&this.app.relaunch(),!0}};return ir.DebUpdater=f,ir}var or={},al;function sl(){if(al)return or;al=1,Object.defineProperty(or,"__esModule",{value:!0}),or.RpmUpdater=void 0;const t=mr(),u=kt(),h=nt();let f=class extends t.BaseUpdater{constructor(s,o){super(s,o)}doDownloadUpdate(s){const o=s.updateInfoAndProvider.provider,d=(0,h.findFile)(o.resolveFiles(s.updateInfoAndProvider.info),"rpm",["AppImage","deb"]);return this.executeDownload({fileExtension:"rpm",fileInfo:d,downloadUpdateOptions:s,task:async(n,l)=>{this.listenerCount(u.DOWNLOAD_PROGRESS)>0&&(l.onProgress=i=>this.emit(u.DOWNLOAD_PROGRESS,i)),await this.httpExecutor.download(d.url,n,l)}})}doInstall(s){const o=s.installerPath,d=this.wrapSudo(),n=/pkexec/i.test(d)?"":'"',l=this.spawnSyncLog("which zypper");let i;return l?i=[l,"--no-refresh","install","--allow-unsigned-rpm","-y","-f",o]:i=[this.spawnSyncLog("which dnf || which yum"),"-y","install",o],this.spawnSyncLog(d,[`${n}/bin/bash`,"-c",`'${i.join(" ")}'${n}`]),s.isForceRunAfter&&this.app.relaunch(),!0}};return or.RpmUpdater=f,or}var ar={},ll;function ul(){if(ll)return ar;ll=1,Object.defineProperty(ar,"__esModule",{value:!0}),ar.MacUpdater=void 0;const t=qe(),u=mt(),h=it,f=Re,c=Ku,s=oo(),o=nt(),d=fr,n=ur;let l=class extends s.AppUpdater{constructor(a,r){super(a,r),this.nativeUpdater=xe.autoUpdater,this.squirrelDownloadedUpdate=!1,this.nativeUpdater.on("error",p=>{this._logger.warn(p),this.emit("error",p)}),this.nativeUpdater.on("update-downloaded",()=>{this.squirrelDownloadedUpdate=!0,this.debug("nativeUpdater.update-downloaded")})}debug(a){this._logger.debug!=null&&this._logger.debug(a)}closeServerIfExists(){this.server&&(this.debug("Closing proxy server"),this.server.close(a=>{a&&this.debug("proxy server wasn't already open, probably attempted closing again as a safety check before quit")}))}async doDownloadUpdate(a){let r=a.updateInfoAndProvider.provider.resolveFiles(a.updateInfoAndProvider.info);const p=this._logger,g="sysctl.proc_translated";let E=!1;try{this.debug("Checking for macOS Rosetta environment"),E=(0,d.execFileSync)("sysctl",[g],{encoding:"utf8"}).includes(`${g}: 1`),p.info(`Checked for macOS Rosetta environment (isRosetta=${E})`)}catch(R){p.warn(`sysctl shell command to check for macOS Rosetta environment failed: ${R}`)}let m=!1;try{this.debug("Checking for arm64 in uname");const _=(0,d.execFileSync)("uname",["-a"],{encoding:"utf8"}).includes("ARM");p.info(`Checked 'uname -a': arm64=${_}`),m=m||_}catch(R){p.warn(`uname shell command to check for arm64 failed: ${R}`)}m=m||process.arch==="arm64"||E;const A=R=>{var _;return R.url.pathname.includes("arm64")||((_=R.info.url)===null||_===void 0?void 0:_.includes("arm64"))};m&&r.some(A)?r=r.filter(R=>m===A(R)):r=r.filter(R=>!A(R));const C=(0,o.findFile)(r,"zip",["pkg","dmg"]);if(C==null)throw(0,t.newError)(`ZIP file not provided: ${(0,t.safeStringifyJson)(r)}`,"ERR_UPDATER_ZIP_FILE_NOT_FOUND");const O=a.updateInfoAndProvider.provider,I="update.zip";let j="";return this.executeDownload({fileExtension:"zip",fileInfo:C,downloadUpdateOptions:a,task:async(R,_)=>{j=f.join(this.downloadedUpdateHelper.cacheDir,I);const T=()=>(0,u.pathExistsSync)(j)?!a.disableDifferentialDownload:(p.info("Unable to locate previous update.zip for differential download (is this first install?), falling back to full download"),!1);let y=!0;T()&&(y=await this.differentialDownloadInstaller(C,a,R,O,I)),y&&await this.httpExecutor.download(C.url,R,_)},done:R=>{try{(0,h.copyFileSync)(R.downloadedFile,j)}catch(_){this._logger.error(`Unable to copy file for caching: ${_.message}`)}return this.updateDownloaded(C,R)}})}async updateDownloaded(a,r){var p;const g=r.downloadedFile,E=(p=a.info.size)!==null&&p!==void 0?p:(await(0,u.stat)(g)).size,m=this._logger,A=`fileToProxy=${a.url.href}`;this.closeServerIfExists(),this.debug(`Creating proxy server for native Squirrel.Mac (${A})`),this.server=(0,c.createServer)(),this.debug(`Proxy server for native Squirrel.Mac is created (${A})`),this.server.on("close",()=>{m.info(`Proxy server for native Squirrel.Mac is closed (${A})`)});const C=O=>{const I=O.address();return typeof I=="string"?I:`http://127.0.0.1:${I==null?void 0:I.port}`};return await new Promise((O,I)=>{const j=(0,n.randomBytes)(64).toString("base64").replace(/\//g,"_").replace(/\+/g,"-"),R=Buffer.from(`autoupdater:${j}`,"ascii"),_=`/${(0,n.randomBytes)(64).toString("hex")}.zip`;this.server.on("request",(T,y)=>{const q=T.url;if(m.info(`${q} requested`),q==="/"){if(!T.headers.authorization||T.headers.authorization.indexOf("Basic ")===-1){y.statusCode=401,y.statusMessage="Invalid Authentication Credentials",y.end(),m.warn("No authenthication info");return}const k=T.headers.authorization.split(" ")[1],D=Buffer.from(k,"base64").toString("ascii"),[P,F]=D.split(":");if(P!=="autoupdater"||F!==j){y.statusCode=401,y.statusMessage="Invalid Authentication Credentials",y.end(),m.warn("Invalid authenthication credentials");return}const U=Buffer.from(`{ "url": "${C(this.server)}${_}" }`);y.writeHead(200,{"Content-Type":"application/json","Content-Length":U.length}),y.end(U);return}if(!q.startsWith(_)){m.warn(`${q} requested, but not supported`),y.writeHead(404),y.end();return}m.info(`${_} requested by Squirrel.Mac, pipe ${g}`);let $=!1;y.on("finish",()=>{$||(this.nativeUpdater.removeListener("error",I),O([]))});const L=(0,h.createReadStream)(g);L.on("error",k=>{try{y.end()}catch(D){m.warn(`cannot end response: ${D}`)}$=!0,this.nativeUpdater.removeListener("error",I),I(new Error(`Cannot pipe "${g}": ${k}`))}),y.writeHead(200,{"Content-Type":"application/zip","Content-Length":E}),L.pipe(y)}),this.debug(`Proxy server for native Squirrel.Mac is starting to listen (${A})`),this.server.listen(0,"127.0.0.1",()=>{this.debug(`Proxy server for native Squirrel.Mac is listening (address=${C(this.server)}, ${A})`),this.nativeUpdater.setFeedURL({url:C(this.server),headers:{"Cache-Control":"no-cache",Authorization:`Basic ${R.toString("base64")}`}}),this.dispatchUpdateDownloaded(r),this.autoInstallOnAppQuit?(this.nativeUpdater.once("error",I),this.nativeUpdater.checkForUpdates()):O([])})})}quitAndInstall(){this.squirrelDownloadedUpdate?(this.nativeUpdater.quitAndInstall(),this.closeServerIfExists()):(this.nativeUpdater.on("update-downloaded",()=>{this.nativeUpdater.quitAndInstall(),this.closeServerIfExists()}),this.autoInstallOnAppQuit||this.nativeUpdater.checkForUpdates())}};return ar.MacUpdater=l,ar}var sr={},Fr={},cl;function Cf(){if(cl)return Fr;cl=1,Object.defineProperty(Fr,"__esModule",{value:!0}),Fr.verifySignature=c;const t=qe(),u=fr,h=Wi,f=Re;function c(n,l,i){return new Promise((a,r)=>{const p=l.replace(/'/g,"''");i.info(`Verifying signature ${p}`),(0,u.execFile)('set "PSModulePath=" & chcp 65001 >NUL & powershell.exe',["-NoProfile","-NonInteractive","-InputFormat","None","-Command",`"Get-AuthenticodeSignature -LiteralPath '${p}' | ConvertTo-Json -Compress"`],{shell:!0,timeout:20*1e3},(g,E,m)=>{var A;try{if(g!=null||m){o(i,g,m,r),a(null);return}const C=s(E);if(C.Status===0){try{const R=f.normalize(C.Path),_=f.normalize(l);if(i.info(`LiteralPath: ${R}. Update Path: ${_}`),R!==_){o(i,new Error(`LiteralPath of ${R} is different than ${_}`),m,r),a(null);return}}catch(R){i.warn(`Unable to verify LiteralPath of update asset due to missing data.Path. Skipping this step of validation. Message: ${(A=R.message)!==null&&A!==void 0?A:R.stack}`)}const I=(0,t.parseDn)(C.SignerCertificate.Subject);let j=!1;for(const R of n){const _=(0,t.parseDn)(R);if(_.size?j=Array.from(_.keys()).every(y=>_.get(y)===I.get(y)):R===I.get("CN")&&(i.warn(`Signature validated using only CN ${R}. Please add your full Distinguished Name (DN) to publisherNames configuration`),j=!0),j){a(null);return}}}const O=`publisherNames: ${n.join(" | ")}, raw info: `+JSON.stringify(C,(I,j)=>I==="RawData"?void 0:j,2);i.warn(`Sign verification failed, installer signed with incorrect certificate: ${O}`),a(O)}catch(C){o(i,C,null,r),a(null);return}})})}function s(n){const l=JSON.parse(n);delete l.PrivateKey,delete l.IsOSBinary,delete l.SignatureType;const i=l.SignerCertificate;return i!=null&&(delete i.Archived,delete i.Extensions,delete i.Handle,delete i.HasPrivateKey,delete i.SubjectName),l}function o(n,l,i,a){if(d()){n.warn(`Cannot execute Get-AuthenticodeSignature: ${l||i}. Ignoring signature validation due to unsupported powershell version. Please upgrade to powershell 3 or higher.`);return}try{(0,u.execFileSync)("powershell.exe",["-NoProfile","-NonInteractive","-Command","ConvertTo-Json test"],{timeout:10*1e3})}catch(r){n.warn(`Cannot execute ConvertTo-Json: ${r.message}. Ignoring signature validation due to unsupported powershell version. Please upgrade to powershell 3 or higher.`);return}l!=null&&a(l),i&&a(new Error(`Cannot execute Get-AuthenticodeSignature, stderr: ${i}. Failing signature validation due to unknown stderr.`))}function d(){const n=h.release();return n.startsWith("6.")&&!n.startsWith("6.3")}return Fr}var fl;function dl(){if(fl)return sr;fl=1,Object.defineProperty(sr,"__esModule",{value:!0}),sr.NsisUpdater=void 0;const t=qe(),u=Re,h=mr(),f=Jl(),c=kt(),s=nt(),o=mt(),d=Cf(),n=xt;let l=class extends h.BaseUpdater{constructor(a,r){super(a,r),this._verifyUpdateCodeSignature=(p,g)=>(0,d.verifySignature)(p,g,this._logger)}get verifyUpdateCodeSignature(){return this._verifyUpdateCodeSignature}set verifyUpdateCodeSignature(a){a&&(this._verifyUpdateCodeSignature=a)}doDownloadUpdate(a){const r=a.updateInfoAndProvider.provider,p=(0,s.findFile)(r.resolveFiles(a.updateInfoAndProvider.info),"exe");return this.executeDownload({fileExtension:"exe",downloadUpdateOptions:a,fileInfo:p,task:async(g,E,m,A)=>{const C=p.packageInfo,O=C!=null&&m!=null;if(O&&a.disableWebInstaller)throw(0,t.newError)(`Unable to download new version ${a.updateInfoAndProvider.info.version}. Web Installers are disabled`,"ERR_UPDATER_WEB_INSTALLER_DISABLED");!O&&!a.disableWebInstaller&&this._logger.warn("disableWebInstaller is set to false, you should set it to true if you do not plan on using a web installer. This will default to true in a future version."),(O||a.disableDifferentialDownload||await this.differentialDownloadInstaller(p,a,g,r,t.CURRENT_APP_INSTALLER_FILE_NAME))&&await this.httpExecutor.download(p.url,g,E);const I=await this.verifySignature(g);if(I!=null)throw await A(),(0,t.newError)(`New version ${a.updateInfoAndProvider.info.version} is not signed by the application owner: ${I}`,"ERR_UPDATER_INVALID_SIGNATURE");if(O&&await this.differentialDownloadWebPackage(a,C,m,r))try{await this.httpExecutor.download(new n.URL(C.path),m,{headers:a.requestHeaders,cancellationToken:a.cancellationToken,sha512:C.sha512})}catch(j){try{await(0,o.unlink)(m)}catch{}throw j}}})}async verifySignature(a){let r;try{if(r=(await this.configOnDisk.value).publisherName,r==null)return null}catch(p){if(p.code==="ENOENT")return null;throw p}return await this._verifyUpdateCodeSignature(Array.isArray(r)?r:[r],a)}doInstall(a){const r=["--updated"];a.isSilent&&r.push("/S"),a.isForceRunAfter&&r.push("--force-run"),this.installDirectory&&r.push(`/D=${this.installDirectory}`);const p=this.downloadedUpdateHelper==null?null:this.downloadedUpdateHelper.packageFile;p!=null&&r.push(`--package-file=${p}`);const g=()=>{this.spawnLog(u.join(process.resourcesPath,"elevate.exe"),[a.installerPath].concat(r)).catch(E=>this.dispatchError(E))};return a.isAdminRightsRequired?(this._logger.info("isAdminRightsRequired is set to true, run installer using elevate.exe"),g(),!0):(this.spawnLog(a.installerPath,r).catch(E=>{const m=E.code;this._logger.info(`Cannot run installer: error code: ${m}, error message: "${E.message}", will be executed again using elevate if EACCES, and will try to use electron.shell.openItem if ENOENT`),m==="UNKNOWN"||m==="EACCES"?g():m==="ENOENT"?xe.shell.openPath(a.installerPath).catch(A=>this.dispatchError(A)):this.dispatchError(E)}),!0)}async differentialDownloadWebPackage(a,r,p,g){if(r.blockMapSize==null)return!0;try{const E={newUrl:new n.URL(r.path),oldFile:u.join(this.downloadedUpdateHelper.cacheDir,t.CURRENT_APP_PACKAGE_FILE_NAME),logger:this._logger,newFile:p,requestHeaders:this.requestHeaders,isUseMultipleRangeRequest:g.isUseMultipleRangeRequest,cancellationToken:a.cancellationToken};this.listenerCount(c.DOWNLOAD_PROGRESS)>0&&(E.onProgress=m=>this.emit(c.DOWNLOAD_PROGRESS,m)),await new f.FileWithEmbeddedBlockMapDifferentialDownloader(r,this.httpExecutor,E).download()}catch(E){return this._logger.error(`Cannot download differentially, fallback to full download: ${E.stack||E}`),process.platform==="win32"}return!1}};return sr.NsisUpdater=l,sr}var hl;function kt(){return hl||(hl=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.UpdaterSignal=t.UPDATE_DOWNLOADED=t.DOWNLOAD_PROGRESS=t.NsisUpdater=t.MacUpdater=t.RpmUpdater=t.DebUpdater=t.AppImageUpdater=t.Provider=t.CancellationToken=t.NoOpLogger=t.AppUpdater=t.BaseUpdater=void 0;const u=qe();Object.defineProperty(t,"CancellationToken",{enumerable:!0,get:function(){return u.CancellationToken}});const h=mt(),f=Re;var c=mr();Object.defineProperty(t,"BaseUpdater",{enumerable:!0,get:function(){return c.BaseUpdater}});var s=oo();Object.defineProperty(t,"AppUpdater",{enumerable:!0,get:function(){return s.AppUpdater}}),Object.defineProperty(t,"NoOpLogger",{enumerable:!0,get:function(){return s.NoOpLogger}});var o=nt();Object.defineProperty(t,"Provider",{enumerable:!0,get:function(){return o.Provider}});var d=nl();Object.defineProperty(t,"AppImageUpdater",{enumerable:!0,get:function(){return d.AppImageUpdater}});var n=ol();Object.defineProperty(t,"DebUpdater",{enumerable:!0,get:function(){return n.DebUpdater}});var l=sl();Object.defineProperty(t,"RpmUpdater",{enumerable:!0,get:function(){return l.RpmUpdater}});var i=ul();Object.defineProperty(t,"MacUpdater",{enumerable:!0,get:function(){return i.MacUpdater}});var a=dl();Object.defineProperty(t,"NsisUpdater",{enumerable:!0,get:function(){return a.NsisUpdater}});let r;function p(){if(process.platform==="win32")r=new(dl()).NsisUpdater;else if(process.platform==="darwin")r=new(ul()).MacUpdater;else{r=new(nl()).AppImageUpdater;try{const m=f.join(process.resourcesPath,"package-type");if(!(0,h.existsSync)(m))return r;console.info("Checking for beta autoupdate feature for deb/rpm distributions");const A=(0,h.readFileSync)(m).toString().trim();switch(console.info("Found package-type:",A),A){case"deb":r=new(ol()).DebUpdater;break;case"rpm":r=new(sl()).RpmUpdater;break;default:break}}catch(m){console.warn("Unable to detect 'package-type' for autoUpdater (beta rpm/deb support). If you'd like to expand support, please consider contributing to electron-builder",m.message)}}return r}Object.defineProperty(t,"autoUpdater",{enumerable:!0,get:()=>r||p()}),t.DOWNLOAD_PROGRESS="download-progress",t.UPDATE_DOWNLOADED="update-downloaded";class g{constructor(A){this.emitter=A}login(A){E(this.emitter,"login",A)}progress(A){E(this.emitter,t.DOWNLOAD_PROGRESS,A)}updateDownloaded(A){E(this.emitter,t.UPDATE_DOWNLOADED,A)}updateCancelled(A){E(this.emitter,"update-cancelled",A)}}t.UpdaterSignal=g;function E(m,A,C){m.on(A,C)}}(Gr)),Gr}var bf=kt();const{getPort:Of}=require("get-port-please"),If=require("os");bf.autoUpdater.checkForUpdatesAndNotify();process.env.ELECTRON_DISABLE_SECURITY_WARNINGS="true";function pl(t,u){const h=Df(t+"-"+u);let f;return process.env.NODE_ENV==="development"?(f=Re.join(xe.app.getAppPath(),"electron-server",u,"venv"),process.platform==="win32"?f=Re.join(f,"Scripts"):f=Re.join(f,"bin"),f=Re.join(f,h)):f=Re.join(Pf(),h),f}function Pf(){return xe.app.isPackaged?process.resourcesPath:xe.app.getAppPath()}function Df(t){return process.platform==="win32"?t+".exe":t}const ji=Re.join(If.tmpdir(),"vease");function Nf(t){it.existsSync(t)||it.mkdir(t,u=>{if(u)return console.error(u);console.log(`${t} directory created successfully!`)})}Nf(ji);var Ql=[];async function ml(t){const u=await Of({port:t,host:"localhost"});return console.log("available_port",u),u}async function gl(t,u,h,f,c=30){return new Promise((s,o)=>{setTimeout(()=>{o("Timed out after "+c+" seconds")},c*1e3);var d=fr.spawn(u,h,{encoding:"utf8",shell:!0});d.stderr.setEncoding("utf8"),d.on("error",n=>{xe.dialog.showMessageBox({title:"Title",type:"warning",message:`Error occured.\r
`+n})}),d.stdout.setEncoding("utf8"),d.stdout.on("data",n=>{n=n.toString(),n.includes(f)&&s(),console.log(n)}),d.stderr.on("data",n=>{t.webContents.send("mainprocess-response",n),console.log(n)}),d.on("close",n=>{}),d.name=u.replace(/^.*[\\/]/,""),Ql.push(d)})}xe.app.whenReady().then(()=>{const t=new xe.BrowserWindow({title:"Vease - New project",icon:process.platform==="win32"?"public/logo.ico":"public/logo.png",center:!0,webPreferences:{nodeIntegrationInWorker:!0,contextIsolation:!0,nodeIntegration:!0,webSecurity:!0,preload:Re.join(__dirname,"preload.js")}});if(t.setMenuBarVisibility(!1),t.maximize(),t.setMinimumSize(800,600),t.webContents.session.webRequest.onBeforeSendHeaders((u,h)=>{h({requestHeaders:{Origin:"*",...u.requestHeaders}})}),t.webContents.setWindowOpenHandler(({url:u})=>(require("electron").shell.openExternal(u),{action:"deny"})),t.webContents.session.webRequest.onHeadersReceived((u,h)=>{h({responseHeaders:{"Access-Control-Allow-Origin":["*"],"Access-Control-Allow-Methods":["*"],"Access-Control-Allow-Headers":["*"],...u.responseHeaders}})}),xe.ipcMain.handle("run_back",async(u,...h)=>{const f=await ml(h[0]);console.log("BACK PORT",f);const c=pl("vease","back");return console.log("command",c),await gl(t,c,["--port "+f,"--data_folder_path "+ji,"--desktop","--allowed_origin ",""*""],"Serving Flask app"),f}),xe.ipcMain.handle("run_viewer",async(u,...h)=>{const f=await ml(h[0]);console.log("VIEWER PORT",f);const c=pl("vease","viewer");return console.log("command",c),await gl(t,c,["--port "+f,"--data_folder_path "+ji],"Starting factory"),f}),xe.app.isPackaged){const u=Re.join(xe.app.getAppPath(),".output","public","index.html");console.log("APP_PATH",u),t.loadFile(u)}else console.log("VITE_DEV_SERVER_URL",process.env.VITE_DEV_SERVER_URL),t.loadURL(process.env.VITE_DEV_SERVER_URL),t.webContents.openDevTools()});xe.app.on("before-quit",function(){Ql.forEach(function(t){console.log("Process %s has been killed!",t.name),t.kill()})});xe.app.on("window-all-closed",()=>{xe.app.quit()});
